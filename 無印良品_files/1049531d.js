!function(){window.ptConfig=window.ptConfig||{};var n="1049531d",e=window.ptengine||[],t=(new Date).getTime(),i=window.location.href,o="_pt_link",a=!1;try{a=(window._pt_sp_2||[]).some((function(n){if(n&&-1!==n.indexOf(",")){var e=n.split(",");return"setOuterIframeEnabled"===e[0]&&"1"===e[1]}return!1}))}catch(n){}var r={na:a?window.top.navigator:navigator,doc:a?window.top.document:document,win:a?window.top:window,loc:a?window.top.location:location},c={"crossDomainEnable":false,"PTXEnabled":true,"PTEEnabled":true,"crossAnyDomain":false,"isNpPackage":true,"isExcess":false,"domain":["https://muji.com"],"crossDomainType":"HASH","ptxEventList":[],"hasInline":false,"hasRedirect":false,"pageConditions":[]};e.__crossDomainEnable=c.crossDomainEnable,e.__crossDomainType=c.crossDomainType||"HASH",e.__PTXEnabled=c.PTXEnabled,e.__PTEEnabled=c.PTEEnabled,e.__isNpPackage=c.isNpPackage,e.__ids={pte:"",ptx:"",vref:"",crossDomainType:""},e.__crossDomainProcessCallback=function(n,t,i,o){var a=window.ptengine;if(!a)return null;a.__ids[n]=t,a.__ids.vref=a.__ids.vref||i,a.__ids.crossDomainType=a.__ids.crossDomainType||o;var r=document.body&&document.body.innerHTML;if(!a.__crossDomainEnable&&!a.__ids.crossDomainType&&r&&-1===r.indexOf("data-pt-crossDomain")&&-1===r.indexOf("pt-domain"))return null;a.__ids.pte&&a.__ids.ptx&&function(n,t){var i=document.getElementsByTagName("a");i.length>0&&[].map.call(i,(function(i){var o,a=i.getAttribute("href"),r=a&&function(n){var e=document.createElement("a");e.href=n;var t={source:n,protocol:e.protocol.replace(":",""),host:e.hostname,port:e.port,path:u(e.pathname).replace(/^([^\/])/,"/$1")},i=t.protocol+"://"+t.host+(t.port?":"+t.port:"")+t.path;return u(n).indexOf(i)<0&&(t.path=t.path.replace(/^\//,"")),t}(a),c=i.getAttribute("onclick"),s=i.getAttribute("data-pt-crossDomain"),d=a&&a.match(/^https?:\/\//)&&a.length<900&&r&&(null===(o=e.__domain)||void 0===o?void 0:o.some((function(n){return-1!==r.host.toLowerCase().indexOf(n)})))&&r.host.toLowerCase().indexOf(function(n){var e=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,t=n.split("."),i=t[t.length-1];(i.length>4||"com"===i||"org"===i)&&(e=/[a-z0-9][a-z0-9-]*\.[a-z]+$/i);var o=n.match(e);return o?o[0]:""}(location.hostname))<0;(d&&t||d&&(c&&-1!==c.indexOf("pt_domain")||null!==s))&&i.setAttribute("href",_(a,n))}))}("".concat(a.__ids.vref).concat("_s_").concat(a.__ids.pte).concat("_s_").concat(a.__ids.ptx),"halfManual"===a.__ids.crossDomainType||a.__crossDomainEnable)},e.__domain=c.domain||[],window.ptConfig.silenttimes=function(n){var e=function(){try{var n=r.na.userAgent;return n?function(){var n=r.na.platform.toLowerCase();if(n.indexOf("win")>-1)return!0;for(var e=["mac68k","macppc","macintosh","macintel"],t=0;t<e.length;t++)if(n===e[t])return!0;return!1}()||function(n){for(var e=["AIX","Amiga","BeOS","DragonFly","FreeBSD","GNU","Haiku","HP-UX","IRIX","Joli","Java","Macintosh","Minix","MorphOS","NetBSD","OpenBSD","PClinuxOS","QNX x86pc","SunOS","Ubuntu","Mint","Red Hat","Slackware","SUSE","PCLinuxOS","Debian","Fedora","CentOS","Vine","Arch Linux","Gentoo","Kanotix","Mandriva"],t=0;t<e.length;t++)if(n.indexOf(e[t])>-1)return!0;return!1}(n)?function(n){for(var e=["Android","AROS","Bada","BlackBerry","Chromium","CrOS","Danger Hiptop","Inferno","iPhone","iPad","iPod","Nintendo DS","Nintendo Wii","Palm OS","PLAYSTATION","Syllable","SymbOS","Symbian","Tizen","webOS","WebTV","Windows CE","Windows Mobile","Windows Phone","Xbox"],t=0;t<e.length;t++)if(n.indexOf(e[t])>-1)return!0;return!1}(n)?3:n.match(/.*MSIE.*Windows NT 6\.2;.*Touch\).*/)?4:2:n.indexOf("iPad")>-1||Math.min(function(){try{var n=r.win.screen.width;return n?isNaN(parseInt(n.toString(),10))?0:parseInt(n.toString(),10):0}catch(n){return 0}}(),r.win.screen.height)>=1e3?4:1:0}catch(n){return 0}}(),t=2===e||3===e;return n?{ptx:t?n.pc:n.mobile,pti:t?n.pc:n.mobile}:{ptx:t?30:5,pti:5}}(c.silenttimes),window.ptConfig.isExcess=c.isExcess,window.ptConfig.ptxEventList=c.ptxEventList,window.ptConfig.crossAnyDomain=c.crossAnyDomain;var s=!1;function d(n){var t="pt-async-hide",i=c||{pageConditions:[],isExcess:!1,hasInline:!1,hasRedirect:!1,hasAntiFlicker:!0},o=i.sdkDataPlaceholder,a=i.isExcess,r=i.hasInline,d=i.hasRedirect,l=i.hasAntiFlicker,_=i.pageConditions;if(!o){var u,f=d||r,m=f&&p(n,_);!a&&f&&(!n&&l||m&&n)&&(t,(u=document.createElement("style")).appendChild(document.createTextNode(".".concat("pt-async-hide"," { opacity: 0 !important}"))),document.getElementsByTagName("head")[0].appendChild(u),function(n,t,i,o){var a={start:(new Date).getTime(),end:function(){document.documentElement.className=document.documentElement.className.replace(RegExp(" ?"+n),""),a.endTime=(new Date).getTime()},hasInline:i,hasRedirect:o,timeout:4e3};document.documentElement.classList.add(n),e.__antiFlicker=a,setTimeout((function(){a.end&&(a.end(),a.end=null)}),4e3)}(t,0,r,s))}}function p(n,e){if(!n||!e||!Array.isArray(e)||0===e.length)return!0;for(var t=!1,o=0;o<e.length;o++){var a=e[o];if(!a||!Array.isArray(a))break;for(var r=[],c=function(e){var t=a[e]||{}||{},o=t.type,c=t.value,d=t.condition,p=t.uuid,l=u("COMBINEDPAGE"===o.toLocaleUpperCase()?window.location.protocol+"//"+window.location.host+window.location.pathname:n);if("REDIRECT_ORIGINAL_PAGE"===p&&(-1!==i.indexOf("hasRedirect=1")&&(s=!0),Array.isArray(c)&&!s&&(s=c.findIndex((function(n){return u(n)===l}))>-1)),"ALL"===o.toLocaleUpperCase())r.push(!0);else{var _=[];"string"==typeof c&&(c=[c]),Array.isArray(c)&&(_=c.map((function(n){switch(d){case"==":n=l===u(n);break;case"[()]":n=-1!==l.indexOf(u(n));break;case"![()]":n=-1===l.indexOf(u(n));break;case"[(":n=new RegExp("^"+m(u(n))).test(l);break;case")]":n=new RegExp(m(u(n))+"$").test(l);break;case"Rex":n=new RegExp(n).test(l);break;default:n=!1}return n}))),r.push("![()]"===d?_.every((function(n){return n})):_.some((function(n){return n})))}},d=0;d<a.length;d++)c(d);if(t||(t=r.every((function(n){return n}))),t&&s)break}return t}function l(n){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=n;var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}function _(n,t){if(n&&t){var i=(n=function(n){var e=n.match(/[\#|\?|\&]_pt_link=[^#|^&]*/),t="";if(e){var i=n.split(e[0]);t=i[0]+(i[1]?i[1]:"")}return t||n}(n)).split("#");if(1===i.length&&"HASH"===(e.__crossDomainType+"").toLocaleUpperCase())n+="#".concat(o,"=").concat(t);else{var a=i[1]?"#".concat(i[1]):"";n="".concat(i[0]).concat(-1===n.indexOf("?")?"?":"&").concat(o,"=").concat(t).concat(a)}return n}}function u(n){try{return decodeURIComponent(n)}catch(e){return n}}function f(n){var e=new RegExp("(^|&)"+n+"=([^&]*)(&|$)","i"),t=r.win.location.search.split("?").splice(1),i=null;return t.length>=1&&t.forEach((function(n){var t=n.match(e);null!=t&&(i=u(t[2]))})),i}function m(n){if("string"==typeof n)return["?","^","$","*","+","(",")","|"].map((function(e){var t=new RegExp("(\\"+e+")","g");n=n.replace(t,"\\$1")})),n}!e.__ver&&e.__PTXEnabled&&(function(){e.__ver="2.0",e.__sid=n,e.__start=t,window.ptengine=e;for(var i="page track identify createCrossDomainUrl".split(" "),o=function(n){var t=i[n];e[t]=function(){e.push([t].concat(Array.prototype.slice.call(arguments,0)))}},a=0;a<i.length;a++)o(a);localStorage.setItem("PTX_SID",n)}(),function(){var t,o=i.indexOf("ptengine_engage_editor_token")>-1,a=i.indexOf("ptengine_editor_iframe")>-1;try{!o&&(o="ptengine_campaign_editor"===(window.name||(null===(t=null===window||void 0===window?void 0:window.parent)||void 0===t?void 0:t.name)))}catch(n){}var r=i.indexOf("preview_ptx_token")>-1,s=i.indexOf("ptengine_engage_control_group")>-1,p=i.indexOf("isdev")>-1,_=null==e?void 0:e.__sid;if(_||(_=n),!s&&!a){if(_){if(r)return c.hasInline=-1!==i.indexOf("hasInline=1"),c.hasRedirect=-1!==i.indexOf("hasRedirect=1"),c.hasAntiFlicker=-1===i.indexOf("hasAntiFlicker")||-1!==i.indexOf("hasAntiFlicker=1"),d(""),void l("https://xjs.ptengine.jp/ptx_preview.js");if(o)return void function(n){if(!window._ptengine_engage_edit){window._ptengine_engage_edit={};var e=n?"localhost:8082":"pteglobalstatic.ptengine.com/ptx-editor";l("".concat(location.protocol,"//").concat(e,"/inject.js"))}}(p)}d(i)}}()),Array.isArray(window._pt_sp_2)&&window._pt_sp_2.length>0||!e.__PTEEnabled||(window._pt_lt=t,window._pt_sp_2=[],window._pt_sp_2.push("setAccount,".concat(n)),window._pt_hp={}),e.__PTEEnabled&&function(){var n,e=i.indexOf("ptengine_heatmap_token")>-1,t=-1!==i.indexOf("&pt_cert");e&&!t&&function(n){if(!window._ptengine_heatmap){window._ptengine_heatmap={};var e=n?"localhost:8000":"pti.ptengine.com";l("".concat(location.protocol,"//").concat(e,"/heatmap/inject.js"))}}(i.indexOf("isdev")>-1||"l"===(null===(n=f("ptengine_heatmap_token"))||void 0===n?void 0:n.slice(0,1))||"-1"===f("area"))}(),(e.__PTEEnabled||e.__PTXEnabled)&&i.indexOf("ptengine-event=open")>-1&&function(n){if(!window._ptengine_event){window._ptengine_event={};var e=n?"localhost:8000":"pti.ptengine.com";l("".concat(location.protocol,"//").concat(e,"/event/event_entry.js"))}}(i.indexOf("isdev")>-1)}();
_pt_sp_2.push('setDomain,https://muji.com');
_pt_sp_2.push('setTrackEvent,,,%5B%E5%95%86%E5%93%81%E8%A9%B3%E7%B4%B0%5D%E7%94%BB%E9%9D%A2%E4%B8%8B%E9%83%A8%E8%BF%BD%E5%BE%93_%E3%82%AB%E3%83%BC%E3%83%88%E8%BF%BD%E5%8A%A0,0,false,^https:\\/\\/www\\.muji\\.com\\/jp\\/ja\\/store\\/cmdty\\/detail\\/.*$,%23products_fixed_cart,1675940240205,,3');
_pt_sp_2.push('setTrackEvent,,,%5B%E5%95%86%E5%93%81%E8%A9%B3%E7%B4%B0%5D%E3%82%AB%E3%83%BC%E3%83%88%E8%BF%BD%E5%8A%A0,0,false,^https:\\/\\/www\\.muji\\.com\\/jp\\/ja\\/store\\/cmdty\\/detail\\/.*$,%23products_cart,1675939529091,,3');
_pt_sp_2.push('setTrackEvent,,,%E5%95%86%E5%93%81%E8%A9%B3%E7%B4%B0_%E6%9C%A8%E8%A3%BD%E3%83%99%E3%83%83%E3%83%89_%E8%AA%AC%E6%98%8E%E7%94%BB%E5%83%8F,0,false,^.*https:\\/\\/www\\.muji\\.com\\/jp\\/ja\\/store\\/cmdty\\/detail\\/4550512052135.*$,%23pictureCol%20%3E%20div%3Anth-of-type(2)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(2)%20%3E%20div%3Anth-of-type(13),1646992354895,,8');
_pt_sp_2.push('setTrackEvent,,,TOP_%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%91%E3%83%8D%E3%83%AB5%E6%9E%9A%E7%9B%AE,0,false,^.*https:\\/\\/www\\.muji\\.com\\/jp\\/ja\\/store.*$,%23contentId%20%3E%20div%3Anth-of-type(2)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(2)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(6)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20a%3Anth-of-type(1)%20%3E%20span%3Anth-of-type(1),1637050816815,,8');
_pt_sp_2.push('setTrackEvent,,,TOP_%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%91%E3%83%8D%E3%83%AB1%E6%9E%9A%E7%9B%AE,0,false,^.*https:\\/\\/www\\.muji\\.com\\/jp\\/ja\\/store.*$,%23contentId%20%3E%20div%3Anth-of-type(2)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(2)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(2)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20a%3Anth-of-type(1)%20%3E%20span%3Anth-of-type(1),1637050621584,,8');
_pt_sp_2.push('setTrackEvent,,,TOP_%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%91%E3%83%8D%E3%83%AB3%E6%9E%9A%E7%9B%AE,0,false,^.*https:\\/\\/www\\.muji\\.com\\/jp\\/ja\\/store.*$,%23contentId%20%3E%20div%3Anth-of-type(2)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(2)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(4)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20a%3Anth-of-type(1)%20%3E%20span%3Anth-of-type(1),1637051255493,,8');
_pt_sp_2.push('setTrackEvent,,,TOP_%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%91%E3%83%8D%E3%83%AB4%E6%9E%9A%E7%9B%AE,0,false,^.*https:\\/\\/www\\.muji\\.com\\/jp\\/ja\\/store.*$,%23contentId%20%3E%20div%3Anth-of-type(2)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(2)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(5)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20a%3Anth-of-type(1)%20%3E%20span%3Anth-of-type(1),1637051270969,,8');
_pt_sp_2.push('setTrackEvent,,,TOP_%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%91%E3%83%8D%E3%83%AB2%E6%9E%9A%E7%9B%AE,0,false,^.*https:\\/\\/www\\.muji\\.com\\/jp\\/ja\\/store.*$,%23contentId%20%3E%20div%3Anth-of-type(2)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(2)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(3)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20a%3Anth-of-type(1)%20%3E%20span%3Anth-of-type(1),1637051225109,,8');
_pt_sp_2.push('setTrackEvent,,,PTengine%E6%9C%AC%E7%95%AA_%E3%82%AF%E3%83%AA%E3%83%83%E3%82%AF_%E3%83%90%E3%83%83%E3%82%B0,0,false,^https:\\/\\/www\\.muji\\.com\\/jp\\/ja\\/store$,%23content%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20section%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(2)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20nav%3Anth-of-type(4)%20%3E%20ul%3Anth-of-type(1)%20%3E%20li%3Anth-of-type(2)%20%3E%20a%3Anth-of-type(1),1634634271659,,5');
_pt_sp_2.push('setTrackEvent,,,PTengine%E6%9C%AC%E7%95%AA_%E3%82%AF%E3%83%AA%E3%83%83%E3%82%AF_%E5%8F%8E%E7%B4%8D%E7%94%A8%E5%93%81,0,false,^https:\\/\\/www\\.muji\\.com\\/jp\\/ja\\/store$,%23content%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20section%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(2)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20nav%3Anth-of-type(6)%20%3E%20ul%3Anth-of-type(1)%20%3E%20li%3Anth-of-type(2)%20%3E%20a%3Anth-of-type(1),1634447678421,,5');
_pt_sp_2.push('setTrackEvent,,,Ptengine%E6%9C%AC%E7%95%AA%E2%80%97%E5%8F%8E%E7%B4%8D%E5%AE%B6%E5%85%B7,0,false,^https:\\/\\/www\\.muji\\.com\\/jp\\/ja\\/store$,%23content%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20section%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(2)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20nav%3Anth-of-type(6)%20%3E%20ul%3Anth-of-type(1)%20%3E%20li%3Anth-of-type(1)%20%3E%20a%3Anth-of-type(1),1634258238769,,5');
_pt_sp_2.push('setTrackEvent,,,Ptengine%E6%9C%AC%E7%95%AA%E2%80%97%E5%A9%A6%E4%BA%BA%E6%9C%8D%E3%83%BB%E3%83%AC%E3%83%87%E3%82%A3%E3%83%BC%E3%82%B9%E3%82%A6%E3%82%A7%E3%82%A2,0,false,^.*https:\\/\\/www\\.muji\\.com\\/jp\\/ja\\/store.*$,%23content%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20section%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(2)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(1)%20%3E%20nav%3Anth-of-type(1)%20%3E%20ul%3Anth-of-type(1)%20%3E%20li%3Anth-of-type(1)%20%3E%20a%3Anth-of-type(1),1633582571252,e68ed75a5456dd299d2f1b4ce4d76f6e,8');
_pt_sp_2.push('setServer,0');
_pt_sp_2.push('setEventReport,true');/*event open*/ 
_pt_sp_2.push('setPtxEnabled,1');
!function(a){window["edc7uo"]=-1;function b(){if(rb.localStorage&&"function"==typeof rb.localStorage.removeItem){var a=rb.localStorage.getItem("PT_REDIRECT_TARGET_URL");if(a&&rb.localStorage.removeItem("PT_REDIRECT_TARGET_URL"),tb.href===a&&tb.href.match(/(utm_campaign|utm_source|utm_medium|utm_term|utm_content)/))return!0}return!1}function c(){var a=new RegExp("(^|#)ptengine=([^&]*)(&|$)","i"),b=tb.hash.substr(1),c=b.match(a);return null!=c?decodeURIComponent(c[2]):null}function d(a,b,c,d,e){this.sid=a,this.uid=b,this.vid=c,this.pid=d,this.peid=e,this.v=X,this.ts=(new Date).getTime()}function e(a){var b=rb.MutationObserver||rb.webkitMutationObserver||rb.MozMutationObserver;db.length&&b&&rb.IntersectionObserver&&(Qa=new K(db),a?setTimeout(function(){Qa.init()},sa):Qa.init())}function f(){function b(a){if(Oa)return!1;if(tb.href.match(/(utm_campaign|utm_source|utm_medium|utm_term|utm_content)/))return!0;for(var b=0;b<a.length;b++)if(tb.search.match(new RegExp("[?/&]("+a[b]+")=")))return!0;return!1}function c(){for(var a=["(wap|www|m|m5).baidu.com","www.baidu.jp","(hao|so).360.cn","www.360(soso|sou).com","(www|m).so.com","www.google.","(blogsearch|books|images|news|scholar).google.com","bing.com","(search|tw.search).yahoo.com","www.yahoo.cn","search.yahoo.co.jp","(www|jp).ask.com","(cn|jp).indeed.com","search.biglobe.ne.jp","search.(goo|smt.docomo).ne.jp","search.nifty.com","websearch.rakuten.co.jp","www.so-net.ne.jp"],b=0;b<a.length;b++)if(qb.referrer.match(new RegExp(a[b])))return!0;return!1}function f(a,b){for(var c=0;c<Fa.length;c++)if(a.indexOf(Fa[c])>-1&&b.referrer.indexOf(Fa[c])>-1)return 0;return 1}function k(a,b){var c=a;"object"==typeof b&&(c=b);var d="";try{d=yb.getCssPathOld(c)}catch(a){}var e,f=[];if(cb.length>0)for(var g=0;g<cb.length;g++)try{var h=cb[g];if(h.length>=10){for(var i=E(h[7],h[9]),j=0,k=i.length;j<k;j++)if(l(a,i[j])){f.push(h[3]+":1:0");break}}else if("function"==typeof jQuery&&jQuery(h[7])[0]==c||"function"!=typeof jQuery&&h[7]==d){var m=h;e=m.slice(1,5)}}catch(a){}return{newEventTriggerList:f,oldEventTrigger:e}}function l(a,b){return a===b||"body"!==a.nodeName.toLowerCase()&&l(R(a),b)}function m(a){if(!a)return!1;var b,c;return a.newEventTriggerList&&a.newEventTriggerList.length&&(b=a.newEventTriggerList.join(",")),a.oldEventTrigger&&(c=a.oldEventTrigger.join(".")),!(!b&&!c)&&{eid:b||"",stat:c||""}}function o(){if(null==Tb)return!1;var b=Tb.nodeName.toLowerCase();if("html"==b)return!1;var c=0,e=yb.parentA(Tb),f=ub.getOffset(Tb);Ub=f.left,Vb=f.top;var g="";try{g=yb.getCssPath(Tb)}catch(a){}var h=(new Date).getTime();if(nb!==g)nb=g;else if(h-mb<oa)return!1;if("object"==typeof e){var i=e.getAttribute("onclick");if(i&&i.indexOf("_pt_sp_2")>-1&&e.onclick&&-1==e.onclick.toString().indexOf("_pt_sp_2"))for(var j=i.split(";"),l=0;l<j.length;l++)if(j[l].indexOf("setPVTag")>-1&&_pt_sp_2.push(j[l].replace("_pt_sp_2.push('","").replace('_pt_sp_2.push("',"").replace("')","").replace('")',"")),j[l].indexOf("setTrackEvent")>-1){var o=j[l].split(",");8==o.length&&o.pop(),_pt_sp_2.push(o.join("").replace("_pt_sp_2.push('","").replace('_pt_sp_2.push("',"").replace("')","").replace('")',""))}var p=function(){var a="",b="object"==typeof e.href?e.href.animVal:e.href,c=vb.encode(b,!1).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\./g,"%2E");if(""==b);else if(b.match(/mailto:/))"true"==Va.mailSendings&&(a="Mail,Mailto,"+c.toLowerCase()+",0");else if(b.toLowerCase().match(/\.(msi|pdf|apk|ipa|jar|umd|jad|epub|mobi|iso|tar|zip|rar|gzip|gz|dmg|doc|docx|xls|xlsx|csv|ppt|pptx|exe|txt|pdf|key|numbers|pages)/)){if("true"==Va.fileDownloads){var d=b.toLowerCase().match(/\.(msi|pdf|apk|ipa|jar|umd|jad|epub|mobi|iso|tar|zip|rar|gzip|gz|dmg|doc|docx|xls|xlsx|csv|ppt|pptx|exe|txt|pdf|key|numbers|pages)/)[1];c=c.replace(/(^https?:\/\/)([^\/]+)/i,function(a){return a.toLowerCase()}),a="Downloads,"+d+","+c+",0"}}else if(0==b.toLowerCase().indexOf("http")&&"true"==Va.outboundLinks){for(var f=!0,g=0;g<Fa.length;g++)if(b.toLowerCase().indexOf(Fa[g])>0){f=!1;break}f&&(c=c.replace(/(^https?:\/\/)([^\/]+)/i,function(a){return a.toLowerCase()}),a="Outbound%20Links,Exit,"+c+",0")}return a}();""!=p&&Pa&&_pt_sp_2.push("setTrackEvent,"+p+",false")}var r;!function(){if("focus"==ab)for(var a=0;a<K.length;a++)if(K[a]==b)return;r=k(Tb,e)}();var s=yb.getElementType(Tb),t=s.elementType,u=s.interactionType,v=t+Wa[2]+vb.encode(g,!1).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\./g,"%2E");if(wb.readCookies(),1!=wb.getValueFromCookies("to_flag")&&wb.isActive())((c=h-lb-Zb*ma)<0||c>1.5*ma)&&(c=ma);else{if(1==wb.getValueFromCookies("to_flag")||+h-+wb.getValueFromCookies("sact")>+na)return n("pn"),fc&&(clearInterval(window._pt_hb_interval),window._pt_hb_interval=setInterval(function(){q()},ma),Zb=0),!1;if(wb.isNewVisit(Db,h))return n("pv"),void(fc&&(clearInterval(window._pt_hb_interval),window._pt_hb_interval=setInterval(function(){q()},ma),Zb=0));dc=!0,c=qa}Pb=wb.plPrc(Nb),kb=h,lb=h,mb=h,Fb=wb.getValueFromCookies("pvn"),fc&&(clearInterval(window._pt_hb_interval),window._pt_hb_interval=setInterval(function(){q()},ma),Zb=0),wb.writeCookies();var w=ub.getYMax();Bb=rb.orientation==a||0==rb.orientation?1:-1,1==Bb&&w>Xb?Xb=w:1!=Bb&&w>Yb&&(Yb=w);var x=new d(Ra,Sa,Db,Nb,Ob),y=Ra+"."+Sa+"."+Db+"."+Nb+"."+Ob,z=+(Sb.x+Wa[0])*Bb+"."+(Sb.y+Wa[1])*Bb+"."+ub.getViewWidth()+"."+ub.getViewHeight()+"."+v+".0."+(1==Bb?ub.getScrollY():(ub.getScrollY()+1)*Bb)+"."+(1==Bb?Xb:-1*Yb)+"."+c+"."+(Ub+Wa[0])+"."+(Vb+Wa[1]),A=Ab+"",B=m(r),C="",D="",E=null,F=null;if(Qa){E=Qa.observedDomsList.find(function(a){return Qa.findObserveElementByClick(Tb,a.element)});for(var l=0;l<=db.length;l++){var G=db[l];if(F=Qa.findVisualElementBySelector(Tb,G))break}}(E&&!E.hasImpression||!E&&F)&&(D=Qa&&Qa.getSelector(E?E.element:F));var H;if(window.lpoEnabled)try{var I,J,L,M=Tb.nodeName.toLowerCase();switch(M){case"a":I=Tb.innerText,J=Tb.getAttribute("href");break;case"input":I=Tb.value||Tb.innerText||Tb.getAttribute("src");break;case"button":I=Tb.textContent||Tb.innerText,L="submit"===Tb.getAttribute("type");break;default:I=Tb.innerText.substring(0,50)}H={tagName:M,text:I,href:J,submit:L}}catch(a){}H&&(H.toString=function(){var a="";for(var b in H)a+="&"+b+"="+H[b];return a}),B?(C="?id="+y,z+=".1",z+="."+u,B.stat&&(C+="&stat="+B.stat,x.addPropery("stat",B.stat)),B.eid&&(C+="&eid="+B.eid,x.addPropery("eid",B.eid)),fc&&(C+="&ocstat="+z,x.addPropery("ocstat",z)),D&&(x.addPropery("selector",D),C+="selector="+D),Fb=+Fb+1,x.addPropery("pvn",Fb),x.addPropery("ptif",A),C+="&pvn="+Fb,C+="&ptif="+A,H&&(x.addPropery("meta",H),C+=H.toString()),yb.sendTE(x.getJSONRet(),C,{sid:Ra,eventName:B.eid&&decodeURIComponent(B.eid).replace(/:(0|1):(0|1)$/," ").trim()})):fc&&(z+="."+(F?1:0),z+="."+u,x=new d(Ra,Sa,Db,Nb,Ob),x.addPropery("stat",z),D&&x.addPropery("selector",D),x.addPropery("ptif",A),x.addPropery("tl",ub.getTitle()),C="?id="+y+"&tl="+ub.getTitle()+"&stat="+z+(D?"&selector="+D:"")+"&ptif="+A,Ub=0,Vb=0,Wa=[0,0,""],H&&(x.addPropery("meta",H),C+=H.toString()),yb.sendPost(da,x.getJSONRet())||yb.sendMsgByScript(da+C))}function p(){for(var a,b,c=qb.getElementsByTagName("a"),d="",e=0;e<c.length;e++)(a=c[e].getAttribute("href"))&&(d=a.match(/[\#|\?|\&]_pt_link=[^#|^&]*/))&&(a=a.split(d),b=a[0]+(a[1]?a[1]:""),c[e].setAttribute("href",b))}function q(){if(wb.readCookies(),!wb.isActive())return void(dc=!1);if(!((new Date).getTime()-lb>na+ +ma&&(Ga&&p(),clearInterval(window._pt_hb_interval),ec=1,dc=!1,wb.writeCookies(),(Zb+5)*+ma<na))){Zb++;var b=ub.getYMax();Bb=rb.orientation==a||0==rb.orientation?1:-1,1==Bb&&b>Xb?Xb=b:1!=Bb&&b>Yb&&(Yb=b);var c=new d(Ra,Sa,Db,Nb,Ob);if(c.addPropery("stat",(1==Bb?ub.getScrollY():(ub.getScrollY()+1)*Bb)+"."+(1==Bb?Xb:-1*Yb)+"."+ub.getViewHeight()+"."+(1==ec?-1*na+1:ma)),c.addPropery("osd",L()),c.addPropery("ptif",Ab+""),c.addPropery("tl",ub.getTitle()),!yb.sendPost(fa,c.getJSONRet())){var e="?id="+Ra+"."+Sa+"."+Db+"."+Nb+"."+Ob+"&stat="+(1==Bb?ub.getScrollY():(ub.getScrollY()+1)*Bb)+"."+(1==Bb?Xb:-1*Yb)+"."+ub.getViewHeight()+"."+(1==ec?-1*na+1:ma)+"&tl="+ub.getTitle()+"&ptif="+Ab+"&osd="+L();yb.sendMsg(fa+e)}}}if(yb.valFunction("heatmap",window.edc7uo)&&(fc=!0),"cellant"==ua&&(2==Ab||3==Ab))return!1;if(Lb=ub.getPage(),Nb=vb.createID(Lb),window[Ya])return Sa=wb.getValueFromCookies("uid"),Kb=wb.getValueFromCookies("nid"),Db=wb.getValueFromCookies("vid"),Eb=wb.getValueFromCookies("vn"),Fb=wb.getValueFromCookies("pvn"),kb=wb.getValueFromCookies("sact"),ec=wb.getValueFromCookies("to_flag"),Pb=wb.getValueFromCookies("pl"),Ob=G(vb.createID(Sa+Db+Lb+$b+"v")),!1;if(Mb=Lb,xb.clearOtherCookie(),wb.readCookies(),Da=!(!wb.cookiesValue||!Da),Da&&(zb=ub.getRef(),preVID=wb.getValueFromCookies("vid")),function(){function a(a){function b(a,b,c){var d=new Date;d.setTime(d.getTime()-1e4),qb.cookie=a+"='';expires="+d.toGMTString()+";domain="+b+";path="+c+";",qb.cookie=a+"='';expires="+d.toGMTString()+";domain="+b+";path="+c+"/;"}b(a,"","");for(var c=tb.hostname.split("."),d=tb.pathname.split("/"),e=0;e<c.length;e++)for(var f=0;f<d.length;f++)b(a,c.slice(e).join("."),d.slice(0,parseInt(f)+1).join("/"))}for(var b=qb.cookie.split(";"),c=0;c<b.length;c++)if(b[c]=b[c].split("="),b[c][0].indexOf(tc)>-1)wb.cookiesValue=b[c].slice(1).join("="),a(b[c][0]);else if(b[c][0].indexOf(uc)>-1){var d=uc+"="+b[c].slice(1).join("=")+";domain="+ka+";path=/;";a(b[c][0])}d&&(qb.cookie=d)}(),vb.isNull(wb.cookiesValue)||!wb.checkCookiesValue())if(xb.setValue(uc,$b,{expires:""}),wb.cookiesValue="",Sa=vb.createID(ub.getUidStr()),Sa||(Sa=vb.createID((new Date).getTime()+""+Math.random())),Kb="1",Eb=0,_b){var r=_b.split(bb),s=r[1]&&r[1].split(".");Sa=s[0],Kb=s[1],Db=s[2],kb=s[3],Eb=s[4],Fb=s[5],Jb=r[0]?r[0].replace(/\*\_\*/g,".").replace(/\*\_wh\_\*/g,"?"):"",Cb="0"}else Cb=jc?"0":"1",Jb=zb.referrer;else if(b(Na)||c())if(_b){var r=_b.split(bb),s=r[1]&&r[1].split(".");Sa=s[0],Kb=s[1],Db=s[2],kb=s[3],Eb=s[4],Fb=s[5],Jb=r[0]?r[0].replace(/\*\_\*/g,".").replace(/\*\_wh\_\*/g,"?"):"",Cb="0"}else Sa=wb.getValueFromCookies("uid"),Sa||(Sa=vb.createID((new Date).getTime()+""+Math.random())),Kb=wb.getIsNID(),Eb=wb.getValueFromCookies("vn"),Cb=jc?"0":"1",Jb=zb.referrer;else if(Rb=xb.getValue(uc),cc=Qb?Rb?1:0:-1,_b){var r=_b.split(bb),s=r[1]&&r[1].split(".");Sa=s[0],Kb=s[1],Db=s[2],kb=s[3],Eb=s[4],Fb=s[5],Jb=r[0]?r[0].replace(/\*\_\*/g,".").replace(/\*\_wh\_\*/g,"?"):"",Pb="",Cb="0",xb.setValue(uc,$b,{expires:""})}else{Sa=wb.getValueFromCookies("uid"),Sa||(Sa=vb.createID((new Date).getTime()+""+Math.random())),Kb=wb.getIsNID(),1==wb.getIsRefresh($b)&&(zb={flag:0,referrer:""}),Cb=jc?"0":wb.getIsNV($b),"cellant"==ua&&Ka&&(Cb=jc?"0":"1"),"cellant"==ua&&cc&&!La&&(La=Rb.split("cad=")[1])&&(La=La.split("&")[0]),Eb=wb.getValueFromCookies("vn");var t=wb.getValueFromCookies("pvn");Fb="1"==Cb?0:t||1,Pb="1"==Cb?"":wb.getValueFromCookies("pl"),Jb="1"==Cb?zb.referrer:rb.localStorage&&"function"==typeof rb.localStorage.removeItem?rb.localStorage.getItem(Gb):"","1"==Cb&&xb.setValue(uc,$b,{expires:""})}if(bc&&/^\d+$/.test(bc)){for(var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-/",v=Sa.substr(1,2)+Sa.substr(5,1)+Sa.substr(8,1)+Sa.substr(10,1)+Sa.substr(13,1)+Sa.substr(15,1)+Sa.substr(19,1),x=0,y=0;x<8;){var z=v.charAt(7-x);y+=u.indexOf(z)*Math.pow(64,x),x++}if(y%bc!=0)return}jb=$b,kb=_b?kb:$b,lb=$b,Db=_b?Db:"1"==Cb?vb.createID(Sa+Lb+kb+"v"):wb.getValueFromCookies("vid"),Da&&preVID&&Db!=preVID&&(Db=preVID),Eb="1"==Cb?+Eb+1:0==+Eb?1:+Eb,Fb=+Fb+1,Ob=G(vb.createID(Sa+Db+Lb+jb+"v")),Pb=wb.plPrc(Nb),wb.writeCookies(),function(){if(ic||"7f21ceb9"==Ra)for(var a=qb.getElementsByTagName("iframe"),b=0;b<a.length;b++)a[b].onload=function(b){return function(c){this.contentWindow.document.onclick=function(c){var d=ub.getOffset(a[b]);Wa[0]=d.left,Wa[1]=d.top;var e="";try{e=yb.getCssPath(a[b])}catch(a){}Wa[2]=encodeURIComponent(e),Sb=ub.getMouseRC1(c),ub.getPageHeight()>0&&(Sb.x<=0||Sb.y<=0||Sb.x>+ub.getPageWidth()||Sb.y>+ub.getPageHeight())||(Tb=ub.getSrcElement(c),o())}}}(b)}();var C=-1!=window._pt_lt?(new Date).getTime()-window._pt_lt:0;C<0&&(C=0);var D=new d(Ra,Sa,Db,Nb,Ob);D.addPropery("stat",("1"==Cb?Eb:Fb)+"."+(1==Bb?ub.getScrollY():(ub.getScrollY()+1)*Bb)+"."+Wb*Bb+"."+ub.getViewHeight()+"."+C+"."+("1"==Cb?zb.flag:ub.getRefType(Jb))+("1"==Cb?"":"."+Eb)),D.addPropery("osd",L()),D.addPropery("ref",vb.encode(zb.referrer.replace(/&/g,"*&*").replace(/\+/g,"*+*"),!1)),"1"!=Cb&&D.addPropery("vref",vb.encode(Jb,!1)),D.addPropery("p",vb.encode(Lb.replace(/&/g,"*&*"),!1)),D.addPropery("tl",ub.getTitle()),La&&D.addPropery("cad",La),D.addPropery("ptif",Ab+ub.getSysInfo()),i(!0)&&D.addPropery("op",i(!0)),window[Ya]="2.0",window.ptengine&&(window.ptengine.__pteSid=Ra,window.ptengine.__ptePeid=Ob,window.ptengine.__getPteEventData=function(a){var b=[a];Fb=+Fb+1;var c=new yc(b),e=c.getCustomEventEid(),f=new d(Ra,Sa,Db,Nb,Ob);return f.addPropery("eid",e.eid),f.addPropery("ptif",Ab+""),f.addPropery("pvn",Fb),encodeURIComponent(f.getJSONRet())}),localStorage.setItem("PT_ID_"+Ra,Ra+"."+Sa+"."+Db+"."+Nb+"."+Ob),-1==tb.href.indexOf($a)&&wa&&function(){try{localStorage.setItem("PTSID",Ra)}catch(a){}}(),ob="?id="+Ra+"."+Sa+"."+Db+"."+Nb+"."+Ob+"&stat="+("1"==Cb?Eb:Fb)+"."+(1==Bb?ub.getScrollY():(ub.getScrollY()+1)*Bb)+"."+Wb*Bb+"."+ub.getViewHeight()+"."+C+"."+("1"==Cb?zb.flag:ub.getRefType(Jb))+("1"==Cb?"":"."+Eb)+"&ref="+vb.encode(zb.referrer.replace(/&/g,"*&*").replace(/\+/g,"*+*"),!1)+("1"!=Cb?"&vref="+vb.encode(Jb,!1):"")+"&p="+vb.encode(Lb.replace(/&/g,"*&*"),!1)+"&tl="+ub.getTitle()+(La?"&cad="+La:"")+"&ptif="+Ab+"&osd="+L(),ob+=ub.getSysInfo(),ob+=i();for(var F=0;F<Ua.length;F++)if("cookie"==Ua[F][2]){var H=xb.getValue(Ua[F][1]);H&&(ob+="&"+Ua[F][0]+"="+vb.encode(H,!1),D.addPropery(Ua[F][0],vb.encode(H,!1)))}else ob+="&"+Ua[F][0]+"="+vb.encode(Ua[F][1],!1),D.addPropery(Ua[F][0],vb.encode(Ua[F][1],!1));xa&&(ob+="&pvid="+encodeURIComponent(xa),D.addPropery("pvid",encodeURIComponent(xa))),Ca&&(ob+="&cd="+("halfManual"===Ca?1:0),D.addPropery("cd","halfManual"===Ca?1:0)),"1"==Cb?Ga&&"allManual"!=Ca&&""!=zb.referrer&&f(tb.href,zb)&&0==ub.getRefType(zb.referrer)&&!tb.href.match(/[\#|\?|\&]_pt_link=[^#|^&]*/)?(Nb=vb.createID(zb.referrer),Ob=vb.createID(Sa+Db+zb.referrer+jb+"v"),D=new d(Ra,Sa,Db,Nb,Ob),D.addPropery("stat",("1"==Cb?Eb:Fb)+"."+(1==Bb?ub.getScrollY():(ub.getScrollY()+1)*Bb)+"."+Wb*Bb+"."+ub.getViewHeight()+"."+C+".0"),D.addPropery("osd",L()),D.addPropery("ref",""),D.addPropery("p",vb.encode(zb.referrer.replace(/&/g,"*&*"),!1)),D.addPropery("tl",ub.getTitle()),La&&D.addPropery("cad",La),D.addPropery("ptif",Ab+ub.getSysInfo()),xa&&D.addPropery("pvid",encodeURIComponent(xa)),Ca&&D.addPropery("cd","halfManual"===Ca?1:0),yb.sendPost(ba,D.getJSONRet())||(ob="?id="+Ra+"."+Sa+"."+Db+"."+Nb+"."+Ob+"&stat="+("1"==Cb?Eb:Fb)+"."+(1==Bb?ub.getScrollY():(ub.getScrollY()+1)*Bb)+"."+Wb*Bb+"."+ub.getViewHeight()+"."+C+".0&ref=&p="+vb.encode(zb.referrer.replace(/&/g,"*&*"),!1)+"&tl="+ub.getTitle()+(La?"&cad="+La:"")+"&ptif="+Ab+"&osd="+L(),ob+=ub.getSysInfo(),xa&&(ob+="&pvid="+encodeURIComponent(xa)),Ca&&(ob+="&cd="+("halfManual"===Ca?1:0)),yb.sendMsg(ba+ob)),function(){Nb=vb.createID(Lb),Ob=vb.createID(Sa+Db+Lb+jb+"v"),Fb=+Fb+1,D=new d(Ra,Sa,Db,Nb,Ob),D.addPropery("stat",Fb+"."+(1==Bb?ub.getScrollY():(ub.getScrollY()+1)*Bb)+"."+Wb*Bb+"."+ub.getViewHeight()+"."+C+"."+ub.getRefType(Jb)+"."+Eb),D.addPropery("osd",L()),D.addPropery("ref",vb.encode(zb.referrer.replace(/&/g,"*&*").replace(/\+/g,"*+*"),!1)),D.addPropery("vref",""),D.addPropery("p",vb.encode(Lb.replace(/&/g,"*&*"),!1)),D.addPropery("tl",ub.getTitle()),La&&D.addPropery("cad",La),D.addPropery("ptif",Ab+ub.getSysInfo()),xa&&(ob+="&pvid="+encodeURIComponent(xa)),yb.sendPost(ca,D.getJSONRet())||(ob="?id="+Ra+"."+Sa+"."+Db+"."+Nb+"."+Ob+"&stat="+Fb+"."+(1==Bb?ub.getScrollY():(ub.getScrollY()+1)*Bb)+"."+Wb*Bb+"."+ub.getViewHeight()+"."+C+"."+ub.getRefType(Jb)+"."+Eb+"&ref="+vb.encode(zb.referrer.replace(/&/g,"*&*").replace(/\+/g,"*+*"),!1)+"&vref=&p="+vb.encode(Lb.replace(/&/g,"*&*"),!1)+"&tl="+ub.getTitle()+(La?"&cad="+La:"")+"&ptif="+Ab+"&osd="+L(),ob+=ub.getSysInfo(),xa&&(ob+="&pvid="+encodeURIComponent(xa)),yb.sendMsg(ca+ob))}()):yb.sendPost(ba,D.getJSONRet())||yb.sendMsg(ba+ob):yb.sendPost(ca,D.getJSONRet())||yb.sendMsg(ca+ob);var I="vt="+$b+"&cad="+La;xb.setValue(uc,I,{expires:""}),"1"==Cb&&rb.localStorage&&"function"==typeof rb.localStorage.removeItem&&(rb.localStorage.removeItem(Gb),rb.localStorage.setItem(Gb,Jb)),Ga&&("complete"==qb.readyState?j():A(rb,"load",function(){j()}));var J=function(){var a=[null,null],b=function(a,b){return"Chrome"!=ub.browerType||(b[0]!=a||b[1]!=rb)&&(b[0]!=rb||b[1]!=rb)};return A(rb,"focus",function(b){a[1]!=this&&(a.push(this),a.shift())}),A(rb,"click",function(b){if(a[1]!=this){var c=b.target||b.srcElement;a.push(c),a.shift()}}),function(){if(/windows|win32/i.test(pb.userAgent)&&/msie|trident|edge/i.test(pb.userAgent)||/(iPhone|iPad|iPod|iOS)/.test(pb.userAgent))ab="click";else for(var c=0;c<K.length;c++)for(var e=qb.getElementsByTagName(K[c]),f=0;f<e.length;f++)A(e[f],"focus",function(c){if(b(this,a)){Tb=ub.getSrcElement(c);var g=k(Tb),h=m(g);if(h){var i=new d(Ra,Sa,Db,Nb,Ob),j=Ra+"."+Sa+"."+Db+"."+Nb+"."+Ob,l=Ab+"",n="?id="+j,o="";h.stat&&(n+="&stat="+h.stat,i.addPropery("stat",h.stat)),h.eid&&(n+="&eid="+h.eid,i.addPropery("eid",h.eid),o=decodeURIComponent(h.eid)),Fb=+Fb+1,i.addPropery("pvn",Fb),i.addPropery("ptif",l),n+="&pvn="+Fb,n+="&ptif="+l,yb.sendTE(i.getJSONRet(),ga+n,{sid:Ra,eventName:o&&o.replace(/:(0|1):(0|1)$/," ").trim()})}}a.push(e[f]),a.shift()})}}(),K=["input","textarea","select","embed"];"interactive"===qb.readyState.toLowerCase()||"complete"===qb.readyState.toLowerCase()?(J(),!Qa&&e&&"function"==typeof e&&e(!0)):qb.onreadystatechange=function(){"interactive"!==qb.readyState.toLowerCase()&&"complete"!==qb.readyState.toLowerCase()||!Qa&&e&&"function"==typeof e&&e(!0),"complete"===qb.readyState.toLowerCase()&&J()},A(rb,"onorientationchange",function(b){Bb=rb.orientation==a||0==rb.orientation?1:-1}),A(qb,"touchmove",function(a){ac=!0}),A(qb,"touchstart",function(a){a=a||rb.event,Tb=ub.getSrcElement(a),Sb=ub.getMouseRC(a)}),function(){for(var a=0,b=Aa.length;a<b;a++)window[Xa].push("setCustomVarV2",Aa[a]);for(var a=0,b=za.length;a<b;a++)window[Xa].push("setUser",za[a]);for(var a=0,b=ya.length;a<b;a++)window[Xa].push("setEC",ya[a])}();var M,N=!1;A(qb,"click",function(a){a=a||rb.event,Sb=ub.getMouseRC1(a),ub.getPageHeight()>0&&(Sb.x<=0||Sb.y<=0||Sb.x>+ub.getPageWidth()||Sb.y>+ub.getPageHeight())||(Tb=ub.getSrcElement(a),N||o())}),A(rb,"Enter",function(a){var b=a.detail.getBoundingClientRect(),c={x:b.left+(b.right-b.left)/2,y:b.top+(b.bottom-b.top)/2},d=qb.body.scrollLeft||qb.documentElement.scrollLeft,e=qb.body.scrollTop||qb.documentElement.scrollTop;c.x=Math.round(d+c.x),c.y=Math.round(e+c.y),Sb=c,ub.getPageHeight()>0&&(c.x<=0||c.y<=0||c.x>+ub.getPageWidth()||c.y>+ub.getPageHeight())||(Tb=a.detail,N||o())}),A(qb,"touchend",function(a){if(ac)return void(ac=!1);Sb.x<=0||Sb.y<=0||0==Sb.x&&0==Sb.y||Sb.x<0||Sb.x>ub.getPageWidth()||Sb.y>ub.getPageHeight()||(o(),N=!0,M&&clearTimeout(M),M=setTimeout(function(){N=!1},500))});var O,P,Q=$b,S=0;if([rb].concat(U(sb)).forEach(function(b){b&&A(b,"scroll",function(b){function c(){var a=!0;return 0==qb.body.clientHeight?a=!1:g.getScrollY()<=1?a=!1:g.getScrollY()+1>=g.getElScrollHeight()&&(a=!1),a}function e(a,b,c){var d=a-b-c*ma;return(d<0||d>1.5*ma)&&(d=ma),d}function f(a){if(c()&&fc){var b=new d(Ra,Sa,Db,Nb,Ob);if(b.addPropery("stat",(1==Bb?g.getScrollY():(g.getScrollY()+1)*Bb)+"."+(1==Bb?Xb:-1*Yb)+"."+(g.getViewHeight()>1500?1500:g.getViewHeight())+"."+i),b.addPropery("osd",L()),b.addPropery("ptif",Ab+""),b.addPropery("tl",g.getTitle()),a&&b.addPropery("end",1),!yb.sendPost(ea,b.getJSONRet())){var e="?id="+Ra+"."+Sa+"."+Db+"."+Nb+"."+Ob+"&stat="+(1==Bb?g.getScrollY():(g.getScrollY()+1)*Bb)+"."+(1==Bb?Xb:-1*Yb)+"."+(g.getViewHeight()>1500?1500:g.getViewHeight())+"."+i+"&tl="+g.getTitle()+"&ptif="+Ab+a?"&end=1":"&osd="+L();yb.sendMsg(ea+e)}}}gb=!0;var g=new w(b.target.body||b.target),h=(new Date).getTime();O=h,S=O-Q;var i="";if(S<+pa)return Q=O,P&&clearTimeout(P),void(P=setTimeout(function(){i=e(h,lb,Zb),f(!0)},1e3));if(wb.readCookies(),1!=wb.getValueFromCookies("to_flag")&&wb.isActive())i=e(h,lb,Zb);else{if(1==wb.getValueFromCookies("to_flag")||+h-+wb.getValueFromCookies("sact")>+na)return n("pn"),void(fc&&(clearInterval(window._pt_hb_interval),window._pt_hb_interval=setInterval(function(){q()},ma),Zb=0));if(wb.isNewVisit(Db,h))return n("pv"),void(fc&&(clearInterval(window._pt_hb_interval),window._pt_hb_interval=setInterval(function(){q()},ma),Zb=0));dc=!0,i=qa}Pb=wb.plPrc(Nb),kb=h,lb=h,Fb=wb.getValueFromCookies("pvn"),fc&&(clearInterval(window._pt_hb_interval),window._pt_hb_interval=setInterval(function(){q()},ma),Zb=0),wb.writeCookies();var j=g.getYMax();Bb=rb.orientation==a||0==rb.orientation?1:-1,1==Bb&&j>Xb?Xb=j:1!=Bb&&j>Yb&&(Yb=j),f(),Q=O})}),window._pt_hb_interval=setInterval(function(){q()},ma),"onpopstate"in rb&&("57qglb9j"===Ra||"37f93wes"===Ra||"35a96cd9"===Ra||"47ar67p3"===Ra)){var T={preUrl:h()};B(rb,"popstate",g()),A(rb,"popstate",g("popstate",T)),B(rb,"pushState",g()),A(rb,"pushState",g("pushState",T)),B(rb,"replaceState",g()),A(rb,"replaceState",g("replaceState",T))}return!1}function g(a,b){return D(function(){var a=h();"beforeunload"!==history.state&&"back"!==history.state&&b.preUrl!==a&&(!fb&&window._pt_sp_2&&window._pt_sp_2.push("setPVTag,"+rb.location.href+",replace"),fb=!1,b.preUrl=a)},500)}function h(){return rb.location.protocol+"//"+rb.location.host+rb.location.pathname+rb.location.search}function i(a){var b="";if(gc)switch(hc){case"GoogleOptimize":window.gaData&&window.gaData.expId&&window.gaData.expVar&&(b+=gaData.expId+"|p||p|"+gaData.expVar+"|p||p|"+hc);break;case"OptimizelyX":if("object"==typeof window.optimizely&&"function"==typeof window.optimizely.get){var c=window.optimizely.get("state");if(c)for(var d=c.getActiveExperimentIds(),e=0;e<d.length;e++){var f=d[e],g=c.getExperimentStates({isActive:!0})[f].experimentName||"",h=c.getVariationMap()[f],i=h.id,j=h.name||"";b+=0==e?"":"|o|",b+=f+"|p|"+g.substr(0,100)+"|p|"+i+"|p|"+j.substr(0,100),b+="|p|"+hc}}break;case"Optimizely":default:if("object"==typeof optimizely){var k=optimizely.activeExperiments;if(k&&k.length>0)for(var e=0;e<k.length;e++)b+=0==e?"":"|o|",b+=k[e]+"|p|"+optimizely.data.experiments[k[e]].name.substr(0,100)+"|p|"+optimizely.variationIdsMap[k[e]][0]+"|p|"+optimizely.variationNamesMap[k[e]].substr(0,100),b+="|p|"+hc}}return a?b?vb.encode(b,!1):"":b?"&op="+vb.encode(b,!1):""}function j(){if(window.ptengine&&window.ptengine.__crossDomainProcessCallback)m();else for(var a=qb.getElementsByTagName("a"),b=0;b<a.length;b++){var c=a[b].getAttribute("href"),d=a[b].getAttribute("onclick"),e=a[b].getAttribute("data-pt-crossDomain"),f=c&&c.toLowerCase(),g=c&&c.match(/^https?:\/\//)&&c.length<900;if(("halfManual"==Ca||window.ptengine&&window.ptengine.__crossDomainEnable)&&g){for(var h=0;h<Fa.length;h++)if(f.indexOf(Fa[h])>-1&&(c.indexOf(tb.hostname)<0||c.indexOf(tb.hostname)>f.indexOf(Fa[h]))){a[b].setAttribute("href",k(c));break}}else if((d&&d.indexOf("pt_domain")>-1||null!==e)&&g)for(var h=0;h<Fa.length;h++)if(f.indexOf(Fa[h])>-1&&(c.indexOf(tb.hostname)<0||c.indexOf(tb.hostname)>f.indexOf(Fa[h]))){a[b].setAttribute("href",k(c));break}}}function k(a){var b=a.split("#"),c=l(),d=window.ptengine&&window.ptengine.__crossDomainType||"HASH";if(c)if(1==b.length&&"HASH"===(d+"").toLocaleUpperCase())a+="#_pt_link="+c;else if("allManual"==Ca||"halfManual"==Ca||window.ptengine&&window.ptengine.__crossDomainEnable){var e=b[1]?"#"+b[1]:"";a=b[0]+(-1==a.indexOf("?")?"?":"&")+"_pt_link="+c+e}return a}function l(){var a="";return wb.readCookies(),wb.cookiesValue&&(a=(rb.localStorage&&"function"==typeof rb.localStorage.getItem&&rb.localStorage.getItem(Gb)?rb.localStorage.getItem(Gb).replace(/\./g,"*_*").replace(/\?/g,"*_wh_*"):"")+bb+wb.getValueFromCookies("uid")+"."+wb.getValueFromCookies("nid")+"."+wb.getValueFromCookies("vid")+"."+wb.getValueFromCookies("sact")+"."+wb.getValueFromCookies("vn")+"."+wb.getValueFromCookies("pvn")),a}function m(){var a=l(),b=a&&a.split(bb);window.ptengine.__crossDomainProcessCallback("pte",b[1],b[0],Ca)}function n(a,b,c){var f=c||Nb,g=b||Lb,h=new Date,k=h.getTime();if(!("vpv"!=a&&k-lb<1e4)){wb.readCookies(),Wb=ub.getYMax(),ec=0,dc=1,jb=k,kb=k,lb=k,"pn"==a?(Cb=jc?"0":"1",Eb=wb.getValueFromCookies("vn"),Kb=wb.getIsNID(),Pb="",Db=vb.createID(Sa+g+kb+"v"),Eb=+Eb+1,Fb=1):(Pb=wb.getValueFromCookies("pl"),Db=wb.getValueFromCookies("vid"),Fb=wb.getValueFromCookies("pvn"),Fb=Fb?+Fb+1:1),Ob=vb.createID(Sa+Db+g+jb+"v"),Pb=wb.plPrc(Nb),wb.writeCookies();var l=new d(Ra,Sa,Db,f,Ob);l.addPropery("stat",("pn"==a?0==+Eb?1:+Eb:Fb)+"."+(1==Bb?ub.getScrollY():(ub.getScrollY()+1)*Bb)+"."+Wb*Bb+"."+ub.getViewHeight()+".0.0"+("pn"==a?"":"."+Eb)),l.addPropery("osd",L()),l.addPropery("ref",""),"pn"==a&&l.addPropery("vref",vb.encode(Jb,!1)),l.addPropery("p",vb.encode(g.replace(/&/g,"*&*"),!1)),l.addPropery("tl",ub.getTitle()),La&&l.addPropery("cad",La),l.addPropery("ptif",Ab+ub.getSysInfo()),i(!0)&&l.addPropery("op",i(!0)),ob="?id="+Ra+"."+Sa+"."+Db+"."+f+"."+Ob+"&stat="+("pn"==a?0==+Eb?1:+Eb:Fb)+"."+(1==Bb?ub.getScrollY():(ub.getScrollY()+1)*Bb)+"."+Wb*Bb+"."+ub.getViewHeight()+".0.0"+("pn"==a?"":"."+Eb)+"&ref="+("pn"==a?"":"&vref="+vb.encode(Jb,!1))+"&p="+vb.encode(g.replace(/&/g,"*&*"),!1)+"&tl="+ub.getTitle()+(La?"&cad="+La:"")+"&ptif="+Ab+"&osd="+L(),ob+=ub.getSysInfo(),ob+=i();for(var m=0;m<Ua.length;m++)if("cookie"==Ua[m][2]){var n=xb.getValue(Ua[m][1]);n&&(ob+="&"+Ua[m][0]+"="+vb.encode(n,!1),l.addPropery(Ua[m][0],vb.encode(n,!1)))}else ob+="&"+Ua[m][0]+"="+vb.encode(Ua[m][1],!1);xa&&(ob+="&pvid="+encodeURIComponent(xa),l.addPropery("pvid",encodeURIComponent(xa))),yb.sendPost("pn"==a?ba:ca,l.getJSONRet())||yb.sendMsg(("pn"==a?ba:ca)+ob),ec=0,Ga&&"vpv"!=a&&j(),"vpv"===a&&(fb=!0),setTimeout(function(){Qa?Qa.init():e&&"function"==typeof e&&e()},500)}}function o(a){if(a.length>0)for(var b=0,c=a.length;b<c;b++){if(a[b]&&"object"==typeof a[b]){var d=a[b-1];if(d){switch(d){case"setUser":za.push(a[b]);break;case"setPageViewVar":xa=a[b].data?JSON.stringify(a[b].data):"";break;case"setEC":ya.push(a[b]);break;case"setCustomVarV2":Aa.push(a[b])}a[b]=null;continue}}var e=a[b].indexOf(",");if(!p(a[b].slice(0,e),a[b].slice(e+1)))return!1}return!0}function p(a,b){if(!b)return!1;switch(a){case"setOuterIframeEnabled":va="1"==b;break;case"setEngageEnabled":wa="1"==b;break;case"setServer":$=b?+b:0,aa="6c75a350"==Ra?_+"rtcollect.ptengine.jp":_+Z[$],ba=aa+"/pn",ca=aa+"/pv",da=aa+"/oc",ea=aa+"/os",fa=aa+"/hb",ga=aa+"/te";break;case"setAdParam":ua="cellant",b=b.replace(/^\|*/,"").replace(/\|*$/,""),Ma=b?b.split("|"):"";break;case"setCamParam":Na=b.split(",");break;case"setURL":Ha=b;break;case"setIgnoreCampaign":Oa="true"==b.toLowerCase();break;case"setVPV":Ia=b.toLowerCase().split(",")[0];break;case"setVPT":Ja=b;break;case"setAccount":case"setSID":Ra=b.toLowerCase();break;case"isTestWeb":"true"==b&&""!=Ra&&(eb[Ra]=!0);break;case"useHttpCookie":Ta="false"!=b.toLowerCase();break;case"setDomain":return function(){ka="";var a=b.split(",");Ga=a.length>1,a.sort(function(a,b){return a.replace(/^https?:\/\//,"").length>b.replace(/^https?:\/\//,"").length?1:-1});for(var c=0;c<a.length;c++)Fa.push(a[c].replace(/^https?:\/\//,"")),a[c].match(/https?:\/\//)&&a[c].match(/https?:\/\//)[0]!=location.protocol+"//"||location.hostname.indexOf(a[c].replace(/^https?:\/\//,""))>-1&&(ka=a[c].replace(/^https?:\/\//,""));return"default"!=b&&"http"==location.href.slice(0,4)||(ka=location.href.toLowerCase().split("://")[1].split("?")[0].split("/")[0],Fa.push(ka)),window.ptConfig&&window.ptConfig.crossAnyDomain&&!ka&&(ka=J(location.hostname),Fa.push(ka)),!0}();case"setAutoEvent":2==b.split(",").length&&(Va[b.split(",")[0]]=b.split(",")[1]);break;case"setEventReport":Pa="true"==b;break;case"setAutoFetchMatch":q(b)}return W(a),!0}function q(a){var b=a.split(","),c=b[0],d=b[1],e=b[2],f=null;setTimeout(function(){if(c)switch(c){case"URL":d&&(f=r(e,d))}if(f)try{sessionStorage.getItem(a)||(sessionStorage.setItem(a,"1"),_pt_sp_2.push("setUser",{accountid:f}))}catch(a){}},0)}function r(a,b){var c=new RegExp("(^|&)"+a+"=([^&]*)(&|$)","i"),d=tb.search.substr(1),e=null;if(null!=(e=d.match(c)))return decodeURIComponent(e[2]);c=new RegExp("(^|/)"+a+"/([^/]*)(/|$)","i");for(var f=["pathname","hash"],g=0,h=f.length;g<h;g++)if(d=tb[f[g]].substr(1),null!=(e=d.match(c)))return decodeURIComponent(e[2]);return null}function s(a){var b=null;this.init=function(){if(!b)try{b=qb.createElement("input"),b.type="hidden",b.addBehavior("#default#userData"),C(b)}catch(a){return!1}return!0},this.isEnabled=function(){return!0},this.clearOtherCookie=function(){var a=new u;a.getValue(tc)&&(a.setValue(tc,"",{expires:""}),a.setValue(vc,"",{expires:""}))},this.setValue=function(c,d,e){if(c==uc)return void a.setValue(c,d,e);try{if(this.init()){var f=b;f.load(c),d&&f.setAttribute("code",d);var g=new Date;g.setDate(g.getDate()+30),f.expires=g.toUTCString(),f.save(c)}}catch(a){}},this.getValue=function(c){if(c==uc)return a.getValue(c);if(this.init())try{var d=b;return d.load(c),d.getAttribute("code")}catch(a){return null}}}function t(){this.isEnabled=function(){return rb.localStorage&&"function"==typeof rb.localStorage.removeItem},this.clearOtherCookie=function(){var a=new u;a.getValue(tc)&&(a.setValue(tc,"",{expires:""}),a.setValue(vc,"",{expires:""}))},this.getValue=function(a){return rb.sessionStorage.getItem(a)||rb.localStorage.getItem(a)},this.setValue=function(a,b,c){""==c.expires?(rb.sessionStorage.setItem(a,b),rb.localStorage.removeItem(a)):rb.localStorage.setItem(a,b)}}function u(){this.isEnabled=function(){return pb.cookieEnabled},this.clearOtherCookie=function(){},this.getValue=function(a){var b="";if(this.isEnabled()||(Qb=!1),qb.cookie&&""!=qb.cookie)for(var c=qb.cookie.split(";"),d=0;d<c.length;d++){var e=vb.trim(c[d]);if(e.substring(0,a.length+1)==a+"="&&(a!=tc||a==tc&&e.indexOf("pt1pt")<0&&e.indexOf("pt0pt")<0)){b=e.substring(a.length+1);break}}return b},this.setValue=function(a,b,c){if(!this.isEnabled())return void(Qb=!1);var d="";if(c.expires&&("number"==typeof c.expires||c.expires.toUTCString)){var e;"number"==typeof c.expires?(e=new Date,e.setTime(e.getTime()+24*c.expires*60*60*1e3)):e=c.expires,d="; expires="+e.toUTCString()}qb.cookie=a+"="+b+d+"; path=/; domain="+ka}}function v(){var a=!1;if(this.localDataType="",!Ta&&pb.userAgent.toLowerCase().match(/msie\s([2-8]+?\.[\d]+)/gi))this.localDataType=new s(new u);else if(!Ta&&rb.localStorage&&rb.sessionStorage&&"function"==typeof rb.localStorage.removeItem&&"function"==typeof rb.sessionStorage.removeItem){var b="pt_test";if(rb.sessionStorage.setItem(b+"sk",b+"sv"),rb.localStorage.setItem(b+"lk",b+"lv"),rb.sessionStorage.getItem(b+"sk")==b+"sv"&&rb.localStorage.getItem(b+"lk")==b+"lv")this.localDataType=new t;else var a=!0;rb.sessionStorage.removeItem(b+"sk"),rb.localStorage.removeItem(b+"lk")}else if(Ta)this.localDataType=new u;else var a=!0;a?(this.clearOtherCookie=function(){},this.isEnabled=function(){return!1},this.setValue=function(a,b,c){},this.getValue=function(a){return""}):(this.clearOtherCookie=function(){this.localDataType.clearOtherCookie()},this.isEnabled=function(){return this.localDataType.isEnabled()},this.setValue=function(a,b,c){this.localDataType.setValue(a,b,c)},this.getValue=function(a){return this.localDataType.getValue(a)})}function w(b){this.getSysInfo=function(){var a=[];return 1==this.getTerminalType()||4==this.getTerminalType()?(a.push("."+[this.getViewWidth(),this.getScreenHeight()].sort()[0]),a.push("."+[this.getViewWidth(),this.getScreenHeight()].sort()[1])):(a.push("."+this.getScreenWidth()),a.push("."+this.getScreenHeight())),a.push("."+(rb.screen.colorDepth||0)),a.push("."+this.getTimezone().replace(/\./g,"_")),a.push("."+(pb.platform||"").replace(/\./g,"_").toLowerCase()),a.push("."+(pb.language||pb.browserLanguage||"").replace(/\./g,"_").toLowerCase()),a.push("."+(qb.characterSet||qb.charset||"").replace(/\./g,"_").toLowerCase()),a.join("")},this.getUidStr=function(){try{var a=[this.getSysInfo()];a.push("&ua="+vb.encode(pb.userAgent||"",!1)),a.push("&bw="+(b.clientWidth||qb.body.clientWidth||0)),a.push("&bh="+ub.getBrowserHeight()),a.push("&pi="+ub.getPlugins()),a.push("&ts="+Ib);var c=a.join("");return c||(c=(new Date).getTime()+""+Math.random()),c}catch(a){return(new Date).getTime()+""+Math.random()}},this.getTitle=function(){try{var a=qb.getElementsByTagName("title")[0]&&qb.getElementsByTagName("title")[0].innerHTML||qb.title;return a=vb.trim(a.split("#")[0]),Ja&&(a=Ja),vb.encode(a,!1)}catch(a){return""}},this.getRefType=function(a){if(a){for(var b=a.split("?")[0].toLowerCase(),c=0;c<Fa.length;c++){var d=b.split("://")[0];if(!Fa[c].match(/^https?:\/\/.*/)&&b.indexOf(Fa[c])>-1)return 0;if(d==Fa[c].split("://")[0]&&b.indexOf(Fa[c].split("://")[1])>-1)return 0}return 1}return 0},this.getRef=function(){try{var a={flag:0,referrer:""},b=qb.referrer;if(b||Da&&Ea){Da&&(b=Ea||"*"+b+"*");var c=b.match(/^(\S+:\/\/)?([^\/|\?|\#]+)(\S*)/);if(a.referrer=c[1].toLowerCase()+c[2].toLowerCase()+c[3],a.referrer){a.referrer=a.referrer.split("#")[0].replace(/(^\s*)/g,"").replace(/(\s*$)/g,""),a.referrer.indexOf("?_randomTest")>-1&&(a.referrer=a.referrer.split("?_randomTest")[0]),"7f21ceb9"!=Ra&&"2f120b77"!=Ra&&(a.referrer=a.referrer.replace(/\/*$/,""));for(var d=a.referrer.split("?")[0].toLowerCase(),e=0;e<Fa.length;e++){var f=d.split("://")[0];if(!Fa[e].match(/^https?:\/\/.*/)&&d.indexOf(Fa[e])>-1)return a;if(f==Fa[e].split("://")[0]&&d.indexOf(Fa[e].split("://")[1])>-1)return a}Da||(a.flag=1)}}return a}catch(b){return a}},this.getPlugins=function(){var a="",b=pb.plugins;if(0!=b.length){for(var c=new Array,d=0;d<b.length;d++){c[d]=b[d].name+";"+b[d].description+";"+b[d].filename+";";for(var e=0;e<b[d].length;e++)c[d]+="("+b[d][e].description+";"+b[d][e].type+";"+b[d][e].suffixes+")";c[d]+="."}a=c.sort().join("")}return a},this.setURLMerger=function(a){function b(a,b){var c=b.match(/^https?:\/\//);return c?0==a.indexOf(c[0])&&a.indexOf(b.substring(c[0].length))>-1:a.indexOf(b)>-1}for(var c=/*window.allPageInfo*/[['https://muji.com', true, false, false, 'index.html', false]]||[],d=a,e=0;e<c.length;e++)if(b(a,c[e][0])){c[e][1]&&(d=d.replace(/\#[^#|\$|\?]*/g,"")),c[e][2]&&(d=d.replace(/^(http:\/\/|https:\/\/)?www./,"$1")),c[e][3]&&(d=d.replace(new RegExp("([^#|$|?]*)"+c[e][4]+"(S*)"),"$1$2")),Ba="tmpUrlAPI"==Ba?"tmpUrlAPI":0!=c[e][5];break}return d},this.getPage=function(){var a,b=[],c="",d=(tb.protocol+"//"+tb.host).toLowerCase()+tb.pathname+tb.search+tb.hash;if(!d)return"";if(Fa.length>1){var e=new RegExp(/(\?|\&|\#)_pt_link=([^\&|\#]*)(\&|\#)?/);d.match(e)&&(_b=d.match(e)[2],d="&"==d.match(e)[3]?d.replace(e,"$1"):d.replace(e,"$3"))}switch(d=d.replace(/\?_randomTest=\S*/,""),Ia&&(d=Ia),ua){case"cellant":if(Ma){d=d.split("#")[0];var f="";for(a=0;a<Ma.length;a++)f="",d.indexOf("?"+Ma[a]+"=")>-1?f="?":d.indexOf("&"+Ma[a]+"=")>-1&&(f="&"),f&&(Ka=!0,La&&(La+=","),b=d.split(f+Ma[a]+"="),c=b[1]?b[1].split("&")[0]:"",La+=Ma[a]+":"+c,d=b[0]+f+b[1].slice(c.length+1));d=d.replace(/\?*$/,"").replace(/\&*$/,"")}break;case"oisix":case"oisix_hk":case"oisix_gochimaru":var g=[];"oisix"==ua?g=["utm_referrer","utm_source","utm_medium","utm_term","utm_content","utm_campaign","sessionid","urlserverid","SESSIONISNEW","k","tk","KAKUNINJIKAN","screenmode","OVRAW","OVKEY","OVMTC","OVADID","OVKWID","OVCAMPGID","OVADGRPID","SESSIONISNEW","jid","KENSAKUMOZIFLG","KENSAKUMOZIJOUKEN","searchValue","param","faqSearchKeyword","startNum","maxDisplayNum","detail","mi2","roadid","cart","ref","utm_expid"]:"oisix_hk"==ua?g=["lcs_id","tsuka_conv","offset","a","x","y","mi2"]:"oisix_gochimaru"==ua&&(g=["vos","utm_referrer","utm_source","utm_medium","utm_term","utm_content","utm_campaign","sessionid","urlserverid","SESSIONISNEW","k","tk","KAKUNINJIKAN","screenmode","OVRAW","OVKEY","OVMTC","OVADID","OVKWID","OVCAMPGID","OVADGRPID","SESSIONISNEW","jid","KENSAKUMOZIFLG","KENSAKUMOZIJOUKEN","searchValue","param","faqSearchKeyword","startNum","maxDisplayNum","detail","mi2","roadid","cart","ref","utm_expid"]);var f="";for(a=0;a<g.length;a++)f="",d.indexOf("?"+g[a]+"=")>-1?f="?":d.indexOf("&"+g[a]+"=")>-1&&(f="&"),f&&(b=d.split(f+g[a]+"="),c=b[1]?b[1].split("&")[0]:"",d=b[0]+f+b[1].slice(c.length+1));d=d.replace(/\?*$/,"").replace(/\&*$/,"")}return Ha&&(d+="#"+Ha),d},this.isPCByPlat=function(){var a=pb.platform.toLowerCase();if(a.indexOf("win")>-1)return!0;for(var b=["mac68k","macppc","macintosh","macintel"],c=0;c<b.length;c++)if(a==b[c])return!0;return!1},this.isPCByOSList=function(a){for(var b=["AIX","Amiga","BeOS","DragonFly","FreeBSD","GNU","Haiku","HP-UX","IRIX","Joli","Java","Macintosh","Minix","MorphOS","NetBSD","OpenBSD","PClinuxOS","QNX x86pc","SunOS","Ubuntu","Mint","Red Hat","Slackware","SUSE","PCLinuxOS","Debian","Fedora","CentOS","Vine","Arch Linux","Gentoo","Kanotix","Mandriva"],c=0;c<b.length;c++)if(a.indexOf(b[c])>-1)return!0;return!1},this.isMobileByOSList=function(a){for(var b=["Android","AROS","Bada","BlackBerry","Chromium","CrOS","Danger Hiptop","Inferno","iPhone","iPad","iPod","Nintendo DS","Nintendo Wii","Palm OS","PLAYSTATION","Syllable","SymbOS","Symbian","Tizen","webOS","WebTV","Windows CE","Windows Mobile","Windows Phone","Xbox"],c=0;c<b.length;c++)if(a.indexOf(b[c])>-1)return!0;return!1},this.getTerminalType=function(){try{var a=pb.userAgent;return a?this.isPCByPlat()||this.isPCByOSList(a)?this.isMobileByOSList(a)?3:a.match(/.*MSIE.*Windows NT 6\.2;.*Touch\).*/)?4:2:a.indexOf("iPad")>-1||Math.min(ub.getScreenWidth(),rb.screen.height)>=1e3?4:1:0}catch(a){return 0}},this.getScreenWidth=function(){try{var a=rb.screen.width;return a?isNaN(parseInt(a,10))?0:parseInt(a,10):0}catch(a){return 0}},this.getScreenHeight=function(){try{var a=rb.screen.height;return(1==this.getTerminalType()&&a>2e3||4==this.getTerminalType()&&a>3e3)&&(a=this.getViewHeight()),a?isNaN(parseInt(a,10))?0:parseInt(a,10):0}catch(a){return 0}},this.getBrowserHeight=function(){try{var a=rb.innerHeight||qb.documentElement.clientHeight||qb.body.clientHeight;return["79574faf","42a5e638"].join(",").indexOf(Ra)>-1&&(a=rb.innerHeight||qb.body.clientHeight||qb.documentElement.clientHeight),a?isNaN(parseInt(a,10))?0:parseInt(a,10):0}catch(a){return 0}},this.getScrollY=function(){var a=0;try{a=b.scrollTop||rb.pageYOffset,a=isNaN(a)?0:a}catch(b){a=0}return parseInt(a,10)},this.getYMax=function(){var a=+this.getScrollY()+ +this.getBrowserHeight();return a=isNaN(a)?0:parseInt(a,10)},this.getScrollX=function(){var a=b.scrollLeft||rb.pageXOffset;return a=isNaN(a)?0:a,parseInt(a,10)},this.getTimezone=function(){try{var a=(new Date).getTimezoneOffset();return a||0==a?"GMT"+(a<=0?"+":"")+a/60*-1:""}catch(a){return""}},this.getSrcElement=function(a){return(a.composed?a.composedPath()[0]:a.target)||rb.event.srcElement},this.getOffset=function(c){var d={top:0,left:0};if(typeof c.getBoundingClientRect!=typeof a){var e=b,f=c.getBoundingClientRect();d={top:f.top+(rb.pageYOffset||e.scrollTop)-(e.clientTop||0),left:f.left+(rb.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}}else{if(d.top+=c.offsetTop,d.left+=c.offsetLeft,c.offsetParent){var g=this.getOffset(c.offsetParent);d.top+=g.top,d.left+=g.left}d.top<0&&(d.top=0),d.left<0&&(d.left=0),d.top=isNaN(d.top)?0:parseInt(d.top,10),d.left=isNaN(d.left)?0:parseInt(d.left,10)}return d.top=Math.round(d.top),d.left=Math.round(d.left),d},this.getMouseRC=function(a){var b={x:0,y:0};try{switch(b.x=a.touches[0].pageX?a.touches[0].pageX:a.clientX,b.y=a.touches[0].pageY?a.touches[0].pageY:a.clientY,Ra){case"7ba4a69b":a.touches[0].clientY<=110&&(b.y=a.touches[0].clientY)}b.x||(b.x=0),b.y||(b.y=0)}catch(a){}return b.x=isNaN(b.x)?0:parseInt(b.x,10),b.y=isNaN(b.y)?0:parseInt(b.y,10),b},this.getMouseRC1=function(a){var b=parseInt(+a.clientX+ +this.getScrollX(),10),c=parseInt(+a.clientY+ +this.getScrollY(),10);return b=isNaN(b)?0:b,c=isNaN(c)?0:c,{x:b,y:c}},this.getPageWidth=function(){var a=parseInt(qb.body.scrollWidth,10);return a=isNaN(a)?0:a},this.getPageHeight=function(){var a=parseInt(qb.body.scrollHeight,10);return a=isNaN(a)?0:a},this.getElScrollHeight=function(){var a=parseInt(b.scrollHeight,10);return a=isNaN(a)?0:a},this.getViewWidth=function(){var a=self.innerWidth||qb.body.clientWidth;return a=isNaN(a)?0:parseInt(a,10)},this.getViewHeight=function(){try{var a=self.innerHeight||qb.body.clientHeight;return a=isNaN(a)?0:parseInt(a,10)}catch(a){return 0}},this.getInitialScale=function(){try{var a=qb.getElementsByName("viewport")[0].content;return a?a.match("initial-scale=\\d.\\d+").toString().split("=")[1]:1}catch(a){return 1}};var c=this.browerType=function(){var b=pb.userAgent,c=window.ActiveXObject!=a&&-1!=b.indexOf("MSIE"),d=-1!=b.indexOf("Firefox"),e=window.opr!=a,f=-1!=b.indexOf("Chrome")&&window.chrome,g=-1!=b.indexOf("Safari")&&-1!=b.indexOf("Version");return c?"IE":d?"Firefox":e?"Opera":f?"Chrome":g?"Safari":"Unkown"}();this.urlLengthLimit=function(){return{IE:2083,Firefox:65536,Chrome:8182,Safari:8e4,Opera:19e4,Unkown:2083}[c]}()}function x(){this.valFunction=function(a,b){var c="";try{switch(a){case"heatmap":if(-1==b)return!0;if(b){for(var d=ub.setURLMerger(tb.href).replace(/\/*$/,""),e=d.split("?")[0].replace(/\/*$/,"")==d?d.split("#")[0].replace(/\/*$/,"")==d?null:d.split("#")[0].replace(/\/*$/,""):d.split("?")[0].replace(/\/*$/,""),f=0;f<b.length;f++)if(c=b[f],c&&(c=ub.setURLMerger(c).replace(/\/*$/,""),c=c.split("?")[0].replace(/\/*$/,"")==c?c.split("#")[0].replace(/\/*$/,"")==c?c:c.split("#")[0].replace(/\/*$/,""):c.split("?")[0].replace(/\/*$/,"")),d==c||e==c)return!0;return!1}return!1}}catch(a){}},this.sendMsgByScript=function(){function a(a){var b=a+"&v="+X+"&ts="+(new Date).getTime();if(b.length>ub.urlLengthLimit)return void("undefined"!=typeof console&&console.warn("The requested URL's length can't large than "+ub.urlLengthLimit));var c=qb.createElement("script");c.setAttribute("src",b),qb.getElementsByTagName("head")[0].appendChild(c)}return function(b){Fb>99||("53942d99"==Ra&&(b=b.replace(/^http:/,"https:")),a(b),eb[Ra]&&(b=b.replace(Ra,eb[Ra]).replace(/testcollect.ptengine.jp/,"collect.ptengine.jp"),a(b)))}}(),this.sendMsg=function(a){if(!(Fb>99)){"53942d99"==Ra&&(a=a.replace(/^http:/,"https:"));var b=a+"&v="+X+"&ts="+(new Date).getTime();if(b.length>ub.urlLengthLimit)return void("undefined"!=typeof console&&console.warn("The requested URL's length can't large than "+ub.urlLengthLimit));(new Image).src=b,eb[Ra]&&((new Image).src=a.replace(Ra,eb[Ra]).replace(/testcollect.ptengine.jp/,"collect.ptengine.jp")+"&v="+X+"&ts="+(new Date).getTime())}},this.createCORSRequest=function(a,b){var c=new rb.XMLHttpRequest;return"withCredentials"in c?c.open(a,b,!0):"undefined"!=typeof XDomainRequest?(c=new rb.XDomainRequest,c.open(a,b)):c=null,c},this.sendPost=function(a,b){var a=a,c=this.createCORSRequest("POST",a);return!(!c||!b)&&(c.send(encodeURIComponent(b)),!0)},this.sendTE=function(b,c,d,e){var f=!1;window.ptConfig&&window.ptConfig.isExcess!==a&&(f=window.ptConfig.isExcess),!e&&!f&&window.ptengine&&window.ptengine.__PTXEnabled&&window.ptengine.__sid&&d&&d.eventName&&d.sid===window.ptengine.__sid?this.sendPtxEvent(b,c,d):yb.sendPost(ga,b)||yb.sendMsgByScript(ga+c)},this.sendPtxEvent=function(a,b,c){var d=function(){window.ptengine.track(decodeURIComponent(c.eventName),c.properties,{teData:encodeURIComponent(a),sendToPte:!1,transport:"xhr"})},e=function(){return window.ptengine&&window.ptengine.track&&"function"==typeof window.ptengine.track};if(e)d();else var f=0,g=setInterval(function(){f+=50;var h=e();(h||f>200)&&(clearInterval(g),h?d():sendTE(a.getJSONRet(),b,c,!0))},50)},this.getCssPath=function(a){var b=a.nodeName.toLowerCase();if("body"==b||"html"==b)return"body";var c=a.parentNode;if(N(c))return this.getCssPath(Q(c))+">shadowRoot";if(a.getAttribute("id"))return this.getCssPath(c)+">#"+a.getAttribute("id");if(("input"==b||"select"==b||"textarea"==b||"button"==b)&&a.getAttribute("name")){var d=c.querySelectorAll(b+"[name='"+a.getAttribute("name")+"']");if(d.length>1){for(var e=0;e<d.length;e++)if(d[e]==a)return this.getCssPath(c)+">"+b+":input[name='"+a.getAttribute("name")+"']:eq("+e+")"}else if(1==d.length)return this.getCssPath(c)+">"+b+":input[name='"+a.getAttribute("name")+"']"}for(var f=[],e=0;e<c.children.length;e++){var g=c.children[e];g.nodeName&&g.nodeName.toLowerCase()==b&&f.push(g)}for(var e=0;e<f.length;e++)if(f[e]==a)return this.getCssPath(c)+">"+b+":eq("+e+")"},this.getCssPathOld=function(a){var b=a.nodeName.toLowerCase();if("body"==b||"html"==b)return"body";if(a.getAttribute("id"))return"#"+a.getAttribute("id");var c=a.parentNode,d=0;if(N(c))return this.getCssPathOld(Q(c))+">shadowRoot";for(;b==c.nodeName.toLowerCase()&&!c.getAttribute("id");)c=c.parentNode;for(var e=c.getElementsByTagName(b);1==e.length&&!c.getAttribute("id")&&"body"!=c.nodeName.toLowerCase();)c=c.parentNode,e=c.getElementsByTagName(b);for(var f=0;f<e.length;f++)if(e[f]==a){if(("input"==b||"select"==b||"textarea"==b||"button"==b)&&a.getAttribute("name")){var g=c.querySelectorAll(b+"[name='"+a.getAttribute("name")+"']");if(g.length>1){for(var f=0;f<g.length;f++)if(g[f]==a)return this.getCssPathOld(c)+">"+b+":input[name='"+a.getAttribute("name")+"']:eq("+f+")"}else if(1==g.length)return this.getCssPathOld(c)+">"+b+":input[name='"+a.getAttribute("name")+"']"}return this.getCssPathOld(c)+" "+b+":eq("+(f-d)+")"}},this.parentA=function(a){for(;"body"!=a.nodeName.toLowerCase();){if("a"==a.nodeName.toLowerCase())return a;a=R(a)}return!1},this.getElementType=function(a){function b(a){if(!a||!a.nodeName)return!1;var c=a.nodeName.toLowerCase();if("body"===c||"html"===c)return!1;var d=a.type;return"input"===c&&("submit"===d||"image"===d||"button"===d)||a.onclick||-1!==["a","button"].indexOf(c)||b(R(a))}var c=M(a),d=a&&a.nodeName&&a.nodeName.toLowerCase(),e=0;return e="a"===d||"input"===d||"select"===d||"embed"===d||"object"===d||"textarea"===d||"button"===d||a.onclick||0!==c?1:0==a.childNodes.length||1==a.childNodes.length&&1!=a.childNodes[0].nodeType?2:0,{elementType:e,interactionType:b(a)||2===c?1:0}},this.isFloatElement=function(a){return!!a&&(N(a)?this.isFloatElement(Q(a)):"fixed"===getComputedStyle(a).position||this.isFloatElement(a.parentElement))}}function y(){this.cookiesValue="",this.writeCookies=function(){Qb&&(this.cookiesValue=this.createCookiesValue(),xb.setValue(tc,this.cookiesValue,{expires:la})),this.readCookies()},this.readCookies=function(){Qb&&(this.cookiesValue=xb.getValue(tc))},this.getIsRefresh=function(a){return this.cookiesValue.indexOf(Nb)>-1&&!vb.timeCompare_M(this.getValueFromCookies("sact"),a,ra)?1:0},this.getIsNV=function(a){return 0!=cc||Da?vb.timeCompare_M(this.getValueFromCookies("sact"),a,na)&&!Da?1:1!=this.getValueFromCookies("to_flag")||Da?0:1:1},this.getIsNID=function(){var a=this.getValueFromCookies("nid");return"1"==a&&(a=0),a},this.isActive=function(){return this.getValueFromCookies("pl")==Nb+"*pt*"+jb},this.isNewVisit=function(a,b){return this.getValueFromCookies("vid")!=a&&+b>=+this.getValueFromCookies("sact")},this.createCookiesValue=function(){var a=Math.floor(Pb.length/3800);return"uid="+Sa+"&nid="+Kb+"&vid="+Db+"&vn="+Eb+"&pvn="+Fb+"&sact="+kb+"&to_flag="+ec+(+a>0?"&cn="+a:"")+"&pl="+Pb},this.checkCookiesValue=function(){for(var a=["uid","nid","vid","vn","sact","to_flag","pl"],b=0;b<a.length;b++)if(this.cookiesValue.indexOf(a[b])<0)return!1;return!0},this.getValueFromCookies=function(a){try{if("pl"==a)return-1!=this.cookiesValue.indexOf(a)?this.cookiesValue.split(a+"=")[1]:"";var b=-1!=this.cookiesValue.indexOf(a)?this.cookiesValue.split(a+"=")[1].split("&")[0]:"";return"pvn"==a&&(b=isNaN(b)?0:b),b}catch(a){return""}},this.plPrc=function(a){return a+"*pt*"+jb}}function z(){this.addLoadEvent=function(a,b){var c=a.onload;"function"!=typeof a.onload?a.onload=b:a.onload=function(){c(),b()}},this.timeCompare_M=function(a,b,c){return+b-+a>+c},this.encode=function(a,b){return encodeURIComponent instanceof Function?b?encodeURI(a):encodeURIComponent(a):escape(a)},this.decode=function(a,b){if(!a)return"";var c="";if(a=a.split("+").join(" "),decodeURIComponent instanceof Function)try{c=b?decodeURI(a):decodeURIComponent(a)}catch(b){c=unescape(a)}else c=unescape(a);return c},this.isNull=function(b){return a==b||"null"==b||-1==b||""==b},this.trim=function(a){return a.replace(/(^\s*)/g,"").replace(/(\s*$)/g,"")},this.base64encodeForBin=function(a){for(var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-/",c="",d=0;d<a.length/6-1;)c+=b.charAt(parseInt(a.slice(6*d,6*(d+1)),2).toString(10)),d++;var e=a.slice(6*d,6*(d+1));if(e){var f=e.length;for(d=0;d<6-f;d++)e+="0";c+=b.charAt(parseInt(e,2).toString(10))}return c},this.Hex2Bin=function(a){for(var b="",c="",d=0,e=a.length,f=0;f<e;f++){c=parseInt(a.charAt(f),16).toString(2),d=c.length;for(var g=0;g<4-d;g++)c="0"+c;b+=c}return b},this.createID=function(a){return this.base64encodeForBin(this.Hex2Bin(this.MD5(a)))},this.MD5=function(a){function b(a,b){return a<<b|a>>>32-b}function c(a,b){var c,d,e,f,g;return e=2147483648&a,f=2147483648&b,c=1073741824&a,d=1073741824&b,g=(1073741823&a)+(1073741823&b),c&d?2147483648^g^e^f:c|d?1073741824&g?3221225472^g^e^f:1073741824^g^e^f:g^e^f}function d(a,b,c){return a&b|~a&c}function e(a,b,c){return a&c|b&~c}function f(a,b,c){return a^b^c}function g(a,b,c){return b^(a|~c)}function h(a,e,f,g,h,i,j){return a=c(a,c(c(d(e,f,g),h),j)),c(b(a,i),e)}function i(a,d,f,g,h,i,j){return a=c(a,c(c(e(d,f,g),h),j)),c(b(a,i),d)}function j(a,d,e,g,h,i,j){return a=c(a,c(c(f(d,e,g),h),j)),c(b(a,i),d)}function k(a,d,e,f,h,i,j){return a=c(a,c(c(g(d,e,f),h),j)),c(b(a,i),d)}function l(a){for(var b,c=a.length,d=c+8,e=(d-d%64)/64,f=16*(e+1),g=Array(f-1),h=0,i=0;i<c;)b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|a.charCodeAt(i)<<h,i++;return b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|128<<h,g[f-2]=c<<3,g[f-1]=c>>>29,g}function m(a){var b,c,d="",e="";for(c=0;c<=3;c++)b=a>>>8*c&255,e="0"+b.toString(16),d+=e.substr(e.length-2,2);return d}var n,o,p,q,r,s,t,u,v,w=32,x=w,y=Array(),z=7,A=12,B=17,C=22,D=5,E=9,F=14,G=20,H=4,I=11,J=16,K=23,L=6,M=10,N=15,O=21;for(y=l(a),s=1732584193,t=4023233417,u=2562383102,v=271733878,n=0;n<y.length;n+=16)o=s,p=t,q=u,r=v,s=h(s,t,u,v,y[n+0],z,3614090360),v=h(v,s,t,u,y[n+1],A,3905402710),u=h(u,v,s,t,y[n+2],B,606105819),t=h(t,u,v,s,y[n+3],C,3250441966),s=h(s,t,u,v,y[n+4],z,4118548399),v=h(v,s,t,u,y[n+5],A,1200080426),u=h(u,v,s,t,y[n+6],B,2821735955),t=h(t,u,v,s,y[n+7],C,4249261313),s=h(s,t,u,v,y[n+8],z,1770035416),v=h(v,s,t,u,y[n+9],A,2336552879),u=h(u,v,s,t,y[n+10],B,4294925233),t=h(t,u,v,s,y[n+11],C,2304563134),s=h(s,t,u,v,y[n+12],z,1804603682),v=h(v,s,t,u,y[n+13],A,4254626195),u=h(u,v,s,t,y[n+14],B,2792965006),t=h(t,u,v,s,y[n+15],C,1236535329),s=i(s,t,u,v,y[n+1],D,4129170786),v=i(v,s,t,u,y[n+6],E,3225465664),u=i(u,v,s,t,y[n+11],F,643717713),t=i(t,u,v,s,y[n+0],G,3921069994),s=i(s,t,u,v,y[n+5],D,3593408605),v=i(v,s,t,u,y[n+10],E,38016083),u=i(u,v,s,t,y[n+15],F,3634488961),t=i(t,u,v,s,y[n+4],G,3889429448),s=i(s,t,u,v,y[n+9],D,568446438),v=i(v,s,t,u,y[n+14],E,3275163606),u=i(u,v,s,t,y[n+3],F,4107603335),t=i(t,u,v,s,y[n+8],G,1163531501),s=i(s,t,u,v,y[n+13],D,2850285829),v=i(v,s,t,u,y[n+2],E,4243563512),u=i(u,v,s,t,y[n+7],F,1735328473),t=i(t,u,v,s,y[n+12],G,2368359562),s=j(s,t,u,v,y[n+5],H,4294588738),v=j(v,s,t,u,y[n+8],I,2272392833),u=j(u,v,s,t,y[n+11],J,1839030562),t=j(t,u,v,s,y[n+14],K,4259657740),s=j(s,t,u,v,y[n+1],H,2763975236),v=j(v,s,t,u,y[n+4],I,1272893353),u=j(u,v,s,t,y[n+7],J,4139469664),t=j(t,u,v,s,y[n+10],K,3200236656),s=j(s,t,u,v,y[n+13],H,681279174),v=j(v,s,t,u,y[n+0],I,3936430074),u=j(u,v,s,t,y[n+3],J,3572445317),t=j(t,u,v,s,y[n+6],K,76029189),s=j(s,t,u,v,y[n+9],H,3654602809),v=j(v,s,t,u,y[n+12],I,3873151461),u=j(u,v,s,t,y[n+15],J,530742520),t=j(t,u,v,s,y[n+2],K,3299628645),s=k(s,t,u,v,y[n+0],L,4096336452),v=k(v,s,t,u,y[n+7],M,1126891415),u=k(u,v,s,t,y[n+14],N,2878612391),t=k(t,u,v,s,y[n+5],O,4237533241),s=k(s,t,u,v,y[n+12],L,1700485571),v=k(v,s,t,u,y[n+3],M,2399980690),u=k(u,v,s,t,y[n+10],N,4293915773),t=k(t,u,v,s,y[n+1],O,2240044497),s=k(s,t,u,v,y[n+8],L,1873313359),v=k(v,s,t,u,y[n+15],M,4264355552),u=k(u,v,s,t,y[n+6],N,2734768916),t=k(t,u,v,s,y[n+13],O,1309151649),s=k(s,t,u,v,y[n+4],L,4149444226),v=k(v,s,t,u,y[n+11],M,3174756917),u=k(u,v,s,t,y[n+2],N,718787259),t=k(t,u,v,s,y[n+9],O,3951481745),s=c(s,o),t=c(t,p),u=c(u,q),v=c(v,r);var P;return"16"==x&&(P=m(t)+m(u)),"32"==x&&(P=m(s)+m(t)+m(u)+m(v)),P},this.substringByByte=function(a,b){for(var c=0,d=0,e=a.length;d<e;d++){if(/[\x00-\xff]/.test(a[d])?c++:c+=2,c==b)return a.substring(0,d+1);if(c>b)return a.substring(0,d)}return a}}function A(a,b,c){a.addEventListener?a.addEventListener(b,c,!0):a.attachEvent&&a.attachEvent("on"+b,c)}function B(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)}function C(a){qb.body?qb.body.appendChild(a):A(rb,"load",function(){qb.body.appendChild(a)})}function D(a,b){var c=null;return function(){var d=this,e=arguments;c&&(clearTimeout(c),c=null),c=setTimeout(function(){a.apply(d,e)},b)}}function E(b,c){if(!b)return[];b=vb.decode(b);var d;try{d=qb.querySelectorAll?S(rb,b):F(b)}catch(a){d=F(b)}var e,f=[];if(c===a||""===c)f=d;else for(var g=0,h=d.length;g<h;g++)e=d[g],vb.MD5(e.text||"")===c&&f.push(e);return f}function F(a,b){try{var c,d=[];if(a=a||[],b=b||qb,"string"==typeof a&&(a=a.split(/\s|>/)),0===a.length)return[];for(var e=a.shift();!e&&a.length>0;)e=a.shift();if(!e)return[];c=0!==a.length;var f=-1,g=e.match(/:nth-child\(\d\)/);if(g){var h=g[0],i=e.match(/[^:]*/g)[0];f=+h.match(/\d/)[0];var j=b.children[f-1];return j&&j.nodeName.toLowerCase()===i?c?F(a,j):(d.push(j),d):[]}var k,l,m,n,o,p,q=[],r=e.match(/[^#\.:\[]*/),s=e.match(/#[^.:\[]*/),t=e.match(/\.[^#:\[]*/),u=e.match(/\[[^#:\.]*/);r&&(r=r[0]),s&&(s=s[0]),t&&(t=t[0]),u&&(u=u[0]),s&&(s=s.replace("#",""),(p=qb.getElementById(s))&&d.push(p)),r&&(s||(d=b.querySelectorAll?b.querySelectorAll(r):b.getElementsByTagName(r))),t&&(s||r||(d=b.querySelectorAll?b.querySelectorAll(t):b.getElementsByClassName?b.getElementsByClassName(t.replace(/\./g," ")):b.getElementsByTagName("*"))),u&&(s||r||t||b.querySelectorAll&&(d=b.querySelectorAll(u)));var v,w,x,y,z=t?t.split(/\./):[],A=u?u.split(/\[|]/g):[];for(l=0,m=d.length;l<m;l++)if(k=d[l],!r||k.nodeName.toLowerCase()===r){if(y=!0,t){var B=" "+k.className+" ";for(n=0,o=z.length;n<o;n++)if(z[n]&&(v=new RegExp("\\s"+z[n]+"\\s"),!v.test(B))){y=!1;break}if(!y)continue}if(u){for(n=0,o=A.length;n<o;n++)if(A[n]&&(w=A[n].split("="),w[1]=w[1].replace(/^'|'$/g,""),x=k.getAttribute(w[0]),x&&(x=x.replace(/'/g,"\\'")),x!==w[1])){y=!1;break}if(!y)continue}q.push(k)}return d=q,c?F(a,d[0]):d}catch(a){return console.log(a),[]}}function G(a){return window.ptengine&&window.ptengine.__ptePeid||a}function H(){if(!tb.href.match(/^https?:\/\/.*/)||tb.href.indexOf("#_pt_capture")>-1)return!1;if(tb.href.indexOf("ptengine=")>-1)return window[Ya]="2.0",!1;if(tb.href.indexOf(Za)>-1||qb.referrer&&qb.referrer.indexOf(Za)>-1)return window[Ya]="2.0",!1;if(["2dfd029f","323b0b0c","14311cf1","4ea10743","4d304c7a","46635348","31aee115","39a47d27","1568e5d4","1a8c08b0","6f1b18fd","566d12f9","51add8fa","15d58c7b","223c998c","17d1d4aa","308c8fdc","5102c629","5b85c19b","4e8daed1","7201105c","645474fb","4e63000f","5990295c","699082d1","11b7dcb8","41nxng7i","37f93wes","68fn68ca"].join(",").indexOf(Ra)<0){var a=/^http[s]?:\/\/((?!datatest|devx|x).)+\.(miapex|ptengine|ptmind)\.(com|jp|cn)/;if(!I()&&(a.test(tb.href)||a.test(qb.referrer)))return window[Ya]="2.0",!1}return!0}function I(){return/lp(pager)?(dev|staging)?\.ptengine\.(jp|com)/.test(tb.href)}function J(a){const b=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,c=/[a-z0-9][a-z0-9-]*\.[a-z]+$/i;var d=b,e=a.split(".");e=e[e.length-1],(e.length>4||"com"===e||"org"===e)&&(d=c);const f=a.match(d);return f?f[0]:""}function K(a){var b=this;this.MAX_SEND_SELECTOR_LENGTH=20,this.DEBOUNCE_SECONDS=1e3,this.selectorList=a,this.observedDomsList=[],this.batchSendList=[],this.createObserve=function(a){if(a&&!b.observedDomsList.some(function(b){return b.element===a})){var c={root:null,rootMargin:"0px",threshold:"0.8"},d=new IntersectionObserver(b.handleIntersect,c);d.observe(a),b.observedDomsList.push({element:a,hasImpression:!1,observeInstance:d})}},this.handleIntersect=function(a,c){a.forEach(function(a){if(a.target&&a.isIntersecting){const c=b.observedDomsList.find(function(b){return b.element===a.target});if(!(c&&c.hasImpression||b.batchSendList.find(function(a){return a.node===c.element}))){var d=b.judgeElementIsHidden(a.target);if(d){if(window.requestAnimationFrame&&c){c.isHidden=!0,c.hiddenElement=d;var e=b.observedDomsList.find(function(a){return a.hiddenElement===d});c.pollingId=e&&e.pollingId?e.pollingId:b.pollingElementVisible(c)}}else b.batchSendList.push({node:a.target,observeItemInfo:c}),b.batchSendImpression()}}})},this.batchSendImpression=D(function(){b.batchSendList.length&&(b.sendImpressions(b.batchSendList),b.batchSendList=[])},b.DEBOUNCE_SECONDS),this.sendImpression=function(a,c){var e=b.getSelector(a);if(e){var f=new d(Ra,Sa,Db,Nb,Ob);f.addPropery("selector",e);var g="";if(c)for(var h in c)f.addPropery(h,c[h]),g+="&"+h+"="+c[h];try{var i=yb.getElementType(a);f.addPropery("elt",i.interactionType),g+="&elt="+i.interactionType,yb.isFloatElement(a)&&(f.addPropery("float",1),g+="&float=1")}catch(a){}if(!yb.sendPost(ja,f.getJSONRet())){var j="?id="+Ra+"."+Sa+"."+Db+"."+Nb+"."+Ob+"&selector="+e;g&&(j+=g),yb.sendMsg(ja+j)}}},this.sendImpressions=function(a,c){if(a&&0!==a.length){var e=[];for(a.forEach(function(a){var d={};if(a.node&&(d.selector=b.getSelector(a.node)),c)d._type=a._type,d.top=a.top,d.height=a.height;else try{var f=yb.getElementType(a.node);d.elt=f.interactionType,yb.isFloatElement(a.node)&&(d.float=1)}catch(a){}e.push(d),a.observeItemInfo&&(a.observeItemInfo.hasImpression=!0)});e.length>0;){var f=new d(Ra,Sa,Db,Nb,Ob);if(f.addPropery("selectors",e.splice(0,b.MAX_SEND_SELECTOR_LENGTH)),!yb.sendPost(ja,f.getJSONRet())){var g="?id="+Ra+"."+Sa+"."+Db+"."+Nb+"."+Ob+"&selectors="+JSON.stringify(e);yb.sendMsg(ja+g)}}}},this.getSelector=function(a){var b="";try{b=yb.getCssPath(a)}catch(a){console.log(a)}return b?yb.getElementType(a).elementType+vb.encode(b,!1).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\./g,"%2E"):""},this.init=function(){if(b.selectorList.length){b.clearObserveList(),b.selectorList.forEach(function(a){var c=Array.from(E(a));c&&c.length&&c.forEach(function(a){a&&b.createObserve(a)})});var a=new MutationObserver(function(a){if(a[0]&&a[0].type)switch(a[0].type){case"childList":a[0].addedNodes&&a[0].addedNodes.length&&b.selectorList.forEach(function(a,c){Array.from(E(a)).forEach(function(a){b.observedDomsList.some(function(b){return b.element===a})||a&&b.createObserve(a)})})}});a.disconnect(),qb.body,a.observe(qb.body,{subtree:!0,childList:!0})}},this.clearObserveList=function(){b.observedDomsList.length&&b.observedDomsList.forEach(function(a){a.observeInstance&&a.observeInstance.disconnect()&&(a.observeInstance=null),a.pollingId&&window.cancelAnimationFrame&&"function"==typeof window.cancelAnimationFrame&&window.cancelAnimationFrame(a.pollingId),a.pollingId=null}),b.observedDomsList=[]},this.judgeElementIsHidden=function(a){if(!a)return a;var c=window.getComputedStyle&&window.getComputedStyle(a);return!c||"hidden"!==c.visibility&&"0"!==c.opacity?(a=R(a))!==qb.body&&b.judgeElementIsHidden(a):a},this.pollingElementVisible=function(a){if(!a)return null;var c=function(){var d=b.observedDomsList.filter(function(c){return!c.hasImpression&&c.hiddenElement===a.hiddenElement&&!b.batchSendList.find(function(a){return a.node===c.element})});d.length&&d.forEach(function(a){b.judgeElementIsHidden(a.element)||a.hasImpression||(b.batchSendList.push({node:a.element,observeItemInfo:a}),b.batchSendImpression())}),window.requestAnimationFrame(c)};return window.requestAnimationFrame(c)},this.findObserveElementByClick=function(a,b){if(!a||!b)return!1;for(;"body"!=a.nodeName.toLowerCase();){if(a===b)return!0;a=R(a)}return!1},this.findVisualElementBySelector=function(a,b){if(!b||!a)return null;for(var c=E(b),d=null,e=0,f=c.length;e<f;e++){if(this.findObserveElementByClick(a,c[e])){d=c[e];break}}return d}}function L(){try{if(!gb)return"";var a=ub.getViewWidth(),b=ub.getViewHeight()>1500?1500:ub.getViewHeight(),c=qb.elementFromPoint(a/2,b/2);if(!c||"BODY"===c.nodeName||"HTML"===c.nodeName)return"";O(c)&&(c=P(c).elementFromPoint(a/2,b/2));var d=yb.getCssPath(c);if(!d)return"";var e=c.getBoundingClientRect();return vb.encode(d,!1).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\./g,"%2E")+"."+parseInt(e.height,10)+"."+parseInt(e.top,10)}catch(a){return console.log(a),""}}function M(a){if(!a)return 0;if(N(a))return M(Q(a));var b=a.getAttribute("data-engage-action")||a.getAttribute("pt-inline-action"),c=a.getAttribute("data-engage-block"),d=!1;try{if(b){"closePopup"===JSON.parse(b).clickActionType&&(d=!0)}}catch(a){console.log(a)}return d||"button-close"===c||"icon-close"===c?1:b||"button-submit-success"===c?2:R(a)&&"BODY"!==a.nodeName?M(R(a)):0}function N(a){return a&&"[object ShadowRoot]"===a.toString()}function O(a){return a&&a.shadowRoot}function P(a){return a&&a.shadowRoot}function Q(a){return a&&a.host}function R(a){return a&&a.parentNode?N(a.parentNode)?Q(a.parentNode):a.parentNode:null}function S(a,b){for(var c=U(a.document.documentElement.querySelectorAll(b)),d=T(a),e=0;e<d.length;e++){var f=d[e];if(O(f)){var g=U(f.shadowRoot.querySelectorAll(b));c=c.concat(g)}}return c}function T(a){for(var b=a.document.querySelectorAll("pt-experience"),c=[],d=0;d<b.length;d++){var e=b[d].nodeName.toLowerCase();a.customElements.get(e)&&c.push(b[d])}return c}function U(a){return Array.prototype.slice.call(a)}function V(a,b){navigator.sendBeacon&&navigator.sendBeacon(a,b)}function W(a){if(Ra&&a&&-1===["setTrackEvent","setAccount","setCamParam","setDomain","setServer","setEventReport","setPtxEnabled","setTrackEvent"].indexOf(a)&&-1===hb.indexOf(a)&&!((new Date).getTime()>16815168e5)){hb.push(a);var b={product:"pt-sdk-v2-ptb",url:location.href,profileId:Ra,meta:{level:"info"},message:"ptb use api name: "+a};V("https://exceptcollect.ptengine.com/post",JSON.stringify(b))}}window.edc7uo||(window.edc7uo=-1),window.edc7uo=-1;var X="v1.65.1";if(!navigator.doNotTrack||1!=navigator.doNotTrack||window.PT_IGNORE_DNT){var Y="engagebind.ptengine.jp/account_bind",Z=["collect.ptengine.jp","collect01.ptengine.jp"],$=0,_="https:"==location.protocol?"https://":"http://",aa=_+Z[$],ba=aa+"/pn",ca=aa+"/pv",da=aa+"/oc",ea=aa+"/os",fa=aa+"/hb",ga=aa+"/te",ha=aa+"/ec",ia=aa+"/abtest",ja=aa+"/impression";Y=_+Y;var ka="",la=1e3,ma=15e3,na=3e5,oa=3e3,pa=1e3,qa=1e3,ra=6e4,sa=2e3,ta=512;window.ptConfig&&window.ptConfig.silenttimes&&(na=60*(window.ptConfig.silenttimes.pti||5)*1e3);var ua="",va=!1,wa=!1,xa=null,ya=[],za=[],Aa=[],Ba=!0,Ca=!1,Da=!1,Ea="",Fa=[],Ga=!1,Ha="",Ia="",Ja="",Ka=!1,La="",Ma=[],Na=[],Oa=!1,Pa=!1,Qa=null,Ra="",Sa="",Ta=!0,Ua=[],Va={},Wa=[0,0,""],Xa=window._pt_sp_2?"_pt_sp_2":"_pt_pe",Ya="__ptengine",Za="ptengine-event-explore=open",$a="preview_token",_a="preview_ptx_token",ab="focus",bb="_s_",cb=[],db=[],eb={"39a47d27":"31aee115","1568e5d4":"4d304c7a","1a8c08b0":"31aee115","6f1b18fd":"4d304c7a"},fb=!1,gb=!1,hb=[];if(function(){"use strict";function a(a){return a<10?"0"+a:a}function b(){return this.valueOf()}function c(a){return e.lastIndex=0,e.test(a)?'"'+a.replace(e,function(a){var b=h[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function d(a,b){var e,h,j,k,l,m=f,n=b[a];switch(n&&"object"==typeof n&&"function"==typeof n.toJSON&&(n=n.toJSON(a)),"function"==typeof i&&(n=i.call(b,a,n)),typeof n){case"string":return c(n);case"number":return isFinite(n)?String(n):"null";case"boolean":case"null":return String(n);case"object":if(!n)return"null";if(f+=g,l=[],"[object Array]"===Object.prototype.toString.apply(n)){for(k=n.length,e=0;e<k;e+=1)l[e]=d(e,n)||"null";return j=0===l.length?"[]":f?"[\n"+f+l.join(",\n"+f)+"\n"+m+"]":"["+l.join(",")+"]",f=m,j}if(i&&"object"==typeof i)for(k=i.length,e=0;e<k;e+=1)"string"==typeof i[e]&&(h=i[e],(j=d(h,n))&&l.push(c(h)+(f?": ":":")+j));else for(h in n)Object.prototype.hasOwnProperty.call(n,h)&&(j=d(h,n))&&l.push(c(h)+(f?": ":":")+j);return j=0===l.length?"{}":f?"{\n"+f+l.join(",\n"+f)+"\n"+m+"}":"{"+l.join(",")+"}",f=m,j}}if("object"!=typeof JSON){JSON={};var e=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=b,Number.prototype.toJSON=b,String.prototype.toJSON=b);var f,g,h,i;"function"!=typeof JSON.stringify&&(h={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(a,b,c){var e;if(f="",g="","number"==typeof c)for(e=0;e<c;e+=1)g+=" ";else"string"==typeof c&&(g=c);if(i=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return d("",{"":a})})}}(),!(!window[Xa]||window[Xa].join("").indexOf("setAccount")<0&&window[Xa].join("").indexOf("setSID")<0||window[Xa].join("").indexOf("setDomain")<0)){for(var ib=0;ib<window[Xa].length;ib++)/setpvtag/i.test(window[Xa][ib])&&(window[Xa][ib]=window[Xa][ib].replace(/setpvtag/i,"setVPV"));if(o(window[Xa])){var jb,kb,lb,mb,nb,ob="",pb=va?window.top.navigator:navigator,qb=va?window.top.document:document,rb=va?window.top:window,sb=qb.querySelectorAll("[pt-scroll-el]"),tb=va?window.top.location:location,ub=new w(qb.documentElement),vb=new z,wb=new y,xb=new v,yb=new x,zb=ub.getRef(),Ab=(ub.getInitialScale(),ub.getTerminalType()+""),Bb=rb.orientation==a||0==rb.orientation?1:-1,Cb="0",Db="",Eb=0,Fb=0,Gb=Ra+"_/",Hb=new Date,Ib=Hb.getTime()+"-"+Hb.getDate(),Jb="",Kb="0",Lb="",Mb="",Nb="",Ob=(ub.getTitle(),""),Pb="",Qb=xb.isEnabled(),Rb="",Sb="",Tb="",Ub=0,Vb=0,Wb=ub.getYMax(),Xb=1==Bb?Wb:0,Yb=1!=Bb?Wb:0,Zb=0,$b=Hb.getTime(),_b="",ac=!1,bc="",cc=0,dc=!0,ec=0,fc=!1,gc=!1,hc="Optimizely",ic=!1;va&&(window.top[Xa]=window[Xa]);var jc=b(),kc={lastTime:(new Date).getTime()-1e4,AddTime:function(){var a=(new Date).getTime();return!(this.lastTime+1e3>a)&&(a-this.lastTime>1e4?(this.lastTime=a-9e3,!0):(this.lastTime+=1e3,!0))}};if(tb.search.indexOf("ptengine=")>-1||c()&&32!=c().length){var lc=tb.href.split("ptengine="),mc={0:"https://report.ptengine.jp/js/popup/ptpopupheatmap.js",1:"https://reportv3.ptengine.jp/components/pagescene/overlay/overlay.js",2:"https://report.ptengine.com/js/popup/ptpopupheatmap.js",3:"https://reportv3.ptengine.com/components/pagescene/overlay/overlay.js",4:"https://demo.ptengine.jp/components/pagescene/heatmap/js/popup/ptpopupheatmap_jp.js",5:"https://demo.ptengine.com/components/pagescene/heatmap/js/popup/ptpopupheatmap_en.js",6:"https://devinsight.ptmind.cn/components/pagescene/overlay/overlay.js",7:"https://devinsight.ptmind.com/components/pagescene/overlay/overlay.js",8:"https://stagingjpreport.ptmind.com/components/pagescene/overlay/overlay.js",9:"https://stagingenreport.ptmind.com/components/pagescene/overlay/overlay.js",A:"http://localhost:3100/components/pagescene/overlay/overlay.js",B:"http://localhost:3000/components/pagescene/overlay/overlay.js",a:"https://report.ptengine.cn/components/pagescene/overlay/overlay.js",b:"https://stagingcnreport.ptmind.com/components/pagescene/overlay/overlay.js",c:"https://devreport.ptengine.cn/components/pagescene/overlay/overlay.js",d:"http://localhost:3200/components/pagescene/overlay/overlay.js",e:"https://devjp1.ptmind.com/components/pagescene/overlay/overlay.js",f:"https://insight.ptengine.jp/components/pagescene/overlay/overlay.js",g:"https://insight.ptengine.com/components/pagescene/overlay/overlay.js"},nc=mc[lc[1].substring(0,1)];if(!nc)return;if(!window[Ya]){var oc=qb.createElement("script");oc.type="text/javascript",oc.async=!0,oc.charset="utf-8",oc.src=nc,C(oc),window[Ya]="2.0"}}else if(tb.href.indexOf(_a)>-1||qb.referrer.indexOf(_a)>-1){if(va)for(var pc=window[Xa]||[],ib=0;ib<pc.length;ib++){var qc=pc[ib];if(qc&&-1!==qc.indexOf(",")){var rc=qc.split(",");if("setPtxEnabled"===rc[0]&&"1"===rc[1]){var _="https:"==tb.protocol?"https://":"http://",sc=qb.createElement("script");sc.type="text/javascript",sc.async=!0,sc.charset="UTF-8",sc.src=_+"xjs.ptengine.jp/ptx_preview.js",qb.body.appendChild(sc);break}}}}else{try{if(tb.href.indexOf("ptengine_engage_editor_token")>-1||tb.href.indexOf("ptengine_editor_iframe")>-1||(window.name||window.parent&&window.parent.name)==="ptengine_campaign_editor")return}catch(a){}if(!(tb.href.indexOf("ptengine_engage_control_group")>-1||tb.href.indexOf("ptengine_heatmap_token")>-1))if(tb.href.indexOf($a)>-1){if(!window[Ya]){var _="https:"==tb.protocol?"https://":"http://",sc=qb.createElement("script");sc.type="text/javascript",sc.async=!0,sc.charset="UTF-8",sc.src=_+"pteengagejs.ptengine.jp/preview.js?v="+X,C(sc),window[Ya]="2.0"}}else if(window[Ya]||function(){function a(){c=c.replace(/^https?:/,tb.protocol);var a=qb.createElement("script");a.type="text/javascript",a.async=!0,a.charset="UTF-8",a.src=c+"/components/event/foreign/dest/event.js",C(a)}try{var b=qb.referrer||rb.name||"",c=localStorage.ptengineDomain;tb.href.indexOf(Za)>-1&&/^https?:\/\/(.*\.(ptengine|ptmind).(com|cn|jp)|localhost).*/gim.test(b)?(localStorage.ptengineDomain=c=b.match(/https?:\/\/([^\/]+)/i)[0],a()):opener&&c&&a()}catch(a){}}(),""!=ka||I()){var tc="pt_"+Ra,uc="pt_s_"+Ra,vc="pt_t_"+Ra,wc="pt_v_"+Ra,xc="pt_sc_"+Ra;switch(Ra){case"23279dc3":_pt_sp_2.push("setCustomVar,def15,svid,value,"+tb.href.split("?")[0]+",0");break;case"19fca91d":case"5648a0b7":case"2345678":ua="oisix";break;case"2ab0afd3":ua="oisix_gochimaru";break;case"34c69a28":ua="oisix_hk"}if("VjjxITmt45nXMldop676zQ"==vb.createID("ptmind")){var yc=function(a){this.events=[];for(var b=0;b<a.length;b++)this.events.push(new zc(a[b]))};yc.prototype={constructor:yc,getAllErrors:function(){for(var a=[],b=0;b<this.events.length;b++)Array.prototype.push.apply(a,this.events[b].getEventErrors());return a},getCustomEventEid:function(){var b=this.events[0],c=[],d={};if(b){var e=this.getAllErrors();if(e.length){for(var f=0,g=e.length;f<g;f++)c.push(e[f].msg);return{eid:c.join("\n"),properties:{}}}var h=encodeURIComponent(b.eventName),c=[h+":0:0"];for(var i in b)if("eventName"!=i&&"pt_event_id"!=i&&b.hasOwnProperty(i)){var j=b[i],k=b.getType(j),l=j instanceof Date?b.getDateFormat(j):j;k!=a?(c.push(encodeURIComponent(i)+":"+k+":"+encodeURIComponent(l)),d[i]=j):"undefined"!=typeof console&&console.warn("unsupported type, only support 4 types:[int, float, string, date]",k)}return{eid:c.join("|"),properties:d}}},getStr:function(b){var c=[];b===a&&Array.prototype.push.apply(c,this.events);var d=this.getAllErrors();return b!==a&&d.push({errorCode:"109",errorType:"lengthLimit",errorValue:b,msg:"the url length "+b+" is too long"}),d.length&&c.push({pt_error:d}),c}};var zc=function(a){this.pt_event_id=this.getEventId();for(var b in a)if(a.hasOwnProperty(b)){var c=a[b];c=c instanceof Date?this.getDateFormat(c):c,this[b]=c}};if(zc.prototype={constructor:zc,rules:{eventName:{maxLength:ta},key:{maxLength:ta,regex:/^[\s\S]*$/},value:{string:{maxLength:ta},date:{},float:{min:-4294967296,max:4294967294},int:{min:-2147483648,max:2147483647}}},getEventId:function(){for(var a="0123456789qwertyuioplkjhgfdsazxcvbnm",b="",c=0;c<32;c++)b+=a.charAt(Math.ceil(36*Math.random()));return b},getEventErrors:function(){var a=[];for(var b in this)this.hasOwnProperty(b)&&Array.prototype.push.apply(a,this.valid(b,this[b]));return a},valid:function(a,b){var c=[];b="function"==typeof b?b.call():b;var d=encodeURIComponent(b),e=this.getType(b);("eventName"==a||"pt_category"==a)&&this.rules.eventName.maxLength&&b.replace(/[^\x00-\xff]+/g,"aa").length>this.rules.eventName.maxLength&&c.push({errorCode:"101",errorType:"eventName",errorValue:b,errorEventName:this.eventName||this.pt_category,msg:"eventName["+b+"]length is too long"}),this.rules.key.maxLength&&a.length>this.rules.key.maxLength&&c.push({errorCode:"103",errorType:"key",errorValue:a,errorEventName:this.eventName||this.pt_category,msg:"key["+a+"]length is too long"}),this.rules.key.regex&&!this.rules.key.regex.test(a)&&c.push({errorType:"key",errorCode:"103",errorValue:a,errorEventName:this.eventName||this.pt_category,msg:"key["+a+"] must match ^[a-zA-Zd_]*$"});var f={string:function(){this.rules.value.string.maxLength&&d.length>this.rules.value.string.maxLength&&c.push({errorType:"value",errorValue:b,errorCode:"105",errorEventName:this.eventName||this.pt_category,msg:"value["+decodeURIComponent(b)+"]length is too long"})},int:function(){(b>this.rules.value.int.max||b<this.rules.value.int.min)&&c.push({errorType:"value",errorValue:b,errorCode:"108",errorEventName:this.eventName||this.pt_category,msg:"value["+b+"] is ["+e+"]type, it should between -2147483648 and 2147483647"})},float:function(){(b>this.rules.value.float.max||b<this.rules.value.float.min)&&c.push({errorType:"value",errorValue:b,errorCode:"107",errorEventName:this.eventName||this.pt_category,msg:"value["+b+"] does not match, the type float should between -4294967296 and 4294967294, and the type int should bewteen -2147483648 and 2147483647"})}};return f[e]&&f[e].call(this),c},getType:function(){var a=/^\d{4}\-\d{2}\-\d{2}(?:\x20\d{2}:\d{2}:\d{2})?$/;return function(b){return"function"==typeof b?arguments.callee.call(this,b.call()):"number"==typeof b?b>2147483647||b<-2147483648?"string":b%1==0?"int":"float":"string"==typeof b?a.test(b)?"date":"string":"object"==typeof b&&b instanceof Date?"date":void 0}}(),getDateFormat:function(){function a(a){return 1==(a+"").length?"0"+a:a+""}return function(b){if(b instanceof Date)return b.getFullYear()+"-"+a(b.getMonth()+1)+"-"+a(b.getDate())+" "+a(b.getHours())+":"+a(b.getMinutes())+":"+a(b.getSeconds())}}()},d.prototype.addPropery=function(a,b){this[a]=b},d.prototype.getJSONRet=function(){return JSON.stringify(this)},window[Xa].push=function(a,b){function c(a){return"&eid="+encodeURIComponent(a)}var e=a.split(",");switch(e[0]){case"setPVTag":try{if("replace"==e[2])Lb=e[1];else{var f=e[1]?e[1]:"";Lb=Mb+"#"+f}Nb=vb.createID(Lb),Qa&&Qa.clearObserveList(),n("vpv",Lb,Nb)}catch(a){}break;case"setCustomEvent":try{var g=b.eventName?b.eventName:"";if(g=vb.trim(g),0==Pa||!g)return;var g=encodeURIComponent(g.substr(0,ta)),h="0",i=b.isActiveElement?b.isActiveElement:0;Fb=+Fb+1;var j=new d(Ra,Sa,Db,Nb,Ob);j.addPropery("eid",g+":"+h+":"+i),j.addPropery("ptif",Ab+""),j.addPropery("pvn",Fb);var k="?id="+Ra+"."+Sa+"."+Db+"."+Nb+"."+Ob+"&eid="+g+":"+h+":"+i+"&ptif="+Ab+"&pvn="+Fb;yb.sendTE(j.getJSONRet(),k,{sid:Ra,eventName:g})}catch(a){}break;case"setTrackEvent":try{if(0==Pa)return;if("string"==typeof e[7]&&db.push(vb.decode(e[7])),"string"==typeof e[6]){var l=tb.href,m=e[6];if("2"!==e[10]&&(l=l.replace(/https?:\/\/(www.)?/,""),m=m.replace(/https?(\?)?\:(\/\/)?(\\\/\\\/)?(www\\.)?/,"")),"39073cb0"==Ra&&l.match(new RegExp(m.replace(/^\//,"").replace(/\/$/,""))));else if(!l.replace(/\/$/,"").match(new RegExp(m.replace(/^\//,"").replace(/[\\]?[\\]?\/[\.]?[\*]?[\$]?$/,""))))return}void 0===e[3]&&(e[3]=""),void 0===e[4]&&(e[4]="0"),e[4]=e[4].replace(/\./g,"e");for(var o=1;o<5;o++)e[o]=vb.decode(e[o]);e[1]=e[1].substr(0,200),e[2]=e[2].substr(0,200),e[3]=e[3].substr(0,500),e[4]=e[4].substr(0,10);for(var o=1;o<5;o++)if(e[o]=vb.encode(e[o]).replace(/\./g,"%2E"),e[o].indexOf(".")>-1){var p=e[o].split(".");e[o]=p.join("%2E")}if("string"==typeof e[7])cb.push(e);else{if(""==Sa||""==Db||""==Nb||""==Ob)return;if(!kc.AddTime())return;Fb=+Fb+1,wb.writeCookies();var j=new d(Ra,Sa,Db,Nb,Ob);j.addPropery("stat",e.slice(1,5).join(".")),j.addPropery("ptif",Ab+""),j.addPropery("pvn",Fb);var k="?id="+Ra+"."+Sa+"."+Db+"."+Nb+"."+Ob+"&stat="+e.slice(1,5).join(".")+"&ptif="+Ab+"&pvn="+Fb;yb.sendTE(j.getJSONRet(),k,{sid:Ra,eventName:e[3]})}}catch(a){}break;case"setCustomVar":!function(){var a,b=e[3];"cookie"==b?a=e[4]:"globalVar"==b?a=window[e[4]]:"domId"==b?qb.getElementById(e[4])&&(a=qb.getElementById(e[4]).innerHTML):"value"==b&&(a=e[4]),a&&("ptselfSource"==e[2]&&Ua.push(["def01",xb.getValue(xc),e[3]]),Ua.push([e[1],a,e[3]])),"ptself"!=e[2]&&"ptselfSource"!=e[2]||(n("vpv"),"ptselfSource"==e[2]&&Ua.pop(),Ua.pop(),"ptselfSource"==e[2]&&xb.setValue(xc,"",{expires:""})),a&&window.analytics&&window.analytics.track&&window.analytics.track(a)}();break;case"setCustomVarV2":try{if(0==Pa)return;var q=function(){if("object"==typeof b)return"number"==typeof b.length?b:[b]}();if(!q)return;Fb=+Fb+1;var r=new yc(q),s=r.getCustomEventEid(),j=new d(Ra,Sa,Db,Nb,Ob);j.addPropery("eid",s.eid),j.addPropery("ptif",Ab+""),j.addPropery("pvn",Fb);var k="?id="+Ra+"."+Sa+"."+Db+"."+Nb+"."+Ob+"&eid="+s.eid+"&ptif="+Ab+"&pvn="+Fb;yb.sendTE(j.getJSONRet(),k,{sid:Ra,eventName:q[0]&&encodeURIComponent(q[0].eventName),properties:s.properties})}catch(a){}break;case"setEC":try{var q=function(){if("object"==typeof b)return"number"==typeof b.length?b:[b]}(),r=new yc(q);if(!q)return;if(0==Pa)return;Fb=+Fb+1;var t=r.getStr(),u="?id="+Ra+"."+Sa+"."+Db+"."+Nb+"."+Ob,v="&ptif="+Ab+"&pvn="+Fb,w=new d(Ra,Sa,Db,Nb,Ob);w.addPropery("ptif",Ab+""),w.addPropery("pvn",Fb),w.addPropery("v",X),w.addPropery("ts",(new Date).getTime()),w.addPropery("data",t);var k=u+v;if(!yb.sendPost(ha,w.getJSONRet())){k=u+c(JSON.stringify(t))+v;var x=ha+k+"&v="+X+"&ts="+(new Date).getTime();x.length>ub.urlLengthLimit&&(k=u+c(r.getStr(x.length))+v),yb.sendMsgByScript(ha+k)}}catch(a){}break;case"setUser":if("object"==typeof b){if(!b.accountid)throw new Error("accountid can not be empty.");var y={uid:Sa,sid:Ra,accountid:b.accountid,properties:b.props||[]};yb.sendPost(Y,JSON.stringify(y))}break;case"setFunnelStep":try{Da="true"==e[1],Ea=3==e.length?e[2]:""}catch(a){}break;case"useURLTrim":try{Ba="false"!=e[1]||"tmpUrlAPI"}catch(a){}break;case"setCrossDomainLink":try{Ca="allManual"==e[1]?"allManual":"halfManual"==e[1]&&"halfManual"}catch(a){}break;case"setIframe":ic="true"==e[1];break;case"RecordSource":if(xb.getValue(wc)==Db)return;var z;z=tb.search.indexOf("utm_")>-1?tb.href:Jb?Jb.split("://")[1].split("/")[0]:"";var A=vb.encode(z,!1)||"no referrer",B=xb.getValue(xc);A=B?B+","+A:A,xb.setValue(xc,A,{expires:la}),xb.setValue(wc,Db,{expires:la});break;case"ClearSource":xb.setValue(xc,"",{expires:""});break;case"setSampleRate":try{bc=e[1]}catch(a){}break;case"setOptimizely":try{gc="true"==e[1],hc="Optimizely"}catch(a){}break;case"setOptimizelyX":try{gc="true"==e[1],hc="OptimizelyX"}catch(a){}break;case"setAbtest":var C=b.category||"",D=b.expName||"",E=b.expId||"",F=b.verName||"",G=b.verId||"",H=b.engageType,I=new d(Ra,Sa,Db,Nb,Ob);if(H&&I.addPropery("engageType",H),I.addPropery("abtest",C+":"+D+":"+E+":"+F+":"+G),!yb.sendPost(ia,I.getJSONRet())){var k="?id="+Ra+"."+Sa+"."+Db+"."+Nb+"."+Ob+"&abtest="+C+":"+D+":"+E+":"+F+":"+G;yb.sendMsgByScript(ia+k)}}W(e[0])},window[Xa].length>0)for(var Ac=window[Xa],ib=0;ib<Ac.length;ib++)Ac[ib]&&window[Xa].push(Ac[ib]);"308fd851"!=Ra&&"633fdbe6"!=Ra||(ma=6e4),wb.readCookies(),H()&&f(),window.ptengine&&(window.ptengine.autoDetection={start:function(a){var b=ka,c=a.lpPattern;if(-1===location.hostname.indexOf(b))return void console.debug("domain not match");try{if(!c||!new RegExp(c).test(location.href))return;window.lpoEnabled=!0,window.ptengine.lpoEngineStartOptions=a}catch(a){console.log(a)}},sendPackage:function(a,b){if(a&&b){var c=new d(Ra,Sa,Db,Nb,Ob),e="?id="+Ra+"."+Sa+"."+Db+"."+Nb+"."+Ob;for(var f in b)c.addPropery(f,b[f]),e+="&"+f+"="+b[f];var g=aa+a;yb.sendPost(g,c.getJSONRet())||yb.sendMsg(g+e)}},innerObInstance:new K([])})}}}}}}}();
!function(){"use strict";var c=function(e){return"object"==typeof e?null!==e:"function"==typeof e},k=function(e){if(c(e))return e;throw TypeError(e+" is not an object!")},u=function(e){try{return!!e()}catch(t){return!0}},a=!u(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a});function R(e,t){return e(t={exports:{}},t.exports),t.exports}var p=R(function(e){e=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),j=p.document,$=c(j)&&c(j.createElement),W=function(e){return $?j.createElement(e):{}},U=!a&&!u(function(){return 7!=Object.defineProperty(W("div"),"a",{get:function(){return 7}}).a}),F=function(e,t){if(!c(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!c(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!c(i=n.call(e)))return i;if(t||"function"!=typeof(n=e.toString)||c(i=n.call(e)))throw TypeError("Can't convert object to primitive value");return i},V=Object.defineProperty,l={f:a?Object.defineProperty:function On(e,t,n){if(k(e),t=F(t,!0),k(n),U)try{return V(e,t,n)}catch(i){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},e=l.f,B=Function.prototype,H=/^\s*function ([^ (]*)/,t="name";function q(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function G(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?q(Object(n),!0).forEach(function(e){Y(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){t&&J(e.prototype,t),n&&J(e,n),Object.defineProperty(e,"prototype",{writable:!1})}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X(e,t)}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function K(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t){return(X=Object.setPrototypeOf||function X(e,t){return e.__proto__=t,e})(e,t)}function Q(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function Z(e,t,n){return(Z=Q()?Reflect.construct:function Z(e,t,n){var i=[null];i.push.apply(i,t);t=new(Function.bind.apply(e,i));return n&&X(t,n.prototype),t}).apply(null,arguments)}function ee(e){var n="function"==typeof Map?new Map:undefined;return(ee=function ee(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return Z(e,arguments,K(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),X(t,e)})(e)}function te(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");t=e;if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(n){var i=Q();return function(){var e,t=K(n);return te(this,i?(e=K(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function ne(e){throw new TypeError('"'+e+'" is read-only')}function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||oe(e,t)||ae(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e){return function(e){if(Array.isArray(e))return se(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ae(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(c){s=!0,r=c}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw r}}return o}}function ae(e,t){if(e){if("string"==typeof e)return se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?se(e,t):void 0}}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}t in B||a&&e(B,t,{configurable:!0,get:function(){try{return(""+this).match(H)[1]}catch(e){return""}}});var ce,ue={}.toString,le=function(e){return ue.call(e).slice(8,-1)},de=R(function(e){e=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=e)}),fe=(de.version,R(function(e){var t="__core-js_shared__",n=p[t]||(p[t]={});(e.exports=function(e,t){return n[e]||(n[e]=t!==undefined?t:{})})("versions",[]).push({version:de.version,mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})})),pe=0,he=Math.random(),ge=function(e){return"Symbol(".concat(e===undefined?"":e,")_",(++pe+he).toString(36))},d=R(function(e){var t=fe("wks"),n=p.Symbol,i="function"==typeof n;(e.exports=function(e){return t[e]||(t[e]=i&&n[e]||(i?n:ge)("Symbol."+e))}).store=t}),ve=d("match"),ye=function(e){var t;return c(e)&&((t=e[ve])!==undefined?!!t:"RegExp"==le(e))},me=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},we=d("species"),be=Math.ceil,_e=Math.floor,ke=function(e){return isNaN(e=+e)?0:(0<e?_e:be)(e)},Se=function(e){if(e==undefined)throw TypeError("Can't call method on  "+e);return e},B=function(r){return function(e,t){var n,e=String(Se(e)),t=ke(t),i=e.length;return t<0||i<=t?r?"":undefined:(n=e.charCodeAt(t))<55296||56319<n||t+1===i||(i=e.charCodeAt(t+1))<56320||57343<i?r?e.charAt(t):n:r?e.slice(t,t+2):i-56320+(n-55296<<10)+65536}},Ee=B(!0),Te=function(e,t,n){return t+(n?Ee(e,t).length:1)},Ie=Math.min,xe=function(e){return 0<e?Ie(ke(e),9007199254740991):0},Ce=d("toStringTag"),Ae="Arguments"==le(function(){return arguments}()),Oe=function(e,t){try{return e[t]}catch(n){}},Ne=function(e){var t;return e===undefined?"Undefined":null===e?"Null":"string"==typeof(t=Oe(e=Object(e),Ce))?t:Ae?le(e):"Object"==(t=le(e))&&"function"==typeof e.callee?"Arguments":t},De=RegExp.prototype.exec,Pe=function(e,t){var n=e.exec;if("function"==typeof n){n=n.call(e,t);if("object"!=typeof n)throw new TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==Ne(e))throw new TypeError("RegExp#exec called on incompatible receiver");return De.call(e,t)},Le=function(){var e=k(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},Me=RegExp.prototype.exec,Re=String.prototype.replace,t=Me,je="lastIndex",$e=(e=/a/,n=/b*/g,Me.call(e,"a"),Me.call(n,"a"),0!==e[je]||0!==n[je]),We=/()??/.exec("")[1]!==undefined,Ue=t=$e||We?function(e){var t,n,i,r,o=this;return We&&(n=new RegExp("^"+o.source+"$(?!\\s)",Le.call(o))),$e&&(t=o[je]),i=Me.call(o,e),$e&&i&&(o[je]=o.global?i.index+i[0].length:t),We&&i&&1<i.length&&Re.call(i[0],n,function(){for(r=1;r<arguments.length-2;r++)arguments[r]===undefined&&(i[r]=undefined)}),i}:t,Fe=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Ve=a?function(e,t,n){return l.f(e,t,Fe(1,n))}:function(e,t,n){return e[t]=n,e},Be={}.hasOwnProperty,h=function(e,t){return Be.call(e,t)},He=fe("native-function-to-string",Function.toString),qe=R(function(e){var o=ge("src"),t="toString",a=(""+He).split(t);de.inspectSource=function(e){return He.call(e)},(e.exports=function(e,t,n,i){var r="function"==typeof n;r&&!h(n,"name")&&Ve(n,"name",t),e[t]!==n&&(r&&!h(n,o)&&Ve(n,o,e[t]?""+e[t]:a.join(String(t))),e===p?e[t]=n:i?e[t]?e[t]=n:Ve(e,t,n):(delete e[t],Ve(e,t,n)))})(Function.prototype,t,function ue(){return"function"==typeof this&&this[o]||He.call(this)})}),Ge=function(i,r,e){if(me(i),r===undefined)return i;switch(e){case 1:return function(e){return i.call(r,e)};case 2:return function(e,t){return i.call(r,e,t)};case 3:return function(e,t,n){return i.call(r,e,t,n)}}return function(){return i.apply(r,arguments)}},ze="prototype",g=function(e,t,n){var i,r,o,a=e&g.F,s=e&g.G,c=e&g.P,u=e&g.B,l=s?p:e&g.S?p[t]||(p[t]={}):(p[t]||{})[ze],d=s?de:de[t]||(de[t]={}),f=d[ze]||(d[ze]={});for(i in n=s?t:n)r=((o=!a&&l&&l[i]!==undefined)?l:n)[i],o=u&&o?Ge(r,p):c&&"function"==typeof r?Ge(Function.call,r):r,l&&qe(l,i,r,e&g.U),d[i]!=r&&Ve(d,i,o),c&&f[i]!=r&&(f[i]=r)},y=(p.core=de,g.F=1,g.G=2,g.S=4,g.P=8,g.B=16,g.W=32,g.U=64,g.R=128,g),Je=(y({target:"RegExp",proto:!0,forced:Ue!==/./.exec},{exec:Ue}),d("species")),Ye=!u(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),Ke=(ce=(e=/(?:)/).exec,e.exec=function(){return ce.apply(this,arguments)},2===(e="ab".split(e)).length&&"a"===e[0]&&"b"===e[1]),n=function(n,e,t){var o,i,r=d(n),a=!u(function(){var e={};return e[r]=function(){return 7},7!=""[n](e)}),s=a?!u(function(){var e=!1,t=/a/;return t.exec=function(){return e=!0,null},"split"===n&&(t.constructor={},t.constructor[Je]=function(){return t}),t[r](""),!e}):undefined;a&&s&&("replace"!==n||Ye)&&("split"!==n||Ke)||(o=/./[r],t=(s=t(Se,r,""[n],function(e,t,n,i,r){return t.exec===Ue?a&&!r?{done:!0,value:o.call(t,n,i)}:{done:!0,value:e.call(n,t,i)}:{done:!1}}))[0],i=s[1],qe(String.prototype,n,t),Ve(RegExp.prototype,r,2==e?function(e,t){return i.call(e,this,t)}:function(e){return i.call(e,this)}))},Xe=Math.min,Qe=[].push,Ze="split",et="length",tt="lastIndex",nt=4294967295,it=!u(function(){RegExp(nt,"y")}),rt=(n("split",2,function(r,o,h,g){var v="c"=="abbc"[Ze](/(b)*/)[1]||4!="test"[Ze](/(?:)/,-1)[et]||2!="ab"[Ze](/(?:ab)*/)[et]||4!="."[Ze](/(.?)(.?)/)[et]||1<"."[Ze](/()()/)[et]||""[Ze](/.?/)[et]?function(e,t){var n=String(this);if(e===undefined&&0===t)return[];if(!ye(e))return h.call(n,e,t);for(var i,r,o,a=[],s=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),c=0,u=t===undefined?nt:t>>>0,l=new RegExp(e.source,s+"g");(i=Ue.call(l,n))&&!(c<(r=l[tt])&&(a.push(n.slice(c,i.index)),1<i[et]&&i.index<n[et]&&Qe.apply(a,i.slice(1)),o=i[0][et],c=r,a[et]>=u));)l[tt]===i.index&&l[tt]++;return c===n[et]?!o&&l.test("")||a.push(""):a.push(n.slice(c)),a[et]>u?a.slice(0,u):a}:"0"[Ze](undefined,0)[et]?function(e,t){return e===undefined&&0===t?[]:h.call(this,e,t)}:h;return[function(e,t){var n=r(this),i=e==undefined?undefined:e[o];return i!==undefined?i.call(e,n,t):v.call(String(n),e,t)},function(e,t){var n=g(v,e,this,t,v!==h);if(n.done)return n.value;var n=k(e),i=String(this),r=(e=n,r=RegExp,(e=k(e).constructor)===undefined||(e=k(e)[we])==undefined?r:me(e)),o=n.unicode,e=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.unicode?"u":"")+(it?"y":"g"),a=new r(it?n:"^(?:"+n.source+")",e),s=t===undefined?nt:t>>>0;if(0==s)return[];if(0===i.length)return null===Pe(a,i)?[i]:[];for(var c=0,u=0,l=[];u<i.length;){a.lastIndex=it?u:0;var d,f=Pe(a,it?i:i.slice(u));if(null===f||(d=Xe(xe(a.lastIndex+(it?0:u)),i.length))===c)u=Te(i,u,o);else{if(l.push(i.slice(c,u)),l.length===s)return l;for(var p=1;p<=f.length-1;p++)if(l.push(f[p]),l.length===s)return l;u=c=d}}return l.push(i.slice(c)),l}]}),function(e){return Object(Se(e))}),t=function(e,t){return!!e&&u(function(){t?e.call(null,function(){},1):e.call(null)})},ot=[].sort,at=[1,2,3],st=(y(y.P+y.F*(u(function(){at.sort(undefined)})||!u(function(){at.sort(null)})||!t(ot)),"Array",{sort:function(e){return e===undefined?ot.call(rt(this)):ot.call(rt(this),me(e))}}),Math.max),ct=Math.min,ut=Math.floor,lt=/\$([$&`']|\d\d?|<[^>]*>)/g,dt=/\$([$&`']|\d\d?)/g,e=(n("replace",2,function(r,o,b,_){return[function(e,t){var n=r(this),i=e==undefined?undefined:e[o];return i!==undefined?i.call(e,n,t):b.call(String(n),e,t)},function(e,t){var n=_(b,e,this,t);if(n.done)return n.value;for(var i,r=k(e),o=String(this),a="function"==typeof t,s=(a||(t=String(t)),r.global),c=(s&&(i=r.unicode,r.lastIndex=0),[]);null!==(p=Pe(r,o))&&(c.push(p),s);)""===String(p[0])&&(r.lastIndex=Te(o,xe(r.lastIndex),i));for(var u,l="",d=0,f=0;f<c.length;f++){for(var p=c[f],h=String(p[0]),g=st(ct(ke(p.index),o.length),0),v=[],y=1;y<p.length;y++)v.push((u=p[y])===undefined?u:String(u));var m=p.groups,w=a?(w=[h].concat(v,g,o),m!==undefined&&w.push(m),String(t.apply(undefined,w))):function(o,a,s,c,u,e){var l=s+o.length,d=c.length,t=dt;u!==undefined&&(u=rt(u),t=lt);return b.call(e,t,function(e,t){var n;switch(t.charAt(0)){case"$":return"$";case"&":return o;case"`":return a.slice(0,s);case"'":return a.slice(l);case"<":n=u[t.slice(1,-1)];break;default:var i,r=+t;if(0==r)return e;if(d<r)return 0!==(i=ut(r/10))&&i<=d?c[i-1]===undefined?t.charAt(1):c[i-1]+t.charAt(1):e;n=c[r-1]}return n===undefined?"":n})}(h,o,g,v,m,t);d<=g&&(l+=o.slice(d,g)+w,d=g+h.length)}return l+o.slice(d)}]}),{}),ft=(e[d("toStringTag")]="z",e+""!="[object z]"&&qe(Object.prototype,"toString",function ue(){return"[object "+Ne(this)+"]"},!0),a&&"g"!=/./g.flags&&l.f(RegExp.prototype,"flags",{configurable:!0,get:Le}),"toString"),pt=/./[ft],e=function(e){qe(RegExp.prototype,ft,e,!0)},e=(u(function(){return"/a/b"!=pt.call({source:"a",flags:"b"})})?e(function ue(){var e=k(this);return"/".concat(e.source,"/","flags"in e?e.flags:!a&&e instanceof RegExp?Le.call(e):undefined)}):pt.name!=ft&&e(function ue(){return pt.call(this)}),p.document),ht=e&&e.documentElement,gt=Math.max,vt=Math.min,yt=function(e,t){return(e=ke(e))<0?gt(e+t,0):vt(e,t)},mt=[].slice;y(y.P+y.F*u(function(){ht&&mt.call(ht)}),"Array",{slice:function(e,t){var n=xe(this.length),i=le(this);if(t=t===undefined?n:t,"Array"==i)return mt.call(this,e,t);for(var r=yt(e,n),e=yt(t,n),o=xe(e-r),a=new Array(o),s=0;s<o;s++)a[s]="String"==i?this.charAt(r+s):this[r+s];return a}});var wt={f:{}.propertyIsEnumerable},bt=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==le(e)?e.split(""):Object(e)},_t=function(e){return bt(Se(e))},kt=Object.getOwnPropertyDescriptor,St={f:a?kt:function(e,t){if(e=_t(e),t=F(t,!0),U)try{return kt(e,t)}catch(n){}if(h(e,t))return Fe(!wt.f.call(e,t),e[t])}},Et=function(e,t){if(k(e),!c(t)&&null!==t)throw TypeError(t+": can't set as prototype!")},Tt={set:Object.setPrototypeOf||("__proto__"in{}?function(e,n,i){try{(i=Ge(Function.call,St.f(Object.prototype,"__proto__").set,2))(e,[]),n=!(e instanceof Array)}catch(t){n=!0}return function Tt(e,t){return Et(e,t),n?e.__proto__=t:i(e,t),e}}({},!1):undefined),check:Et}.set,It=function(e,t,n){var t=t.constructor;return t!==n&&"function"==typeof t&&(t=t.prototype)!==n.prototype&&c(t)&&Tt&&Tt(e,t),e},e=function(s){return function(e,t,n){var i,r=_t(e),o=xe(r.length),a=yt(n,o);if(s&&t!=t){for(;a<o;)if((i=r[a++])!=i)return!0}else for(;a<o;a++)if((s||a in r)&&r[a]===t)return s||a||0;return!s&&-1}},xt=fe("keys"),i=function(e){return xt[e]||(xt[e]=ge(e))},Ct=e(!1),At=i("IE_PROTO"),Ot=function(e,t){var n,i=_t(e),r=0,o=[];for(n in i)n!=At&&h(i,n)&&o.push(n);for(;t.length>r;)!h(i,n=t[r++])||~Ct(o,n)||o.push(n);return o},Nt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Dt=Nt.concat("length","prototype"),v={f:Object.getOwnPropertyNames||function(e){return Ot(e,Dt)}},Pt=d("species"),Lt=function(e){e=p[e];a&&e&&!e[Pt]&&l.f(e,Pt,{configurable:!0,get:function(){return this}})},Mt=l.f,m=v.f,Rt=w=p.RegExp,jt=w.prototype,$t=/a/g,Wt=/a/g,Ut=new w($t)!==$t;if(a&&(!Ut||u(function(){return Wt[d("match")]=!1,w($t)!=$t||w(Wt)==Wt||"/a/i"!=w($t,"i")}))){for(var w=function RegExp(e,t){var n=this instanceof w,i=ye(e),r=t===undefined;return!n&&i&&e.constructor===w&&r?e:It(Ut?new Rt(i&&!r?e.source:e,t):Rt((i=e instanceof w)?e.source:e,i&&r?Le.call(e):t),n?this:jt,w)},Ft=m(Rt),Vt=0;Ft.length>Vt;)!function(t){t in w||Mt(w,t,{configurable:!0,get:function(){return Rt[t]},set:function(e){Rt[t]=e}})}(Ft[Vt++]);(jt.constructor=w).prototype=jt,qe(p,"RegExp",w)}Lt("RegExp"),n("match",1,function(i,r,c,u){return[function(e){var t=i(this),n=e==undefined?undefined:e[r];return n!==undefined?n.call(e,t):new RegExp(e)[r](String(t))},function(e){var t=u(c,e,this);if(t.done)return t.value;var n=k(e),i=String(this);if(!n.global)return Pe(n,i);for(var r=n.unicode,o=[],a=n.lastIndex=0;null!==(s=Pe(n,i));){var s=String(s[0]);""===(o[a]=s)&&(n.lastIndex=Te(i,xe(n.lastIndex),r)),a++}return 0===a?null:o}]});var Bt="\t\n\x0B\f\r   ᠎             　\u2028\u2029\ufeff",m="[\t\n\x0B\f\r   ᠎             　\u2028\u2029\ufeff]",Ht=RegExp("^"+m+m+"*"),qt=RegExp(m+m+"*$"),m=function(e,t,n){var i={},r=u(function(){return Bt[e]()||"​"!="​"[e]()}),t=i[e]=r?t(Gt):Bt[e];n&&(i[n]=t),y(y.P+y.F*r,"String",i)},Gt=m.trim=function(e,t){return e=String(Se(e)),1&t&&(e=e.replace(Ht,"")),e=2&t?e.replace(qt,""):e},zt=Object.keys||function Ft(e){return Ot(e,Nt)},Jt=a?Object.defineProperties:function(e,t){k(e);for(var n,i=zt(t),r=i.length,o=0;o<r;)l.f(e,n=i[o++],t[n]);return e},Yt=i("IE_PROTO"),Kt=function(){},Xt="prototype",Qt=function(){var e=W("iframe"),t=Nt.length;for(e.style.display="none",ht.appendChild(e),e.src="javascript:",(e=e.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),Qt=e.F;t--;)delete Qt[Xt][Nt[t]];return Qt()},Zt=Object.create||function(e,t){var n;return null!==e?(Kt[Xt]=k(e),n=new Kt,Kt[Xt]=null,n[Yt]=e):n=Qt(),t===undefined?n:Jt(n,t)},en=v.f,tn=St.f,nn=l.f,rn=m.trim,on="Number",an=fn=p[on],sn=fn.prototype,cn=le(Zt(sn))==on,un="trim"in String.prototype,ln=function(e){if("string"==typeof(t=F(e,!1))&&2<t.length){var t,n,i,r,e=(t=un?t.trim():rn(t,3)).charCodeAt(0);if(43===e||45===e){if(88===(n=t.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(t.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+t}for(var o,a=t.slice(2),s=0,c=a.length;s<c;s++)if((o=a.charCodeAt(s))<48||r<o)return NaN;return parseInt(a,i)}}return+t};if(!fn(" 0o1")||!fn("0b1")||fn("+0x1")){for(var dn,fn=function Number(e){var e=arguments.length<1?0:e,t=this;return t instanceof fn&&(cn?u(function(){sn.valueOf.call(t)}):le(t)!=on)?It(new an(ln(e)),t,fn):ln(e)},pn=a?en(an):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),hn=0;pn.length>hn;hn++)h(an,dn=pn[hn])&&!h(fn,dn)&&nn(fn,dn,tn(an,dn));(fn.prototype=sn).constructor=fn,qe(p,on,fn)}var gn=Array.isArray||function(e){return"Array"==le(e)},vn=d("species"),yn=function(e){var t;return gn(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!gn(t.prototype)||(t=undefined),c(t)&&null===(t=t[vn])&&(t=undefined)),t===undefined?Array:t},mn=function(e,t){return new(yn(e))(t)},m=function(d,e){var f=1==d,p=2==d,h=3==d,g=4==d,v=6==d,y=5==d||v,m=e||mn;return function(e,t,n){for(var i,r,o=rt(e),a=bt(o),s=Ge(t,n,3),c=xe(a.length),u=0,l=f?m(e,c):p?m(e,0):undefined;u<c;u++)if((y||u in a)&&(r=s(i=a[u],u,o),d))if(f)l[u]=r;else if(r)switch(d){case 3:return!0;case 5:return i;case 6:return u;case 2:l.push(i)}else if(g)return!1;return v?-1:h||g?g:l}},wn=m(1),bn=(y(y.P+y.F*!t([].map,!0),"Array",{map:function(e){return wn(this,e,arguments[1])}}),Object.is||function $(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}),_n=(n("search",1,function(i,r,o,a){return[function(e){var t=i(this),n=e==undefined?undefined:e[r];return n!==undefined?n.call(e,t):new RegExp(e)[r](String(t))},function(e){var t=a(o,e,this);if(t.done)return t.value;var t=k(e),e=String(this),n=t.lastIndex,e=(bn(n,0)||(t.lastIndex=0),Pe(t,e));return bn(t.lastIndex,n)||(t.lastIndex=n),null===e?-1:e.index}]}),m(2)),kn=(y(y.P+y.F*!t([].filter,!0),"Array",{filter:function(e){return _n(this,e,arguments[1])}}),d("unscopables")),Sn=Array.prototype,en=(Sn[kn]==undefined&&Ve(Sn,kn,{}),function(e){Sn[kn][e]=!0}),En=m(6),n="findIndex",Tn=!0,t=(n in[]&&Array(1)[n](function(){Tn=!1}),y(y.P+y.F*Tn,"Array",{findIndex:function(e){return En(this,e,1<arguments.length?arguments[1]:undefined)}}),en(n),R(function(e){var n=ge("meta"),t=l.f,i=0,r=Object.isExtensible||function(){return!0},o=!u(function(){return r(Object.preventExtensions({}))}),a=function(e){t(e,n,{value:{i:"O"+ ++i,w:{}}})},s=e.exports={KEY:n,NEED:!1,fastKey:function(e,t){if(!c(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!h(e,n)){if(!r(e))return"F";if(!t)return"E";a(e)}return e[n].i},getWeak:function(e,t){if(!h(e,n)){if(!r(e))return!0;if(!t)return!1;a(e)}return e[n].w},onFreeze:function(e){return o&&s.NEED&&r(e)&&!h(e,n)&&a(e),e}}})),In=(t.KEY,t.NEED,t.fastKey,t.getWeak,t.onFreeze,l.f),xn=d("toStringTag"),Cn=function(e,t,n){e&&!h(e=n?e:e.prototype,xn)&&In(e,xn,{configurable:!0,value:t})},An={f:d},On=l.f,Nn={f:Object.getOwnPropertySymbols},Dn=function(e){var t=zt(e),n=Nn.f;if(n)for(var i,r=n(e),o=wt.f,a=0;r.length>a;)o.call(e,i=r[a++])&&t.push(i);return t},Pn=v.f,Ln={}.toString,Mn="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],n={f:function(e){if(!Mn||"[object Window]"!=Ln.call(e))return Pn(_t(e));try{return Pn(e)}catch(t){return Mn.slice()}}},Rn=t.KEY,jn=St.f,$n=l.f,Wn=n.f,Un=p.Symbol,Fn=p.JSON,Vn=Fn&&Fn.stringify,Bn="prototype",b=d("_hidden"),Hn=d("toPrimitive"),qn={}.propertyIsEnumerable,Gn=fe("symbol-registry"),zn=fe("symbols"),Jn=fe("op-symbols"),Yn=Object[Bn],_="function"==typeof Un,Kn=p.QObject,Xn=!Kn||!Kn[Bn]||!Kn[Bn].findChild,Qn=a&&u(function(){return 7!=Zt($n({},"a",{get:function(){return $n(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=jn(Yn,t);i&&delete Yn[t],$n(e,t,n),i&&e!==Yn&&$n(Yn,t,i)}:$n,Zn=function(e){var t=zn[e]=Zt(Un[Bn]);return t._k=e,t},ei=_&&"symbol"==typeof Un.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof Un},ti=function On(e,t,n){return e===Yn&&ti(Jn,t,n),k(e),t=F(t,!0),k(n),h(zn,t)?(n.enumerable?(h(e,b)&&e[b][t]&&(e[b][t]=!1),n=Zt(n,{enumerable:Fe(0,!1)})):(h(e,b)||$n(e,b,Fe(1,{})),e[b][t]=!0),Qn(e,t,n)):$n(e,t,n)},ni=function(e,t){k(e);for(var n,i=Dn(t=_t(t)),r=0,o=i.length;r<o;)ti(e,n=i[r++],t[n]);return e},Kn=function(e){var t=qn.call(this,e=F(e,!0));return!(this===Yn&&h(zn,e)&&!h(Jn,e))&&(!(t||!h(this,e)||!h(zn,e)||h(this,b)&&this[b][e])||t)},ii=function(e,t){var n;if(e=_t(e),t=F(t,!0),e!==Yn||!h(zn,t)||h(Jn,t))return n=jn(e,t),!n||!h(zn,t)||h(e,b)&&e[b][t]||(n.enumerable=!0),n},ri=function(e){for(var t,n=Wn(_t(e)),i=[],r=0;n.length>r;)h(zn,t=n[r++])||t==b||t==Rn||i.push(t);return i},oi=function(e){for(var t,n=e===Yn,i=Wn(n?Jn:_t(e)),r=[],o=0;i.length>o;)!h(zn,t=i[o++])||n&&!h(Yn,t)||r.push(zn[t]);return r};_||(qe((Un=function Symbol(){if(this instanceof Un)throw TypeError("Symbol is not a constructor!");var t=ge(0<arguments.length?arguments[0]:undefined),n=function(e){this===Yn&&n.call(Jn,e),h(this,b)&&h(this[b],t)&&(this[b][t]=!1),Qn(this,t,Fe(1,e))};return a&&Xn&&Qn(Yn,t,{configurable:!0,set:n}),Zn(t)})[Bn],"toString",function ue(){return this._k}),St.f=ii,l.f=ti,v.f=n.f=ri,wt.f=Kn,Nn.f=oi,a&&qe(Yn,"propertyIsEnumerable",Kn,!0),An.f=function(e){return Zn(d(e))}),y(y.G+y.W+y.F*!_,{Symbol:Un});for(var ai="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),si=0;ai.length>si;)d(ai[si++]);for(var ci,ui,li=zt(d.store),di=0;li.length>di;)ci=li[di++],ui=void 0,ui=de.Symbol||(de.Symbol=p.Symbol||{}),"_"==ci.charAt(0)||ci in ui||On(ui,ci,{value:An.f(ci)});y(y.S+y.F*!_,"Symbol",{"for":function(e){return h(Gn,e+="")?Gn[e]:Gn[e]=Un(e)},keyFor:function(e){if(!ei(e))throw TypeError(e+" is not a symbol!");for(var t in Gn)if(Gn[t]===e)return t},useSetter:function(){Xn=!0},useSimple:function(){Xn=!1}}),y(y.S+y.F*!_,"Object",{create:function(e,t){return t===undefined?Zt(e):ni(Zt(e),t)},defineProperty:ti,defineProperties:ni,getOwnPropertyDescriptor:ii,getOwnPropertyNames:ri,getOwnPropertySymbols:oi}),Fn&&y(y.S+y.F*(!_||u(function(){var e=Un();return"[null]"!=Vn([e])||"{}"!=Vn({a:e})||"{}"!=Vn(Object(e))})),"JSON",{stringify:function(e){for(var t,n,i=[e],r=1;r<arguments.length;)i.push(arguments[r++]);if(n=t=i[1],(c(t)||e!==undefined)&&!ei(e))return gn(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!ei(t))return t}),i[1]=t,Vn.apply(Fn,i)}}),Un[Bn][Hn]||Ve(Un[Bn],Hn,Un[Bn].valueOf),Cn(Un,"Symbol"),Cn(Math,"Math",!0),Cn(p.JSON,"JSON",!0);var fi=function(e,t,n,i){try{return i?t(k(n)[0],n[1]):t(n)}catch(r){i=e["return"];throw i!==undefined&&k(i.call(e)),r}},pi={},hi=d("iterator"),gi=Array.prototype,vi=function(e){return e!==undefined&&(pi.Array===e||gi[hi]===e)},yi=function(e,t,n){t in e?l.f(e,t,Fe(0,n)):e[t]=n},mi=d("iterator"),wi=de.getIteratorMethod=function(e){if(e!=undefined)return e[mi]||e["@@iterator"]||pi[Ne(e)]},bi=d("iterator"),_i=!1;try{var ki=[7][bi]();ki["return"]=function(){_i=!0},Array.from(ki,function(){throw 2})}catch(M){}for(var v=function(e,t){if(!t&&!_i)return!1;var n=!1;try{var i=[7],r=i[bi]();r.next=function(){return{done:n=!0}},i[bi]=function(){return r},e(i)}catch(M){}return n},Si=(y(y.S+y.F*!v(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,i,r,o=rt(e),e="function"==typeof this?this:Array,a=arguments.length,s=1<a?arguments[1]:undefined,c=s!==undefined,u=0,l=wi(o);if(c&&(s=Ge(s,2<a?arguments[2]:undefined,2)),l==undefined||e==Array&&vi(l))for(n=new e(t=xe(o.length));u<t;u++)yi(n,u,c?s(o[u],u):o[u]);else for(r=l.call(o),n=new e;!(i=r.next()).done;u++)yi(n,u,c?fi(r,s,[i.value,u],!0):i.value);return n.length=u,n}}),{}),Ei=(Ve(Si,d("iterator"),function(){return this}),i("IE_PROTO")),Ti=Object.prototype,Ii=Object.getPrototypeOf||function(e){return e=rt(e),h(e,Ei)?e[Ei]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Ti:null},xi=d("iterator"),Ci=(!([].keys&&"next"in[].keys())),Ai="values",Oi=function(){return this},Ni=function(e,t,n,i,r,o,a){l=t,(u=n).prototype=Zt(Si,{next:Fe(1,i)}),Cn(u,l+" Iterator");var s,c,i=function(e){if(!Ci&&e in f)return f[e];switch(e){case"keys":return function Ft(){return new n(this,e)};case Ai:return function(){return new n(this,e)}}return function(){return new n(this,e)}},u=t+" Iterator",l=r==Ai,d=!1,f=e.prototype,p=f[xi]||f["@@iterator"]||r&&f[r],h=p||i(r),g=r?l?i("entries"):h:undefined,v="Array"==t&&f.entries||p;if(v&&(e=Ii(v.call(new e)))!==Object.prototype&&e.next&&(Cn(e,u,!0),"function"!=typeof e[xi]&&Ve(e,xi,Oi)),l&&p&&p.name!==Ai&&(d=!0,h=function(){return p.call(this)}),!Ci&&!d&&f[xi]||Ve(f,xi,h),pi[t]=h,pi[u]=Oi,r)if(s={values:l?h:i(Ai),keys:o?h:i("keys"),entries:g},a)for(c in s)c in f||qe(f,c,s[c]);else y(y.P+y.F*(Ci||d),t,s);return s},Di=B(!0),Pi=(Ni(String,"String",function(e){this._t=String(e),this._i=0},function(){var e=this._t,t=this._i;return t>=e.length?{value:undefined,done:!0}:(e=Di(e,t),this._i+=e.length,{value:e,done:!1})}),function(e,t){return{value:t,done:!!e}}),Li=Ni(Array,"Array",function(e,t){this._t=_t(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=undefined,Pi(1)):Pi(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),Mi=(pi.Arguments=pi.Array,en("keys"),en("values"),en("entries"),d("iterator")),Ri=d("toStringTag"),ji=pi.Array,$i={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Wi=zt($i),Ui=0;Ui<Wi.length;Ui++){var Fi,Vi=Wi[Ui],Bi=$i[Vi],Hi=p[Vi],qi=Hi&&Hi.prototype;if(qi&&(qi[Mi]||Ve(qi,Mi,ji),qi[Ri]||Ve(qi,Ri,Vi),pi[Vi]=ji,Bi))for(Fi in Li)qi[Fi]||qe(qi,Fi,Li[Fi],!0)}var Gi={sidLabel:"PTX_SID",funName:"ptengine",events:["track","page","identify","createCrossDomainUrl"],dataLayer:"_pt_data_layer",antiFlickerClassName:"pt-async-hide",previewToken:"preview_ptx_token",engageEditorToken:"ptengine_engage_editor_token",campaignEditorName:"ptengine_campaign_editor",engageControlgroupToken:"ptengine_engage_control_group"},n=!1;try{n=(window._pt_sp_2||[]).some(function(e){return!(!e||-1===e.indexOf(","))&&("setOuterIframeEnabled"===(e=e.split(","))[0]&&"1"===e[1])})}catch(M){}var S={na:n?window.top.navigator:navigator,doc:n?window.top.document:document,win:n?window.top:window,loc:n?window.top.location:location},zi=("https:"===S.loc.protocol?"https://":"http://")+"egjsmonitor.ptengine.jp";function Ji(){var e=S.na.platform.toLowerCase();if(-1<e.indexOf("win"))return 1;for(var t=["mac68k","macppc","macintosh","macintel"],n=0;n<t.length;n++)if(e===t[n])return 1}function Yi(e){for(var t=["AIX","Amiga","BeOS","DragonFly","FreeBSD","GNU","Haiku","HP-UX","IRIX","Joli","Java","Macintosh","Minix","MorphOS","NetBSD","OpenBSD","PClinuxOS","QNX x86pc","SunOS","Ubuntu","Mint","Red Hat","Slackware","SUSE","PCLinuxOS","Debian","Fedora","CentOS","Vine","Arch Linux","Gentoo","Kanotix","Mandriva"],n=0;n<t.length;n++)if(-1<e.indexOf(t[n]))return 1}function Ki(e){for(var t=["Android","AROS","Bada","BlackBerry","Chromium","CrOS","Danger Hiptop","Inferno","iPhone","iPad","iPod","Nintendo DS","Nintendo Wii","Palm OS","PLAYSTATION","Syllable","SymbOS","Symbian","Tizen","webOS","WebTV","Windows CE","Windows Mobile","Windows Phone","Xbox"],n=0;n<t.length;n++)if(-1<e.indexOf(t[n]))return 1}function Xi(){try{var e=S.win.screen.width;return!e||isNaN(parseInt(e,10))?0:parseInt(e,10)}catch(t){return 0}}function Qi(){var e=self.innerWidth||S.doc.body.clientWidth;return e=isNaN(e)?0:parseInt(e,10)}function Zi(){try{var e=S.win.screen.height;return!(e=1===ur()&&2e3<e||4===ur()&&3e3<e?function(){try{var e=self.innerHeight||S.doc.body.clientHeight;return e=isNaN(e)?0:parseInt(e,10)}catch(t){return 0}}():e)||isNaN(parseInt(e,10))?0:parseInt(e,10)}catch(t){return 0}}function er(){var e=[];return 1===ur()||4===ur()?(e.push("."+[Qi(),Zi()].sort()[0]),e.push("."+[Qi(),Zi()].sort()[1])):(e.push("."+Xi()),e.push("."+Zi())),e.push("."+(S.win.screen.colorDepth||0)),e.push("."+function(){try{var e=(new Date).getTimezoneOffset();return e||0===e?"GMT"+(e<=0?"+":"")+e/60*-1:""}catch(t){return""}}().replace(/\./g,"_")),e.push("."+(S.na.platform||"").replace(/\./g,"_").toLowerCase()),e.push("."+(S.na.language||S.na.browserLanguage||"").replace(/\./g,"_").toLowerCase()),e.push("."+(S.doc.characterSet||S.doc.charset||"").replace(/\./g,"_").toLowerCase()),e.join("")}function tr(e){function s(e,t){return e<<t|e>>>32-t}function c(e,t){var n=2147483648&e,i=2147483648&t,r=1073741824&e,o=1073741824&t,e=(1073741823&e)+(1073741823&t);return r&o?2147483648^e^n^i:r|o?1073741824&e?3221225472^e^n^i:1073741824^e^n^i:e^n^i}function t(e,t,n,i,r,o,a){return e=c(e,c(c(t&n|~t&i,r),a)),c(s(e,o),t)}function n(e,t,n,i,r,o,a){return e=c(e,c(c(t&i|n&~i,r),a)),c(s(e,o),t)}function i(e,t,n,i,r,o,a){return e=c(e,c(c(t^n^i,r),a)),c(s(e,o),t)}function r(e,t,n,i,r,o,a){return e=c(e,c(c(n^(t|~i),r),a)),c(s(e,o),t)}function o(e){for(var t="",n="",i=0;i<=3;i++)t+=(n="0"+(e>>>8*i&255).toString(16)).substr(n.length-2,2);return t}Array();for(var a,u,l,d,f=function(e){for(var t,n=e.length,i=16*(1+((i=n+8)-i%64)/64),r=Array(i-1),o=0,a=0;a<n;)o=a%4*8,r[t=(a-a%4)/4]=r[t]|e.charCodeAt(a)<<o,a++;return r[t=(a-a%4)/4]=r[t]|128<<(o=a%4*8),r[i-2]=n<<3,r[i-1]=n>>>29,r}(e),p=1732584193,h=4023233417,g=2562383102,v=271733878,y=0;y<f.length;y+=16)p=t(a=p,u=h,l=g,d=v,f[y+0],7,3614090360),v=t(v,p,h,g,f[y+1],12,3905402710),g=t(g,v,p,h,f[y+2],17,606105819),h=t(h,g,v,p,f[y+3],22,3250441966),p=t(p,h,g,v,f[y+4],7,4118548399),v=t(v,p,h,g,f[y+5],12,1200080426),g=t(g,v,p,h,f[y+6],17,2821735955),h=t(h,g,v,p,f[y+7],22,4249261313),p=t(p,h,g,v,f[y+8],7,1770035416),v=t(v,p,h,g,f[y+9],12,2336552879),g=t(g,v,p,h,f[y+10],17,4294925233),h=t(h,g,v,p,f[y+11],22,2304563134),p=t(p,h,g,v,f[y+12],7,1804603682),v=t(v,p,h,g,f[y+13],12,4254626195),g=t(g,v,p,h,f[y+14],17,2792965006),p=n(p,h=t(h,g,v,p,f[y+15],22,1236535329),g,v,f[y+1],5,4129170786),v=n(v,p,h,g,f[y+6],9,3225465664),g=n(g,v,p,h,f[y+11],14,643717713),h=n(h,g,v,p,f[y+0],20,3921069994),p=n(p,h,g,v,f[y+5],5,3593408605),v=n(v,p,h,g,f[y+10],9,38016083),g=n(g,v,p,h,f[y+15],14,3634488961),h=n(h,g,v,p,f[y+4],20,3889429448),p=n(p,h,g,v,f[y+9],5,568446438),v=n(v,p,h,g,f[y+14],9,3275163606),g=n(g,v,p,h,f[y+3],14,4107603335),h=n(h,g,v,p,f[y+8],20,1163531501),p=n(p,h,g,v,f[y+13],5,2850285829),v=n(v,p,h,g,f[y+2],9,4243563512),g=n(g,v,p,h,f[y+7],14,1735328473),p=i(p,h=n(h,g,v,p,f[y+12],20,2368359562),g,v,f[y+5],4,4294588738),v=i(v,p,h,g,f[y+8],11,2272392833),g=i(g,v,p,h,f[y+11],16,1839030562),h=i(h,g,v,p,f[y+14],23,4259657740),p=i(p,h,g,v,f[y+1],4,2763975236),v=i(v,p,h,g,f[y+4],11,1272893353),g=i(g,v,p,h,f[y+7],16,4139469664),h=i(h,g,v,p,f[y+10],23,3200236656),p=i(p,h,g,v,f[y+13],4,681279174),v=i(v,p,h,g,f[y+0],11,3936430074),g=i(g,v,p,h,f[y+3],16,3572445317),h=i(h,g,v,p,f[y+6],23,76029189),p=i(p,h,g,v,f[y+9],4,3654602809),v=i(v,p,h,g,f[y+12],11,3873151461),g=i(g,v,p,h,f[y+15],16,530742520),p=r(p,h=i(h,g,v,p,f[y+2],23,3299628645),g,v,f[y+0],6,4096336452),v=r(v,p,h,g,f[y+7],10,1126891415),g=r(g,v,p,h,f[y+14],15,2878612391),h=r(h,g,v,p,f[y+5],21,4237533241),p=r(p,h,g,v,f[y+12],6,1700485571),v=r(v,p,h,g,f[y+3],10,2399980690),g=r(g,v,p,h,f[y+10],15,4293915773),h=r(h,g,v,p,f[y+1],21,2240044497),p=r(p,h,g,v,f[y+8],6,1873313359),v=r(v,p,h,g,f[y+15],10,4264355552),g=r(g,v,p,h,f[y+6],15,2734768916),h=r(h,g,v,p,f[y+13],21,1309151649),p=r(p,h,g,v,f[y+4],6,4149444226),v=r(v,p,h,g,f[y+11],10,3174756917),g=r(g,v,p,h,f[y+2],15,718787259),h=r(h,g,v,p,f[y+9],21,3951481745),p=c(p,a),h=c(h,u),g=c(g,l),v=c(v,d);return o(p)+o(h)+o(g)+o(v)}function nr(e){var t=-1<S.loc.href.indexOf("pt-device"),n=function(e){var e=e?e.split("?")[1]:S.loc.search.slice(1),t={};if(e)for(var n=(e=e.split("#")[0]).split("&"),i=0;i<n.length;i++){var r,o,a=n[i].split("="),s=a[0],a="undefined"==typeof a[1]||a[1];s=s.toLowerCase(),"string"==typeof a&&(a=a.toLowerCase()),s.match(/\[(\d+)?\]$/)?(r=s.replace(/\[(\d+)?\]/,""),t[r]||(t[r]=[]),s.match(/\[\d+\]$/)?(o=/\[(\d+)\]/.exec(s)[1],t[r][o]=a):t[r].push(a)):t[s]?(t[s]&&"string"==typeof t[s]&&(t[s]=[t[s]]),t[s].push(a)):t[s]=a}return t}(S.loc.href),t=t?n["pt-device"]:"",n=e.method,i=e.data,r=e.url,o=e.callback,a=e.contentType,e=e["async"],r=t?r+"?traceId="+rr()+"&pt-device="+t:r+"?traceId="+rr(),n=n||"GET",s=new XMLHttpRequest;"withCredentials"in s?s.open(n,r,!0):"undefined"!=typeof XDomainRequest?(new S.win.XDomainRequest,ne("xhr"),s.open(n,r,e)):ne("xhr"),a&&s.setRequestHeader("Content-Type",a),s.setRequestHeader("Strict-Transport-Security","max-age=0; includeSubDomains"),s&&(o&&(s.onreadystatechange=function(){4!==s.readyState||200!==s.status&&201!==s.status||o(s.responseText)}),s.send(i))}function ir(e){var t=e.data,n=e.url,i=e.callback;navigator.sendBeacon&&t.length<65536?(n=e.url+"?traceId="+rr(),navigator.sendBeacon(n,t)?i&&i():nr(e)):nr(e)}function rr(){var e=S.na.userAgent,t=(new Date).getTime(),n=Math.random(),i=S.doc.documentElement.clientWidth||S.doc.body.clientWidth||0,r=0;try{r=S.win.innerHeight||S.doc.documentElement.clientHeight||S.doc.body.clientHeight}catch(a){}var o=ar();return tr("ua=".concat(e,"&ts=").concat(t,"&random=").concat(n,"&bw=").concat(i,"&bh=").concat(r,"&plugins=").concat(o))}function or(e){try{var t=[er()];return t.push("&ua="+(n=S.na.userAgent||"",i=!1,(encodeURIComponent instanceof Function?i?encodeURI:encodeURIComponent:escape)(n))),t.push("&bw="+(S.doc.documentElement.clientWidth||S.doc.body.clientWidth||0)),t.push("&bh="+function(){try{var e=S.win.innerHeight||S.doc.documentElement.clientHeight||S.doc.body.clientHeight;return!e||isNaN(parseInt(e,10))?0:parseInt(e,10)}catch(t){return 0}}()),t.push("&pi="+ar()),t.push("&ts="+e),t.join("")||(new Date).getTime()+""+Math.random()}catch(r){return(new Date).getTime()+""+Math.random()}var n,i}function ar(){var e="",t=S.na.plugins;if(0!==t.length){for(var n=[],i=0;i<t.length;i++){n[i]=t[i].name+";"+t[i].description+";"+t[i].filename+";";for(var r=0;r<t[i].length;r++)n[i]+="("+t[i][r].description+";"+t[i][r].type+";"+t[i][r].suffixes+")";n[i]+="."}e=n.sort().join("")}return e}var sr={getItem:function(e){return decodeURIComponent(S.doc.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[-.+*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(e,t,n,i,r,o){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var a="";if(n)switch(n.constructor){case Number:var s,a=n===Infinity?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":((s=new Date).setTime(s.getTime()+24*n*60*60*1e3),"; expires="+s.toUTCString());break;case String:a="; expires="+n;break;case Date:a="; expires="+n.toUTCString()}return S.doc.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+a+(r?"; domain="+r:"")+(i?"; path="+i:"")+(o?"; secure":""),!0},removeItem:function(e,t,n){return!(!e||!this.hasItem(e))&&(S.doc.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(n?"; domain="+n:"")+(t?"; path="+t:""),!0)},hasItem:function(e){return new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[-.+*]/g,"\\$&")+"\\s*\\=").test(S.doc.cookie)},keys:function Ft(){for(var e=S.doc.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),t=0;t<e.length;t++)e[t]=decodeURIComponent(e[t]);return e}};function cr(e,t){e=sr.getItem("ptx_"+e);return e&&-1!==e.indexOf(t)?e.split(t+"=")[1].split("&")[0]:""}function E(e,t){return e&&-1!==e.indexOf(t)?e.split(t+"=")[1].split("&")[0]:""}function ur(){try{var e=S.na.userAgent;return e?Ji()||Yi(e)?!Ki(e)||-1<e.indexOf("iPad")||1e3<=Math.min(Xi(),S.win.screen.height)?2:1:-1<e.indexOf("iPad")||1e3<=Math.min(Xi(),S.win.screen.height)?2:1:0}catch(t){return 0}}function lr(){try{var e=S.na.userAgent;return e?Ji()||Yi(e)?Ki(e)?3:e.match(/.*MSIE.*Windows NT 6\.2;.*Touch\).*/)?4:2:-1<e.indexOf("iPad")||1e3<=Math.min(Xi(),S.win.screen.height)?4:1:0}catch(t){return 0}}function dr(t){if("string"==typeof t)return["?","^","$","*","+","(",")","|"].map(function(e){e=new RegExp("(\\"+e+")","g");t=t.replace(e,"\\$1")}),t}function fr(e){e=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),e=S.loc.search.substr(1).match(e);return null!=e?decodeURIComponent(e[2]):null}function T(e,t,n){e.addEventListener?e.addEventListener(t,n,!0):e.attachEvent&&e.attachEvent("on"+t,n)}function pr(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)}function hr(){return window.PTX_PREVIEW_ID?"ptx_preview_"+window.PTX_PREVIEW_ID:window.PT_ENGAGE_IN_DEBUG?"ptx_engager_debug":"ptx_engager"}function gr(e,t){var n,i;e&&(n=hr(),(i=JSON.parse(localStorage.getItem(n)||"{}"))[e]=t,localStorage.setItem(n,JSON.stringify(i)))}function vr(e){var t,n;return e&&(n=hr(),n=JSON.parse(localStorage.getItem(n)||"{}"),Object.prototype.hasOwnProperty.call(n,e)&&(t=n[e])),t}function P(){localStorage.getItem("ptx_enableLog")}function yr(){return/MicroMessenger/i.test(S.na.userAgent)}function mr(e,t){var n=S.loc.href;(new Image).src="".concat(zi,"?p=").concat(n,"t=").concat(e,"&ex=").concat(t)}function wr(){return localStorage.getItem(Gi.sidLabel)}function br(n,i){var r=null;return function(){var e=this,t=arguments;r&&(clearTimeout(r),r=null),r=setTimeout(function(){n.apply(e,t)},i)}}var Kn=function(){function e(){f(this,e),this.timezone=""}return s(e,[{key:"setTimeZone",value:function(e){this.timezone=e}},{key:"getProfileTimeStamp",value:function(){var e,t,n,i=0;return this.timezone.trim()&&(e=60*(new Date).getTimezoneOffset()*1e3*-1,2==(n=this.timezone.replace(":"," ").split(" ")).length&&(t=60*Number(n[0].slice(1))*60*1e3+60*Number(n[1])*1e3,t=Number(n[0].slice(0,1)+t)),n=e-t,i=Date.now()-n),i}}]),e}(),I=new(function(){function e(){f(this,e),this.cache={}}return s(e,[{key:"get",value:function(e){return this.cache[e]}},{key:"set",value:function(e,t){this.cache[e]=t}},{key:"clear",value:function(){this.cache={}}}]),e}()),_r=new Kn;function kr(e){var t,n={},i=function(e,t){var n,i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=ae(e))||t&&e&&"number"==typeof e.length)return i&&(e=i),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,a=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){a=!0,r=e},f:function(){try{o||null==i["return"]||i["return"]()}finally{if(a)throw r}}}}(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;if(Object(r)!==r)throw new TypeError("iterable for fromEntries should yield objects");var o=r[0],a=r[1];Object.defineProperty(n,o,{configurable:!0,enumerable:!0,writable:!0,value:a})}}catch(s){i.e(s)}finally{i.f()}return n}function Sr(e,t,n){var i=document.createElement("textarea");i.style.position="fixed",i.style.top=0,i.style.left=0,i.style.width="2em",i.style.height="2em",i.style.padding=0,i.style.border="none",i.style.outline="none",i.style.boxShadow="none",i.style.background="transparent",i.value=e,document.body.appendChild(i),i.focus(),i.select();try{document.execCommand("copy");"function"==typeof t&&t()}catch(r){"function"==typeof n&&n()}document.body.removeChild(i)}function Er(e,t,n){var i=!(3<arguments.length&&arguments[3]!==undefined)||arguments[3];e.addEventListener?e.addEventListener(t,n,i):e.attachEvent&&e.attachEvent("on"+t,n)}function Tr(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)}function Ir(e){var e=0<arguments.length&&e!==undefined?e:window.event;return(null!=e&&e.composed?e.composedPath()[0]:null==e?void 0:e.target)||(null==(e=window.event)?void 0:e.srcElement)}function xr(e){var t=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,n=e.split("."),n=((4<(n=n[n.length-1]).length||"com"===n||"org"===n)&&(t=/[a-z0-9][a-z0-9-]*\.[a-z]+$/i),e.match(t));return n?n[0]:""}function Cr(e,t,n){if(!e||!t)return!1;if(Or(e))return Cr(Nr(e),t,n);if(null!=e&&e.hasAttribute(t)){if(!n)return e;if(e.getAttribute(t)===n)return e;if(e.parentNode&&"body"!==e.nodeName.toLowerCase())return Cr(e.parentNode,t,n)}else if(e.parentNode&&"body"!==e.nodeName.toLowerCase())return Cr(e.parentNode,t,n);return!1}function Ar(e,t){for(var n,i=(null==(n=window.ptConfig)?void 0:n.ptxEventList)||[],r=[{eventName:"",properties:""},{eventName:"",properties:""}],o=t?Cr(e,t):e,a=0;a<i.length;a++)try{for(var s=i[a],c=0;c<s.events.length;c++){var u=s.events[c],l=Pr(u.selector);l===o&&(r[0].eventName=s.eventName,u.properties&&(r[0].properties=u.properties)),!function d(e,t){return!(!e||!t)&&(e===t||(Or(t)?d(e,Nr(t)):!(!t.parentNode||"body"===e.nodeName.toLowerCase())&&d(e,t.parentNode)))}(l,o)||"form-element"===o.getAttribute("data-silex-type")||"insert.close"===o.getAttribute("data-menu-action")||(r[1].eventName=s.eventName,u.properties&&(r[1].properties=u.properties))}}catch(M){}return r[0].eventName?r[0]:r[1]}function Or(e){return"[object ShadowRoot]"===(null==e?void 0:e.toString())}function Nr(e){return null==e?void 0:e.host}function Dr(){return Boolean(document.head.createShadowRoot||document.head.attachShadow)}function Pr(e){if(!(i=document.querySelector(e)))for(var t=["pt-experience"],n=0;n<t.length;n++){var i,r=document.querySelector(t[n]);if(i=i||(null==r||null==(r=r.shadowRoot)?void 0:r.querySelector(e)))break}return i}function Lr(e){var t=S.doc.querySelector("pt-experience");return(null==t||null==(t=t.shadowRoot)?void 0:t.querySelectorAll(e))||[]}function Mr(e){var t=[];return e.querySelectorAll("[tabindex]").forEach(function(e){0<e.getAttribute("tabindex")&&t.push(e)}),t}function Rr(e){var t=[];return"all"!=e&&"normal"!=e||t.push.apply(t,re(Mr(S.doc))),"all"!=e&&"shadow-root"!=e||(e=Lr('[id^="ptxEngage_"]')).length&&e.forEach(function(e){t.push.apply(t,re(Mr(e)))}),t.sort(function(e,t){return e.getAttribute("tabindex")-t.getAttribute("tabindex")}),t}function jr(e,t){var n,t=1<arguments.length&&t!==undefined?t:undefined,i=Rr("all"),r=S.doc.querySelector("pt-experience");if("Escape"===e)for(var o=0;o<i.length;o++)if("insert.popup"==i[o].getAttribute("data-menu-action")){i[o].classList.add("data-focus"),i[o].focus();break}"Tab"==e&&"first"==t&&(n=r&&(null==i?void 0:i[0].getAttribute("tabindex"))===r.getAttribute("tabindex")?null==i?void 0:i[1]:null==i?void 0:i[0])&&(n.classList.add("data-focus"),n.focus()),"render"==e&&"shadow-root"==t&&(r.focus(),r.removeAttribute("style"))}function $r(){S.doc.querySelectorAll(".data-focus").forEach(function(e){e.classList.remove("data-focus")}),Lr(".data-focus").forEach(function(e){e.classList.remove("data-focus")})}function Wr(){var t=[],e=S.doc.querySelectorAll('[id^="ptxEngage_'),n=Lr('[id^="ptxEngage_');if([].concat(re(e),re(n)).forEach(function(e){e.hasChildNodes()&&(e.setAttribute("tabindex",-1),e.setAttribute("style","position: fixed"),t.push(e))}),t.length){for(var i,r,e=t.length,o=e-1;0<=o;o--)if(-1===(null==(r=t[o].getAttribute("id"))?void 0:r.indexOf("ptxEngage_stickybar_"))){i=t[o];break}(i||t[e-1]).focus(),t.forEach(function(e){e.removeAttribute("style")})}}function Ur(e){for(var t=0,n=0,i=e;null!==i;)t+=i.offsetLeft,n+=i.offsetTop,i=i.offsetParent;var r=Math.max(S.doc.body.scrollHeight,S.doc.documentElement.scrollHeight);return{left:t,top:n,right:Math.max(S.doc.body.scrollWidth,S.doc.documentElement.scrollWidth)-t-e.offsetWidth,bottom:r-n-e.offsetHeight}}function Fr(e,t){var n,i,r,o;2===lr()&&(r=t,(i=e).querySelector('[data-menu-action="insert.popup"]')&&i.querySelector('[data-menu-action="insert.popup"]').setAttribute("tabindex",100*i.getAttribute("focusindex")),o=[],i.querySelectorAll('[data-engage-block] , [data-menu-action="insert.button"], [data-menu-action="insert.close"] , a , link , button , input , select , textarea').forEach(function(t){for(var e in r){var n=t.getAttribute("data-engage-block");n&&r[e]!==n||0!=o.length&&o.some(function(e){return e.dom.contains(t)})||o.push({dom:t,position:G({},Ur(t))})}}),i.querySelectorAll("[data-engage-action]").forEach(function(e){o.push({dom:e,position:G({},Ur(e))})}),o.sort(function(e,t){return e.position.top!=t.position.top?e.position.top-t.position.top:e.position.left-t.position.left}),o.forEach(function(e,t){e.dom.setAttribute("tabindex",100*i.getAttribute("focusindex")+t+1)}),(t=S.doc.querySelector("pt-experience"))&&0!==(n=Rr("shadow-root")).length&&(t.setAttribute("tabindex",n[0].getAttribute("tabindex")-1),t.setAttribute("style","position: fixed")),Or(null==(n=e)||null==(n=n.parentNode)?void 0:n.parentNode)?jr("render","shadow-root"):Wr())}function Vr(){var t=this;this.middlewares=[],this.events={},this.on("run.setting",function(e){t.run(e)})}Vr.prototype.on=function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},Vr.prototype.off=function(e){this.events[e]&&delete this.events[e]},Vr.prototype.emit=function(e,t){var n=this.events[e];if(!n||0===n.length)return!1;for(var i,r=0;i=n[r++];)i.call(this,t)},Vr.prototype.use=function(e){return this.middlewares.push(e),this},Vr.prototype.init=function(){S.win.$$__ptx_engage_$=this},Vr.prototype.run=function(e){if(!e)return!1;var t=this,n={window:S.win,setting:e,engager:t},i=0;!function r(){var e=t.middlewares[i++];e&&e(n,r)}()};ii="keys",ri=function(){return function Ft(e){return zt(rt(e))}},Br=(de.Object||{})[ii]||Object[ii],(oi={})[ii]=ri(Br),y(y.S+y.F*u(function(){Br(1)}),"Object",oi);var Br,Hr=m(5),_="find",qr=!0,Gr=(_ in[]&&Array(1)[_](function(){qr=!1}),y(y.P+y.F*qr,"Array",{find:function(e){return Hr(this,e,1<arguments.length?arguments[1]:undefined)}}),en(_),"_pt_link"),zr="_s_",Jr=function Jr(){var e=Xr(),e=e&&e.split(zr),t=window.ptengine&&window.ptengine.__crossDomainProcessCallback;e&&0<e.length&&t&&"function"==typeof t&&t("ptx",e[1],e[0],!1)},Yr=function Yr(){var e=document.referrer,t=location.hostname,n=window.ptengine.__pteSid||wr(),i=(i=Gr,i=new RegExp("(^|&)"+i+"=([^&]*)(&|$)","i"),null!=(i=location.search.substr(1).match(i)||location.hash.substr(1).match(i))?decodeURIComponent(i[2]):null),i=i&&i.split(zr),i=i&&i[2]&&i[2].split(".");return!!(""!==e&&-1==e.indexOf(t)&&i&&0<i.length&&i[0]===n)},Kr=function Kr(e,t){if(e){var n=e.split("#"),i=wr(),r=sr.getItem("ptx_".concat(i)),o=sr.getItem("pt_".concat(i));if(!r&&!o)return e;var a=E(r,"deviceId"),s=E(r,"sessionId"),c=E(r,"vn"),u=E(r,"pvn"),r=E(r,"sact"),l=E(o,"uid"),d=E(o,"nid"),f=E(o,"vid"),p=E(o,"sact"),h=E(o,"vn"),o=E(o,"pvn"),g=window.localStorage&&"function"==typeof window.localStorage.getItem&&window.localStorage.getItem("".concat(i,"_/"))?window.localStorage.getItem("".concat(i,"_/")).replace(/\./g,"*_*").replace(/\?/g,"*_wh_*"):"",i="".concat(i,".").concat(a,".").concat(s,".").concat(c,".").concat(u,".").concat(r),a="".concat(l,".").concat(d,".").concat(f,".").concat(p,".").concat(h,".").concat(o),s="".concat(g).concat(zr).concat(a).concat(zr).concat(i);return 1===n.length&&"HASH"===(t+"").toLocaleUpperCase()?e+="#".concat(Gr,"=").concat(s):(c=n[1]?"#".concat(n[1]):"",e="".concat(n[0]).concat(-1===e.indexOf("?")?"?":"&").concat(Gr,"=").concat(s).concat(c)),e}},Xr=function Xr(){var e,t,n,i,r,o=wr(),a=sr.getItem("ptx_".concat(o));if(a)return e=E(a,"deviceId"),t=E(a,"sessionId"),n=E(a,"vn"),i=E(a,"pvn"),a=E(a,"sact"),r=window.localStorage&&"function"==typeof window.localStorage.getItem&&window.localStorage.getItem("".concat(o,"_/"))?window.localStorage.getItem("".concat(o,"_/")).replace(/\./g,"*_*").replace(/\?/g,"*_wh_*"):"",o="".concat(o,".").concat(e,".").concat(t,".").concat(n,".").concat(i,".").concat(a),"".concat(r).concat(zr).concat(o)},Qr=function Qr(){var e=document.getElementsByTagName("a");0<e.length&&[].map.call(e,function(e){var t=e.getAttribute("href"),n="",i=t&&t.match(/[\#|\?|\&]_pt_link=[^#|^&]*/);t&&i&&(i=t.split(i),n="".concat(i[0]).concat(i[1]||""),e.setAttribute("href",n))})},Zr=function Zr(e){var e=e||(location.protocol+"//"+location.host).toLowerCase()+location.pathname+location.search+location.hash,t=new RegExp(/(\?|\&|\#)_pt_link=([^\&|\#]*)(\&|\#)?/),n=e.match(t);return{page:e=n?"&"===n[3]?e.replace(t,"$1"):e.replace(t,"$3"):e,multiLinkTagArr:n&&n[2]&&n[2].split(zr)}};function eo(){var e,t=null==(t=window)||null==(t=t.ptConfig)?void 0:t.crossAnyDomain,n=xr(S.loc.hostname),i=function(){var e="",t=((window._pt_sp_2||[]).find(function(e){return e&&-1!==e.indexOf(",")?"setDomain"===e.split(",")[0]:""})||"").replace("setDomain",""),n=t.split(",");n.sort(function(e,t){return e.replace(/^https?:\/\//,"").length>t.replace(/^https?:\/\//,"").length?1:-1});for(var i=0;i<n.length;i++)n[i].match(/https?:\/\//)&&n[i].match(/https?:\/\//)[0]!==location.protocol+"//"||-1<location.hostname.indexOf(n[i].replace(/^https?:\/\//,""))&&(e=n[i].replace(/^https?:\/\//,""));"default"!==t&&"http"===location.href.slice(0,4)||(e=location.href.toLowerCase().split("://")[1].split("?")[0].split("/")[0]);return e}();return((window._pt_sp_2||(null==(e=window.ptengine)?void 0:e.__PTEEnabled))&&(null==(e=window.ptengine)?void 0:e.__isNpPackage)&&!/lp(pager)?(dev|staging)?\.ptengine\.(jp|com)/.test(S.loc.href)?i:n)||(t?n:"")}var Hn=(new Date).getTime(),ki=S.win._pt_data_layer||(S.win._pt_data_layer=[]),B=null==(i=window.ptConfig)?void 0:i.silenttimes,x={SILENCEDURATION:1e3*((null==B?void 0:B.ptx)||5)*60,HEARTBEATINTERVAL:15e3,CLICKINTERVAL:3e3,COOKIE_EXPIRES_DAY:1e3,domain:eo(),pageStartTime:Hn,lastUpdateTime:Hn},L={profileId:null,pageId:null,pageviewId:null,deviceId:null,sessionId:null,vn:1,pvn:0},to=(ki.find(function(e){return e["ptx.start"]!==undefined})||{})["ptx.start"]||Hn,no=function no(){var r,o=wr(),e=Zr().multiLinkTagArr,a=Yr(),s=e&&e[2]&&e[2].split(".");o&&(r=[{key:"deviceId",type:"string"},{key:"sessionId",type:"string"},{key:"vn",type:"number"},{key:"pvn",type:"number"}],Object.keys(L).forEach(function(t){var e,n,i=uo(t);"profileId"===t&&i&&sr.removeItem("ptx_".concat(i),"/"),a?("deviceId"===t&&(i=s[1]),"sessionId"===t&&(i=s[2]),"vn"===t&&(i=+s[3]),"pvn"===t&&(i=s[4]?+s[4]+1:1),L[t]=i):((e=r.find(function(e){return e.key===t}))&&(n=cr(o,t))&&(i="number"===e.type?+n:n),L[t]="pvn"===t?i+1:i)}),(e=a?s[5]:cr(o,"sact"))!==undefined&&""!==e&&x.lastUpdateTime-Number(e)>x.SILENCEDURATION&&io("reactivated"),co())},io=function io(e){var t=L.vn,n=L.pvn;"reactivated"===e?(L.vn=t+1,L.pvn=1,L.pageId=uo("pageId"),L.pageviewId=uo("pageviewId"),L.sessionId=uo("sessionId"),L.sact=uo("sact")):"changePage"===e&&(L.pageId=uo("pageId"),L.pageviewId=uo("pageviewId"),L.pvn=n+1),co(),"reactivated"===e&&Jr()},ro=function ro(e,t){x[e]=t,co()},oo=function oo(){return["pageId","profileId","pageviewId","deviceId","sessionId"].every(function(e){return Boolean(L[e])})},ao=function ao(){return 1===L.vn},so=function so(){return Boolean(x.domain)};function co(){var e,t=L.profileId,n=L.sact,i=x.domain;t&&(e=Object.keys(L).map(function(e){var t=L[e];return"".concat(e,"=").concat(t,"&")}),n||e.push("sact=".concat(x.lastUpdateTime)),sr.setItem("ptx_".concat(t),e.join(""),x.COOKIE_EXPIRES_DAY,"/",i))}function uo(e){var t,n,i="",r=new Date,o=r.getTime()+"-"+r.getDate(),a=Zr().page;switch(e){case"pageId":i=lo(a);break;case"profileId":i=wr();break;case"pageviewId":case"sessionId":t=(t="0123456789abcdefghijklmnopqrstuvwxyz").substr(Math.floor(Math.random()*t.length),1),n=lo(function(){for(var e=[],t=0;t<22;t++)e[t]="0123456789abcdefghijklmnopqrstuvwxyz".substr(Math.floor(16*Math.random()),1);return e.join("")}()),i=t+n.substring(1);break;case"deviceId":i=lo(or(o));break;case"vn":i=1;break;case"pvn":i=0;break;case"sact":i=x.lastUpdateTime}return i}function lo(e){e=tr(e);return e&&function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-/",n="",i=0;i<e.length/6-1;)n+=t.charAt(parseInt(e.slice(6*i,6*(i+1)),2).toString(10)),i++;var r=e.slice(6*i,6*(i+1));if(r){for(var o=r.length,i=0;i<6-o;i++)r+="0";n+=t.charAt(parseInt(r,2).toString(10))}return n}(function(e){for(var t="",n="",i=e.length,r=0;r<i;r++){for(var o=(n=parseInt(e.charAt(r),16).toString(2)).length,a=0;a<4-o;a++)n="0"+n;t+=n}return t}(e))}y(y.P,"String",{repeat:function(e){var t=String(Se(this)),n="",i=ke(e);if(i<0||i==Infinity)throw RangeError("Count can't be negative");for(;0<i;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n}});var C=function(){function e(){f(this,e),this.enable=!0}return s(e,[{key:"validate",value:function(){throw{name:"ImplementError",message:"validate method should be implement by "+this.constructor.name}}},{key:"trigger",value:function Ro(e){this.enable&&e&&"function"==typeof e&&e()}},{key:"disable",value:function(){this.enable=!1}},{key:"_getPopupAndCookieId",value:function(e){var t=e.context,e=e.current,n=t.current||{},i=n.engageVersion,n=n.engageId+"--"+(e.popupId||e.currentVersionId);return i||(n=(e=t.current).exp_id),{popup:e,cookieId:n}}}]),e}(),fo=function(){r(t,C);var e=o(t);function t(){return f(this,t),e.apply(this,arguments)}return s(t,[{key:"validate",value:function(e,t){return"Match"===t&&e}}]),t}(),po=function(){r(n,C);var t=o(n);function n(){var e;return f(this,n),(e=t.call(this)).currentTerminalType=ur(),e}return s(n,[{key:"validate",value:function(e,t){switch(t){case"==":return this.currentTerminalType==e;case"!=":return this.currentTerminalType!=e}return!1}}]),n}(),ho=function(){r(t,C);var e=o(t);function t(){return f(this,t),e.apply(this,arguments)}return s(t,[{key:"validate",value:function(e,t){var n=ao()?"NV":"RV";switch(t){case"==":return n==e;case"!=":return n!=e}return!1}}]),t}(),go=function(){r(i,C);var n=o(i);function i(e){var t;return f(this,i),(t=n.call(this)).type=e,t}return s(i,[{key:"validate",value:function(e,t){var n,i=this.type,r=fr(i)||"";switch(r||(r=fr(i=0<(n=i.toLowerCase().split("utm")).length&&"utm".concat(n).replace(",","_"))||""),t){case"==":return r==e;case"!=":return r!=e;case"Rex":return new RegExp(e).test(r);case"[()]":return-1!=r.indexOf(e);case"[(":return new RegExp("^"+e).test(r);case")]":return new RegExp(e+"$").test(r)}return!1}}]),i}(),vo=function(){r(t,C);var e=o(t);function t(){return f(this,t),e.apply(this,arguments)}return s(t,[{key:"validate",value:function(e,t){var n,i=S.doc.referrer;switch(t){case"==":n=i==e;break;case"Rex":n=new RegExp(e).test(i);break;case"[()]":n=-1!=i.indexOf(e);break;case"[(":n=new RegExp("^"+i).test(e);break;case")]":n=new RegExp(i+"$").test(e);break;default:n=!1}return n}}]),t}(),yo=function(){r(t,C);var e=o(t);function t(){return f(this,t),e.apply(this,arguments)}return s(t,[{key:"validate",value:function(e,t){var n,i=S.loc.href;switch(t){case"==":n=i==e||i.slice(0,-1)==e;break;case"Rex":n=new RegExp(e).test(i);break;case"[()]":n=-1!=i.indexOf(e);break;case"![()]":n=-1==i.indexOf(e);break;case"[(":n=new RegExp("^"+dr(e)).test(i);break;case")]":n=new RegExp(dr(e)+"$").test(i);break;default:n=!1}return n}}]),t}(),mo=function(){r(t,C);var e=o(t);function t(){return f(this,t),e.apply(this,arguments)}return s(t,[{key:"validate",value:function(e,t){var n=!1;try{var i=S.loc.href;Array.isArray(t)||(t=JSON.parse(t));for(var r=0,o=t.length;r<o;r++){var a=t[r];switch(a.pattern){case 2:n=new RegExp(a.url).test(i);break;case 3:n=new RegExp("^"+a.url).test(i);break;case 4:n=new RegExp(a.url+"$").test(i);break;case 5:n=a.url==i;break;case 8:n=-1<i.indexOf(a.url)}}}catch(s){}return n}}]),t}(),wo=function(){r(n,C);var t=o(n);function n(){var e;return f(this,n),(e=t.call(this)).currentTerminalType=ur(),e}return s(n,[{key:"validate",value:function(e,t){var n=this,i=e.context,r=i.engager,o=e.current,a=e.renderObj,s=e.container,c=e.engageWrap,u=(e=e.value,function u(e){e.clientY<12&&!yr()&&(a&&s&&c?n.trigger(function(){a.mounted(s,c)}):r.emit("next",{context:i,current:o}))}),l=function l(e){"beforeunload"!==e.state||d||(d=!0,a&&s&&c?n.trigger(function(){a.mounted(s,c)}):r.emit("next",{context:i,current:o}))},d=!1;a?a.leaveHandler="2"==this.currentTerminalType?u:l:o.leaveHandler="2"==this.currentTerminalType?u:l,"=="===t&&e&&("2"==this.currentTerminalType&&setTimeout(function(){T(S.doc,"mousemove",(a||o).leaveHandler)},5e3),"1"!=this.currentTerminalType&&"4"!=this.currentTerminalType||yr()||(history.replaceState("beforeunload",null,null),history.pushState("back",null,null),S.win.addEventListener&&S.win.addEventListener("popstate",(a||o).leaveHandler)))}}]),n}(),bo=function(){r(t,C);var e=o(t);function t(){return f(this,t),e.apply(this,arguments)}return s(t,[{key:"validate",value:function(e,t){var n=this,i=e.context,r=i.engager,o=e.current,a=e.renderObj,s=e.container,c=e.engageWrap;switch(t){case"==":setTimeout(function(){a&&s&&c?n.trigger(function(){a.mounted(s,c)}):r.emit("next",{context:i,current:o})},1e3*+e.value);break;case">=":setTimeout(function(){a&&s&&c?n.trigger(function(){a.mounted(s,c)}):r.emit("next",{context:i,current:o})},1e3*(+e.value+1))}}}]),t}(),_o=function(){r(t,C);var e=o(t);function t(){return f(this,t),e.apply(this,arguments)}return s(t,[{key:"validate",value:function(e,t){var n,i=this,r=e.context,o=r.engager,a=e.current,s=e.renderObj,c=e.container,u=e.engageWrap,l=e.value,d=null,f=!1;(n=function n(){d&&(clearTimeout(d),d=null),d=setTimeout(function(){f||(s&&c&&u?i.trigger(function(){s.mounted(c,u)}):o.emit("next",{context:r,current:a}),f=!0,pr(S.doc,"scroll",n),pr(S.doc,"click",n))},1e3*+l)})(),T(S.doc,"scroll",n),T(S.doc,"click",n)}}]),t}(),ko=function(){r(t,C);var e=o(t);function t(){return f(this,t),e.apply(this,arguments)}return s(t,[{key:"validate",value:function(n,e){var i=this,r=n.context,o=r.current,a=r.engager,s=n.renderObj,c=n.container,u=n.engageWrap,l=(n=+n.value.replace("%",""),!1);T(S.doc,"scroll",function(){setTimeout(function(){var e=parseInt(S.doc.body.scrollHeight,10),t=S.doc.documentElement.scrollTop||S.win.pageYOffset;isNaN(t)&&(t=0);t=(parseFloat(t)+parseInt(S.doc.documentElement.clientHeight,10))/e*100;(Math.abs(t-n)<=2||n<=t)&&!l&&(l=!0,s&&c&&u?i.trigger(function(){s.mounted(c,u)}):a.emit("next",{context:r,current:o}))},50)})}}]),t}(),So=function(){r(t,C);var e=o(t);function t(){return f(this,t),e.apply(this,arguments)}return s(t,[{key:"validate",value:function(e,t){var n,i,r,o=this,a=e.context,s=e.renderObj,c=e.container,u=e.engageWrap,l=a.current||{},d=l.engageVersion,f=l.engageType,l=l.engageId;"3.0"===d||"4.0"===d?(d=a.engager,(e=e.current)&&(n=e.popupId,e.repeat=!0,e.goNext=!1,d.on("showEngage.".concat("POPUP"===f||"STICKY_BAR"===f?l:n),function(){s&&c&&u&&o.trigger(function(){s.mounted(c,u)})}))):(i=a.current,r=a.engager,e=i.engagerId,r.on("showEngagement.".concat(e),function(){s&&c&&u?o.trigger(function(){s.mounted(c,u)}):r.emit("next",{context:a,current:i})}),r.on("toggleEngagement.".concat(e),function(){s&&c&&u?o.trigger(function(){s.mounted(c,u)}):(a&&(a.repeat=!0),r.emit("next",{context:a,current:i}))}))}}]),t}(),Eo=function(){r(t,C);var e=o(t);function t(){return f(this,t),e.apply(this,arguments)}return s(t,[{key:"validate",value:function(e,t){var n=this._getPopupAndCookieId(e),i=n.popup,n=n.cookieId;">"===t&&(+JSON.parse(vr(n)||"{}").seenTimes>=e.value?i.goNext=!1:i.goNext=!0)}}]),t}(),To=function(){r(t,C);var e=o(t);function t(){return f(this,t),e.apply(this,arguments)}return s(t,[{key:"validate",value:function(e,t,n){var i=this._getPopupAndCookieId(e),r=i.popup,i=i.cookieId,i=JSON.parse(vr(i)||"{}"),i=!i.hasClosed||+i.hasClosed<e.value;r.goNext=i,e.popup&&(e.popup.goNext=i)}}]),t}(),Io=function(){r(t,C);var e=o(t);function t(){return f(this,t),e.apply(this,arguments)}return s(t,[{key:"validate",value:function(e,t,n){var i=this._getPopupAndCookieId(e),r=i.popup,i=i.cookieId,i=JSON.parse(vr(i)||"{}");r.goNext=!i.session||!i.session[L.sessionId]||i.session[L.sessionId].frequencySessionTimes!=e.value}}]),t}(),xo=function(){r(t,C);var e=o(t);function t(){return f(this,t),e.apply(this,arguments)}return s(t,[{key:"validate",value:function(e,t){var n=this._getPopupAndCookieId(e),i=n.popup,n=n.cookieId;!!JSON.parse(vr(n)||"{}").formSubmitted==e.value?i.goNext=!1:i.goNext=!0}}]),t}(),Co=function(){r(t,C);var e=o(t);function t(){return f(this,t),e.apply(this,arguments)}return s(t,[{key:"validate",value:function(e,t){var n=this._getPopupAndCookieId(e),i=n.popup,n=n.cookieId,r=JSON.parse(vr(n)||"{}"),o=null;switch(t){case"==":case"!=":o=!!r.hasClicked!=e.value}null!==o&&(e.popup&&(e.popup.goNext=o),i.goNext=o)}}]),t}(),Ao=function(){r(t,C);var e=o(t);function t(){return f(this,t),e.apply(this,arguments)}return s(t,[{key:"validate",value:function(e,t){var n,i=_r.getProfileTimeStamp(),i=i||Date.now(),i=String(i).slice(0,-3);return!(0<(e=Array.isArray(e)?e:[e]).length)||(n=e[0]?i-e[0]:"",(e=e[1]?e[1]-i:"")?0<=e&&0<=n:n&&0<=n)}}]),t}(),Oo=function(){r(t,C);var e=o(t);function t(){return f(this,t),e.apply(this,arguments)}return s(t,[{key:"validate",value:function(e,t){var n=_r.getProfileTimeStamp(),n=(n?new Date(n):new Date).getDay();return 0==(e=Array.isArray(e)?e:[e]).length||7==e.length||-1<e.indexOf(n)}}]),t}(),No=function(){r(t,C);var e=o(t);function t(){return f(this,t),e.apply(this,arguments)}return s(t,[{key:"validate",value:function(e,t){var n,i=_r.getProfileTimeStamp(),i=i?new Date(i):new Date,r=i.getHours(),r=(r=r<10?"0"+r:r)+":"+i.getMinutes(),i=!1;return 0<(e=Array.isArray(e)?e:[e]).length?(n=e[0],e=e[1],n<=r&&r<=e&&(i=!0)):i=!0,i}}]),t}();function Do(e){var t=I.get(e);if(!t){switch(e){case"TerminalType":t=new po;break;case"VisitType":t=new ho;break;case"utmCampaign":case"utmSource":case"utmMedium":case"utmContent":case"utmTerm":t=new go(e);break;case"EntryPage":t=new vo;break;case"URL":t=new yo;break;case"PageGroup":t=new mo;break;case"UserBlur":t=new wo;break;case"UserStay":t=new bo;break;case"UserStop":t=new _o;break;case"ScrollMatch":t=new ko;break;case"ShownByJs":t=new So;break;case"UtmParameter":t=new go;break;case"ClickButton":t=new Co;break;case"SeenTimes":t=new Eo;break;case"CloseTimes":t=new To;break;case"FormSubmitted":t=new xo;break;case"Dater":t=new Ao;break;case"Week":t=new Oo;break;case"Time":t=new No;break;case"AsyncUserProps":t=new fo;break;case"frequencySessionTimes":t=new Io}I.set(e,t)}return t}var Po=function(){function i(e,t,n){f(this,i),this.value=e,this.condition=t,this.validator=n}return s(i,[{key:"setValue",value:function(e){this.value=e}},{key:"setCondition",value:function(e){this.condition=e}},{key:"setValidator",value:function(e){this.validator=e}},{key:"run",value:function(){var e;try{return this.validator.validate(this.value,this.condition)}catch(t){P(t.name,t.message),e=!1}return e}},{key:"disable",value:function(){try{return this.validator.disable()}catch(e){}}}]),i}();function Lo(e,t,n){return new Po(e,t,n)}var Mo=function Mo(e,t){if(P(),t&&Array.isArray(t))for(var n=Lo(),i=0,r=t.length;i<r;i++){var o=t[i],a=o.engageVersion;if("3.0"===a||"4.0"===a){var a=o,s=a.versions,s=(a.heatmapVersion,s&&s[0]);s&&(s&&(a.currentVersionId=s.versionId,e.current=a),e.current.goNext=!0,e.engager.emit("next",e))}else{for(var s=o.timezone,a=o.experiments,c=o.rates,u=a.rate||c,l=0,d=0,f=[],p=0,h=u.length;p<h;p++)f.push({min:100*d,max:100*(d+u[p])}),d+=u[p];for(var c=L.deviceId,g=(P(),function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.join("")}(c)%99),v=0,y=f.length;v<y;v++)if(g>=f[v].min&&g<f[v].max){l=v;break}P(),P(),P();var c=(a.experiment||a)[l],m=(c&&(e.current=c,e.current.engagerId=o.engageId,e.current.isVersionEvent=o.isVersionEvent,e.current.isOriginalVersion=o.isOriginalVersion),e.current),w=!0;if(m.config.session&&0<m.config.session.length)for(var b=0;b<m.config.session.length;b++)if(0===m.config.session[b].status){w=!1;break}if(w){if(P(),m.stopToDisplay=m.stopToDisplay||m.config.stop,m.stopToDisplay&&0<m.stopToDisplay.length)for(var _=m.stopToDisplay,k=0,S=_.length;k<S;k++){var E=_[k];if(n.setValue({value:E.value,current:e.current,context:e}),n.setCondition(E.condition),n.setValidator(Do(E.type)),n.run(),!e.current.goNext){P();break}}else e.current.goNext=!0;P();var T=!0;if(m.displayTime=m.displayTime||m.config.schedule,m.timezone=s||m.config.timezone&&m.config.timezone.profile,m.displayTime&&0<m.displayTime.length){var I=m.displayTime,a=(m.config.timezone||{}).useVisitor;_r.setTimeZone(""),a||_r.setTimeZone(s||""),Array.isArray(I)||(I=[I]);for(var x=0;x<I.length;x++){var C=I[x];if(n.setValue(C.value),n.setValidator(Do(C.type)),P(n.run()),!n.run()){T=!1,P();break}}}if(P(),T&&e.current.goNext)if(m.startToDisplay=m.startToDisplay||m.config.start,m.startToDisplay&&0<m.startToDisplay.length)for(var A=m.startToDisplay,O=0,N=(A=Array.isArray(A)?A:[A]).length;O<N;O++){var D=A[O];n.setValue({value:D.value,current:e.current,context:e}),n.setCondition(D.condition),n.setValidator(Do(D.type)),n.run(),P()}else P(),e.engager.emit("next",e)}}}};function Ro(e,t){var n;S.win.localStorage?(P(),n=e.setting||[],Mo(e,n),t()):P()}function jo(l,e){P(),P(),l.send=function(e,t){var n=t.engagerId,i=t.engagerVerId,r=t.variant||{},o=t.triggerCondition,a=t.track||{},t=t.transport;if("click"===e&&(o="click"),oo()){var s=L.pageId,c=L.pageviewId,s={sid:c,uid:L.deviceId,vid:L.sessionId,pid:s,peid:c,ts:(new Date).getTime(),engagerId:n,engagerVerId:i,triggerCondition:o,engagerType:e,variant:r},c=(S.win.PT_ENGAGE_IN_DEBUG&&(s.previewMode=!0,s.previewId=localStorage.getItem("ptx_previewId")||""),l.engager||S.win.$$__ptx_engage_$);try{c.emit("send.engage",{name:"",id:n,versionId:i,action:e,properties:r,track:a,transport:t})}catch(u){mr("NullException",u)}}},P(),e()}var $o=Object.assign,n=!$o||u(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=$o({},e)[n]||Object.keys($o({},t)).join("")!=i})?function(e,t){for(var n=rt(e),i=arguments.length,r=1,o=Nn.f,a=wt.f;r<i;)for(var s,c=bt(arguments[r++]),u=o?zt(c).concat(o(c)):zt(c),l=u.length,d=0;d<l;)a.call(c,s=u[d++])&&(n[s]=c[s]);return n}:$o,Wo=(y(y.S+y.F,"Object",{assign:n}),"renderedEngageCache"),Uo={DATA_WIDGET_ID:"data-engage-widget-id",MASKLAYERPPREFIX:"pt_mask_",POSITION:"position"},Fo={SELECT:[1,'<select multiple="multiple">',"</select>"],FIELDSET:[1,"<fieldset>","</fieldset>"],MAP:[1,"<map>","</map>"],OBJECT:[1,"<object>","</object>"],TABLE:[1,"<table>","</table>"],TBODY:[2,"<table><tbody>","</tbody></table>"],COLGROUP:[2,"<table><colgroup>","</colgroup></table>"],TR:[3,"<table><tbody><tr>","</tr></tbody></table>"]};function Vo(){var e=S.doc.getElementsByTagName("head")[0];return e||(e=S.doc.createElement("head"),S.doc.body.parentNode.insertBefore(e,S.doc.body)),e}function Bo(e){e=e.querySelector("[".concat(Uo.DATA_WIDGET_ID,"]"));return e&&e.getAttribute(Uo.DATA_WIDGET_ID)||""}function Ho(e,t){var n=I.get(Uo.POSITION)||[],i=!(-1<n.indexOf(t));return i&&(n[n.length]=t,I.set(Uo.POSITION,n)),i}function qo(e){var t=S.doc.querySelector(".engage-layer"),e=(t||(t=S.doc.createElement("div")).classList.add("engage-layer"),"".concat(Uo.MASKLAYERPPREFIX).concat(e)),n=S.doc.getElementsByTagName("html")[0],n=(n.classList.add("engage-layer-open"),n.classList.add(e),S.doc.body);n.classList.add("engage-layer-open"),n.classList.add(e),n.appendChild(t)}function Go(e){var t,n,i,r=S.doc.querySelector(".engage-layer");r&&(t=["engage-layer-open",e="".concat(Uo.MASKLAYERPPREFIX).concat(e)],n=S.doc.getElementsByTagName("html")[0],i=S.doc.body,Array.prototype.slice.call(S.doc.body.classList).filter(function(e){return"engage-layer-open"==e||/^pt_mask_/.test(e)}).reverse().join("")==t.reverse().join("")?(i.removeChild(r),t.forEach(function(e){n.classList.remove(e),i.classList.remove(e)})):(n.classList.remove(e),i.classList.remove(e)))}function O(e,t,n,i,r,o){var n=2<arguments.length&&n!==undefined?n:"view",i=3<arguments.length?i:undefined,r=4<arguments.length?r:undefined,o=5<arguments.length?o:undefined,a=e&&e.setting&&e.setting.sid||wr(),s=t.engagerId,c=t.exp_id,u=t.variant||{},t=t.triggerCondition,l={};i&&(u=Object.assign({target:i},u)),r&&(l=r),"function"==typeof e.send&&e.send(n,{sid:a,engagerId:s,engagerVerId:c,variant:u,triggerCondition:t,track:l,transport:o})}function zo(e){var t=I.get(Uo.POSITION)||[],n=t.indexOf(e);-1!==n&&(t.splice(n,1),I.set(e,t))}function Jo(e,t){var n=I.get(Wo)||[],i=n.indexOf(t);"add"===e&&-1===i&&n.push(t),-1!==i&&"delete"===e&&n.splice(i,1),I.set(Wo,n)}function Yo(e){var t,e=e.querySelector('[data-engage-block="branding"]');e&&(t=(e.href||"").replace(/(utm_source=)Customer-Site/,"$1"+S.loc.hostname),e.setAttribute("href",t))}function N(e,t){var t=1<arguments.length&&t!==undefined?t:"seenTimes",n=vr(e);null==n?n={seenTimes:1,hasClosed:0,hasClicked:0,formSubmitted:0,previewFormContent:null,session:Y({},L.sessionId,{frequencySessionTimes:1})}:((n=JSON.parse(n))[t]=Number(n[t]||0)+1,"seenTimes"===t&&(n.session&&n.session[L.sessionId]||(n.session=Y({},L.sessionId,{frequencySessionTimes:0})),n.session[L.sessionId].frequencySessionTimes=Number(n.session[L.sessionId].frequencySessionTimes||0)+1)),gr(e,JSON.stringify(n))}function Ko(e){Array.prototype.slice.call(e.querySelectorAll("script")).forEach(function(e){Xo(e.innerHTML)})}function Xo(e){var t=Vo(),n=document.createElement("script"),e="\n        try {\n            (function(){".concat(e,"})();\n        } catch (error) {\n            console.warn(error);\n        }");n.innerHTML=e,t.appendChild(n),t.removeChild(n)}function Qo(e,t){var n=t&&S.doc.querySelector("#link_"+t),n=(n&&S.doc.getElementsByTagName("head")[0].removeChild(n),S.doc.createElement("style"));n.type="text/css",n.id="link_"+t,n.appendChild(S.doc.createTextNode(e)),S.doc.getElementsByTagName("head")[0].appendChild(n)}function Zo(e,i){var t=new RegExp("([^\r\n,{}]+)(,(?=[^}]*{)|s*{)","g");return e=e.replace(t,function(e,t,n){return t.match(/^\s*(@media|@.*keyframes|to|from|@font-face|1?[0-9]?[0-9])/)?t+n:(t=(t=t.match(/:scope/)?t.replace(/([^\s]*):scope/,function(e,t){return""===t?"> *":"> "+t}):t).replace(/^(\s*)/,"$1"+i+" "))+n})}function ea(){return window.ptengine&&window.ptengine.__PTEEnabled&&window.ptengine.__pteSid===window.ptengine.__sid}function ta(e){return ea()?window.ptengine.__getPteEventData&&window.ptengine.__getPteEventData(e):null}var na,ia=function(){function i(e,t,n){f(this,i),this.context=e,this.current=t,this.terminal=null,this.currentWidgetIndex=0,this.container=null,this.engageWrap=null,this.renderList=null,this.currentWidgetConfig=null,this.callback=n,this.showMask=!1,this.config={DATA_BLOCK:"data-engage-block",DATA_WIDGET_ID:"data-engage-widget-id",DATA_SHOW_ENGAGE:"data-show-engage",DATA_GOTO_WIDGET:"data-goto-widget",DATA_ACTION_CLICK:"data-engage-action-click",DATA_ACTION_CLOSE:"data-engage-action-close",BUTTON_URL:"button-url",BUTTON_TEL:"button-tel",BUTTON_CLOSE:"button-close",BUTTON_GOTO_WIDGET:"button-goto-widget",ICON_CLOSE:"icon-close",POSITION:"position",CENTERPOSITION:"pos-center",LAYOUTMODE:"layoutMode",VISUALMODEL:"visualModel",CODEMODEL:"codeModel",MASKLAYERPPREFIX:"pt_mask_"}}return s(i,[{key:"_getRenderList",value:function(){return this.terminal.widgets.reduce(function(e,t){var t=t.widgetNodes,n=t.html,i=t.css,t=t.script;return e.push({html:n+(void 0===t?"":t),css:i}),e},[])}},{key:"_getWidget",value:function(e){return!(e<0||e>this.renderList.length-1)&&this.renderList[e]}},{key:"_getWidgetConfig",value:function(e){var t=this.terminal.widgets;return!(e<0||e>t.length-1)&&this.terminal.widgets[e]}},{key:"_gotoPrev",value:function(){var e=this.currentWidgetIndex-1;0<=e&&(this.currentWidgetIndex=e,this.render())}},{key:"_gotoNext",value:function(e){var t=this.renderList.length-1,n=this.currentWidgetIndex+1;n<=t&&(this.currentWidgetIndex=n,e&&this.currentWidgetConfig.widgetMode===this.config.VISUALMODEL&&zo(this.currentWidgetConfig.visualModel.widgetSettings.position),this.render())}},{key:"_addEventHandler",value:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)}},{key:"_handleGotoWidgetClick",value:function(e){e=e.getAttribute(this.config.DATA_GOTO_WIDGET);"prev"===e?this._gotoPrev():"next"===e&&this._gotoNext()}},{key:"_handleCloseClick",value:function(e){this._execWidgetEvent(e,"unmounted")}},{key:"_handleClearEngage",value:function As(){try{var e;this._execWidgetEvent(this.engageWrap,"unmounted"),this.engageWrap&&this.container.removeChild(this.engageWrap),this.showMask&&this.currentWidgetConfig&&Go(this.currentWidgetConfig.widgetId),this.currentWidgetConfig.widgetMode===this.config.VISUALMODEL&&zo(this.currentWidgetConfig.visualModel.widgetSettings.position),I.set(this.current.exp_id,null),this.current.leaveHandler&&"function"==typeof this.current.leaveHandler&&(2==+(e=this.current.currentTerminal&&this.current.currentTerminal.type)&&pr(S.doc,"mousemove",this.current.leaveHandler),2!=+e&&pr(S.win,"popstate",this.current.leaveHandler)),this.context.engager.off("clearEngage.".concat(this.current.engagerId))}catch(t){}}},{key:"_execWidgetEvent",value:function(e,t,n){window.ptEngage=window.ptEngage||{};var e=e&&Bo(e),i=window.ptEngage[e]||[];0<i.length&&(i.map(function(e){e[t]&&"function"==typeof e[t]&&e[t](),n&&"function"==typeof n&&(e.callback=n)}),e&&"unmounted"===t&&delete window.ptEngage[e])}},{key:"updateState",value:function(e,t){Object.prototype.hasOwnProperty.call(this,e)&&(this[e]=t)}},{key:"triggerEvent",value:function(e,t){this._execWidgetEvent(this.engageWrap,e,t)}},{key:"_renderHtmlCssAndScript",value:function(e){var t,n,i,r,o=this._getWidget(this.currentWidgetIndex);o&&(n=o.html,o=o.css,t='div[data-pt-engage-id="'.concat(this.currentWidgetConfig.widgetId,'"]'),n=e?(i=n,r=this.currentWidgetConfig.widgetId,'<div data-pt-engage-id="'.concat(r,'">').concat(i,"</div>")):n,(o=e?Zo(o,t):o)&&Qo(o,this.currentWidgetConfig.widgetId),n&&(this.engageWrap.innerHTML=n),this.engageWrap.style.display="none",this.container&&this.container.appendChild(this.engageWrap),this.triggerEvent("unmounted"),Ko(this.engageWrap),this.engageWrap.style.display="block",this.triggerEvent("mounted",function(e){e&&"function"==typeof e&&e(this.current.engagerId)}))}},{key:"_subscribeClickEvent",value:function(u,l,d){var f=this,p=l.current;this._addEventHandler(u,"click",function(e){e=e||window.event;for(var n=e.target||e.srcElement,i=[f.config.DATA_ACTION_CLICK,f.config.DATA_ACTION_CLOSE],t=!1,r="";r=n.getAttribute(f.config.DATA_BLOCK),(t=function(){for(var e=0,t=i.length;e<t;e++)if(n.getAttribute(i[e]))return!0}())||(n=n.parentNode),!t&&n!=u;);if(t){e.preventDefault();var o,a=n.tagName.toUpperCase(),a=n.textContent||a||"unknow target";if(!n.parentNode||"image"!=n.parentNode.getAttribute("data-engage-block")||(o=n.querySelector("img"))&&(a=o.getAttribute("alt")),!r||r!==f.config.BUTTON_CLOSE&&r!==f.config.ICON_CLOSE){if(r&&r===f.config.BUTTON_GOTO_WIDGET){try{f.currentWidgetConfig.widgetMode===f.config.VISUALMODEL&&zo(f.currentWidgetConfig.visualModel.widgetSettings.position),f.showMask&&Go(f.currentWidgetConfig.widgetId),O(l,p,"click",a)}catch(e){}f._handleGotoWidgetClick(n)}else O(l,p,"click",a);if(n.href&&!/^javascript:(void\(0\))?;?$/.test(n.href))if("_blank"==n.target)try{window.open(n.href,"_blank")}catch(s){P()}else window.location.href=n.href;d&&"function"==typeof d&&d(p.exp_id)}else{u&&f.container.removeChild(u),f.showMask&&Go(f.currentWidgetConfig.widgetId),O(f.context,f.current,"close",a),P(),d&&"function"==typeof d&&d(f.current.exp_id,"hasClosed");try{f.currentWidgetConfig.widgetMode===f.config.VISUALMODEL&&zo(f.currentWidgetConfig.visualModel.widgetSettings.position),Jo("delete",f.current.engagerId),l.engager.off("clearEngage.".concat(f.current.engagerId))}catch(c){}}}})}},{key:"render",value:function Ps(){var e=this._getWidgetConfig(this.currentWidgetIndex);if(this.currentWidgetConfig=e){var t,n=e.widgetMode!==this.config.CODEMODEL,i=e.widgetMode===this.config.LAYOUTMODE,r=i?e.widgetSettings&&e.widgetSettings.position:e.visualModel&&e.visualModel.widgetSettings&&e.visualModel.widgetSettings.position;if(n){if(!(r&&Ho(this.terminal.type,r)))return;if(this._renderHtmlCssAndScript(i),!(this.engageWrap&&"false"!==this.engageWrap.getAttribute(this.config.DATA_SHOW_ENGAGE)))return void(-1!==(t=(n=I.get(this.config.POSITION)||[]).indexOf(r))&&(n.splice(t,1),I.set(this.config.POSITION,n)))}else this._renderHtmlCssAndScript(!0);i?(t=this.engageWrap.querySelector('[data-engage-block="engage"]'),e.widgetSettings&&!e.widgetSettings.showMask?(t.style.left="auto",t.style.right="auto",t.style.top="auto",t.style.bottom="auto"):e.widgetSettings.showMask&&(t.style.position="fixed")):(r&&r===this.config.CENTERPOSITION||this.engageWrap.querySelector("[data-pt-showmask]"))&&(this.showMask=!0,qo(e.widgetId)),Yo(this.engageWrap)}}},{key:"mounted",value:function(e,t){var n=this;this.container=e,this.engageWrap=t,this.terminal=this.current&&this.current.currentTerminal,this.submitCallback=function(e,t){this.showMask&&Go(this.currentWidgetConfig.widgetId),O(e,t,"submit"),N(t.exp_id,"formSubmitted")},this.updateRenderedPositionCache=zo,this.renderList=this._getRenderList(),this.render(),window.ptEngage=window.ptEngage||{},window.ptEngage&&(window.ptEngage[this.current.engagerId]=this),this._subscribeClickEvent(this.engageWrap,this.context,function(e){N(e,1<arguments.length&&arguments[1]!==undefined?arguments[1]:"hasClicked")}),this.context.engager.on("clearEngage.".concat(this.current.engagerId),function(){n._handleClearEngage.apply(n)}),this.callback&&"function"==typeof this.callback&&this.callback()}},{key:"unmounted",value:function(){}}]),i}(),ra=/"/g,oa=((Kn={})[na="link"]=function(t){return function(e){return t(this,"a","href",e)}}(function(e,t,n,i){var e=String(Se(e)),r="<"+t;return""!==n&&(r+=" "+n+'="'+String(i).replace(ra,"&quot;")+'"'),r+">"+e+"</"+t+">"}),y(y.P+y.F*u(function(){var e=""[na]('"');return e!==e.toLowerCase()||3<e.split('"').length}),"String",Kn),{copySuccessfully:{zh:"复制成功！",ja:"コピーに成功しました！",en:"Copy successfully!"},form_error_tips_normal:{zh:"请输入值",ja:"入力してください",en:"Please input your answer."},form_error_tips_name_required:{zh:"请输入名字",ja:"入力してください",en:"Please input a name."},form_error_tips_email_required:{zh:"请输入邮箱",ja:"入力してください",en:"Please input an email."},form_error_tips_phone_required:{zh:"请输入电话号码",ja:"入力してください",en:"Please input a phone number."},form_error_tips_dropdown_required:{zh:"请输入值",ja:"入力してください",en:"Please select your answer."},form_error_tips_email_invalid:{zh:"请输入有效邮箱",ja:"有効なメールアドレスを記入してください",en:"Please input a valid email."},form_error_tips_phone_invalid:{zh:"请输入有效电话号码",ja:"有効な電話番号を記入してください",en:"Please input a valid phone number."},form_error_tips_duplicate:{zh:"当前值已存在，请尝试其他值",ja:"この値は既に登録されています",en:"This answer was already submitted. Please try another."},form_error_tips_name_duplicate:{zh:"当前名字已存在，请尝试其他值",ja:"この値は既に登録されています",en:"This name was already submitted. Please try another."},form_error_tips_email_duplicate:{zh:"当前邮箱已存在，请尝试其他值",ja:"この値は既に登録されています",en:"This email was already submitted. Please try another."},form_error_tips_phone_duplicate:{zh:"当前电话号码已存在，请尝试其他值",ja:"この値は既に登録されています",en:"This phone number was already submitted. Please try another."}}),aa=S.na.language.toLocaleLowerCase().substring(0,2);function D(e){var t;return(null==(t=oa[e])?void 0:t[aa])||(null==(t=oa[e])?void 0:t.en)||""}var sa="data-engage-action",ca="data-button-type";function ua(e){var i=[];return e&&e.querySelectorAll("div["+sa+"]").forEach(function(e){var t=e.getAttribute(sa);if(t)try{var n=JSON.parse(t);i.push({el:e,config:n})}catch(M){}}),i}function la(l,d,e,t,n){var i,r,e=e||{},o=e.clickActionConfig,a=e.clickActionType,e=e.enableClickAction,s=(null==o?void 0:o.link)||{},c=s.linkURL,u=s.openNewTab,f=((null==o?void 0:o.tel)||{}).phoneNumber,p=((null==o?void 0:o.downloadFile)||{}).fileURL,h=((null==o?void 0:o.copiedText)||{}).text,g=((null==o?void 0:o.runCode)||{}).code,s="beacon";if(null!=t&&t.event&&!(s="xhr")===u&&(s="beacon"),e)switch(a){case"link":c&&function(e,t){var t=1<arguments.length&&t!==undefined&&t,n=document.createElement("a");n.setAttribute("pt-temp-a",""),n.href=e,n.target=t?"_blank":"_self",document.body.appendChild(n),n.click(),document.body.removeChild(n)}(function(e,t){var n=window[Gi.funName],i="halfManual"===n.__ids.crossDomainType||n.__crossDomainEnable,r=e.hasAttribute("data-pt-crossDomain"),e=e.getAttribute("onclick");if((i||e&&-1!==e.indexOf("pt_domain")||r)&&function(e){var t=function(e){var t=document.createElement("a"),n=(t={source:t.href=e,protocol:t.protocol.replace(":",""),host:t.hostname,port:t.port,path:decodeURIComponent(t.pathname).replace(/^([^\/])/,"/$1")}).protocol+"://"+t.host+(t.port?":"+t.port:"")+t.path;return decodeURIComponent(e).indexOf(n)<0&&(t.path=t.path.replace(/^\//,"")),t}(e).host.toLowerCase();return e.match(/^https?:\/\//)&&e.length<900&&-1===t.indexOf(xr(location.hostname))&&function(t){var n="setDomain",e=window._pt_sp_2&&Array.isArray(window._pt_sp_2)&&window._pt_sp_2.filter(function(e){return e.indexOf&&"function"==typeof e.indexOf&&-1!==e.indexOf(n)})||[];return 0<e.length&&0<e[0].split(",").filter(function(e){return e!==n&&-1!==t.indexOf(e)}).length}(t)}(t))return Kr(t,n.__crossDomainType);return t}(d,c),u);break;case"tel":f&&(i=f,(r=document.createElement("a")).setAttribute("pt-temp-a",""),r.href="tel:"+i,document.body.appendChild(r),r.click(),document.body.removeChild(r));break;case"copiedText":if(h){var v=h;var y=function(){var e,t,n,i,r,o,a,s,c,u;e=l,t=d,n=D("copySuccessfully"),e&&t&&((i=Pr('[data-insert-tooltip-text="'.concat(n,']"')))&&i.remove(),i=e.clientX,e=e.clientY,r=(t=t.getBoundingClientRect()).top,o=t.left,a=t.right,t.bottom,t.width,t=t.height,s=document.body.clientWidth,c={},c=0==i&&0==e?{top:parseInt(r-4-32),bottom:parseInt(r+t+4),left:parseInt(o+(a-o)/2-85),right:parseInt(o+(a-o)/2+85)}:{top:parseInt(r-4-32),bottom:parseInt(r+t+4),left:i>parseInt(85)?parseInt(i-85):i,right:parseInt(i-170)},(e=document.createElement("div")).innerHTML='<div data-insert-tooltip="true" data-insert-tooltip-text="'.concat(n,'" style="\n          position: fixed;\n          border-radius: 3px;\n          background-color: #212121;\n          padding: 6px 16px;\n          display: flex;\n          align-items: center;\n          font-size: 13px;\n          color: #fff;\n          font-weight: 400;\n          white-space: nowrap;\n          top: ').concat(0<c.top?c.top:c.bottom,"px;\n          left: ").concat(0<c.left&&c.left<s?c.left:c.right,'px;\n          z-index: 2147483647;\n      ">\n        <svg\n          style="width: 16px; height: 16px; fill: #fff; margin-right: 8px;"\n          viewBox="0 0 1024 1024"\n          version="1.1"\n          xmlns="http://www.w3.org/2000/svg">\n          <path d="M512 0C229.696 0 0 229.696 0 512s229.696 512 512 512 512-229.696 512-512-229.696-512-512-512z m0 960c-246.976 0-448-201.024-448-448s201.024-448 448-448 448 201.024 448 448-201.024 448-448 448z"  />\n          <path d="M828.544 349.696L433.92 744.32 195.456 503.872a40.64 40.64 0 1 1 57.472-57.472l180.992 182.4 337.152-337.152a40.64 40.64 0 1 1 57.472 57.472v0.576z"  />\n        </svg>\n        <span>').concat(n,"</span>\n    </div>"),u=e.firstChild,document.body.appendChild(u),setTimeout(function(){u&&u.remove()},1500))};var m=void 0;try{navigator.clipboard.writeText(v).then(function(){"function"==typeof y&&y()},function(e){Sr(v,y,m)})}catch(w){Sr(v,y,m)}}break;case"downloadFile":p&&(i=p,(r=document.createElement("a")).setAttribute("pt-temp-a",""),r.href=i,r.download="",document.body.appendChild(r),r.click(),document.body.removeChild(r));break;case"runCode":g&&function(e,t){var t=(1<arguments.length&&t!==undefined?t:S.doc).getElementsByTagName("head")[0],n=document.createElement("script"),e="\n        try {\n            (function(){".concat(e,"})();\n        } catch (error) {\n            console.warn(error);\n        }");n.innerHTML=e,t.appendChild(n),t.removeChild(n)}(g)}"function"==typeof n&&n(d,{enableClickAction:e,clickActionType:a,clickActionConfig:o},s)}function da(e){var t;return e?Or(e)?da(Nr(e)):null!=e&&e.getAttribute&&"submit"===(null==e||null==(t=e.getAttribute)?void 0:t.call(e,ca))?e:e.parentNode&&"body"!==e.nodeName.toLowerCase()?da(e.parentNode):null:null}var fa=function(){function t(){f(this,t);var e="https:"===S.loc.protocol?"https://":"http://";this._callbacks={},this.collectUrl=e+"xcollector.ptengine.jp/webcollect"}return s(t,[{key:"on",value:function(e,t){return this._callbacks["$"+e]||(this._callbacks["$"+e]=[]),this._callbacks["$"+e].push(t),this}},{key:"off",value:function(e,t){if(0===arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+e];if(!i)return this;if(1===arguments.length)return delete this._callbacks["$"+e],this;for(var r=0;r<i.length;r++)if((n=i[r])===t||n.fn===t){i.splice(r,1);break}return 0===i.length&&delete this._callbacks["$"+e],this}},{key:"once",value:function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this}},{key:"emit",value:function(e){for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(n)for(var r=0,o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,t);return this}},{key:"hasListeners",value:function(e){return 0<(this._callbacks["$"+e]||[]).length}}]),t}(),pa=new fa,ha=function(){function r(e,t,n){f(this,r),this.inline=e,this.isPreview=t,this.callback=n,this.hasTrulyRendered=!1,this.modeTags={REPLACE:0,INSERT:1,APPEND:2,BEFORE:3,AFTER:4},this.docmentFirstCSSStyleSheet=null,this.hasPageJumped=!1,this.rollBack=null,this.insertNodeAttribute="pt-insert-element";var i=this;pa.on("routerChange",function(){i._handleRouterChange()})}return s(r,[{key:"_handleRouterChange",value:function(){this.hasPageJumped=!0,this.unmounted()}},{key:"_selector",value:function(e){return e&&S.doc.querySelector(e)}},{key:"_getFirstCSSStyleSheet",value:function(e){if(this.docmentFirstCSSStyleSheet)return this.docmentFirstCSSStyleSheet;for(var t=e.styleSheets.length-1;0<=t;t--){var n=e.styleSheets[t];if(!n.href){var i=n.ownerNode;if(i&&i.parentNode&&"HEAD"===i.parentNode.tagName)return this.docmentFirstCSSStyleSheet=n}}return 0===e.styleSheets.length&&e.createStyleSheet(),this.docmentFirstCSSStyleSheet=e.styleSheets[0]}},{key:"_getNewStyleSheet",value:function(e,t){t=(t||S.doc).createElement("style");return t.cssText!==undefined?t.cssText=e:t.innerHTML=e,t}},{key:"_addStyleSheetToHead",value:function(e,t){var t=t||S.doc,n=t.getElementsByTagName("head")[0];n||(n=t.createElement("head"),t.body.parentNode.insertBefore(n,t.body)),n.appendChild(e)}},{key:"_addStyleSheet",value:function(e,t,n,i,r){var o,a,e=e+"{"+t+": "+n+(i?" !important":"")+"}";if(r&&(e=r+"{"+e+"}"),S.doc.createStyleSheet)return o=this._getFirstCSSStyleSheet(S.doc),a=o.rules.length,o.insertRule(e,a),function(){o.deleteRule?o.deleteRule(a):o.removeRule(a),o.insertRule("x {}",a)};var s=this._getNewStyleSheet(e,S.doc),c=(this._addStyleSheetToHead(s,S.doc),s.parentNode);return function(){try{c&&c.removeChild(s)}catch(M){}}}},{key:"_setStyleProperty",value:function(e,t,n,i){if(e.style.setProperty)try{var r=e.style.getPropertyValue(t),o=e.style.getPropertyPriority(t);return e.style.setProperty(t,n,i?"important":""),function(){e.style.setProperty(t,"",o),e.style.setProperty(t,r,o)}}catch(di){}var a=e.style.cssText;return e.style.cssText+=";"+t+": "+n+(i?" !important":"")+";",function(){e.style.cssText=a}}},{key:"_setAttribute",value:function(e,t,n){if(!e)return null;var i=e.getAttribute(t);return null===n?e.removeAttribute(t):e.setAttribute(t,n),this.hasTrulyRendered=!0,function(){i&&e.setAttribute(t,i)}}},{key:"_updateText",value:function(e){var t,n,i=this,r=e.elementText,o=(e.type,r.selector),a=r.text,r=r.childIndex,o=this._selector(o.string);o?0<=r.integer&&r.integer<o.childNodes.length&&(null!=(t=o.childNodes[r.integer])&&t.nodeType==Node.TEXT_NODE&&(n=t.nodeValue,t.nodeValue=a.string,this.hasTrulyRendered=!0,this.callback(this.hasTrulyRendered),this.rollBack=function(){try{t&&document.contains(t)&&(t.nodeValue=n)}catch(M){}})):this._delay(function(){return i._updateText(e)})}},{key:"_observeText",value:function(i,r,o){var a=this,s=0,c=0;this.timer=setInterval(function(){var e,t,n;s++,a.hasPageJumped||3<=c||1e3<=s?a.timer&&clearInterval(a.timer):(e=a._selector(i))&&(t=e.childNodes[o],(n=t.nodeValue)!==r&&(t.nodeValue=r,c++,a.rollBack=function(){try{t&&document.contains(t)&&(t.nodeValue=n)}catch(M){}}))},200)}},{key:"_updateContent",value:function(e,t){var n=this,i=e.elementContent,r=i.selector,i=i.html,o=this._selector(r.string);if(o){var a,s,r=o.ownerDocument||o.document||S.doc;switch(t=(t||"").toLowerCase()){case"after":a=o.parentNode,s=o.nextSibling;break;case"insert":s=(a=o).firstChild;break;case"append":a=o,s=null;break;default:a=o.parentNode,s=o}if(!a||a===r)return{result:1,Sg:[]};var r=function(e,t){var n=0,i="",r="",o=Fo[t.tagName];null!=o&&(n=o[0],i=o[1],r=o[2]),(o=t.ownerDocument.createElement("div")).innerHTML=i+(e||"")+r;for(var a=o;0<n;){var s=a.firstChild;if(null==s.firstChild)return t.ownerDocument.createElement("div");a=s,n--}return a}(i.string,a),c=(this._removeNode(r,"SCRIPT"),this._removeNode(r,"NOSCRIPT"),[]);if(r.firstChild)for(var u=r.firstChild;u;){var l,d=u.nextSibling;try{null!=(l=u)&&l.setAttribute&&u.setAttribute(this.insertNodeAttribute,"")}catch(M){}c.push(u),a.insertBefore(u,s),u=d}var f=o.nextSibling,p=("replace"===t&&a.removeChild(o),this.hasTrulyRendered=!0,this.callback(this.hasTrulyRendered),this);this.rollBack=function(){for(;0<c.length;)try{var e;(e=c.pop())&&e.remove()}catch(e){}try{"replace"!==t||!o||o.hasAttribute&&o.hasAttribute(p.insertNodeAttribute)||document.contains(o)||!a.contains(f)||a.insertBefore(o,f)}catch(e){}}}else this._delay(function(){return n._updateContent(e,t)})}},{key:"_removeNode",value:function(e,t){for(var n=e.getElementsByTagName(t),i=[],r=n.length-1;0<=r;r--){var o=n[r];o.parentNode.removeChild(o),i.push(o)}}},{key:"_updateStyle",value:function(e){var t=this,n=e.elementStyle,i=(e.type,n.property),r=n.value,o=n.selector,a=n.cssRule,s=n.important,n=n.cssConditional,i=i&&i.string,r=r&&r.string,s=s&&s["boolean"],o=o&&o.string,n=n&&n.string;o&&(this.hasTrulyRendered=!0,a?(this.rollBack=this._addStyleSheet(o,i,r,s,n),this.callback(this.hasTrulyRendered)):(a=S.doc.querySelector(o))?(this.rollBack=this._setStyleProperty(a,i,r,s),this.callback(this.hasTrulyRendered)):this._delay(function(){return t._updateStyle(e)}))}},{key:"_applyAction",value:function(e){var t,n=this,i=e.changeElementAction||{},r=i.action,i=i.selector,i=null==i?void 0:i.string;i&&((t=S.doc.querySelector(i))?(this.rollBack=function(e,t,n){var i,r;if(e)return i=(t||{}).enableClickAction,r=e.getAttribute("href"),"A"===e.tagName&&(e.removeAttribute("href"),e.removeAttribute("target")),i&&(e.style.cursor="pointer",e.addEventListener("click",br(n,200),!1)),function(){"A"===e.tagName&&r&&e.setAttribute("href",r),i&&(e.style.cursor="auto",e.removeEventListener("click",br(n,200),!1))}}(t,null==r?void 0:r.object,function(e){la(e,t,null==r?void 0:r.object)}),this.hasTrulyRendered=!0,this.callback(this.hasTrulyRendered)):this._delay(function(){return n._applyAction(e)}))}},{key:"_updateAttribute",value:function(e){var t=this,n=e.changeElementAttribute,i=n.attribute,r=n.value,n=n.selector,i=i&&i.string,r=r&&r.string,n=n&&n.string;n&&S.doc.documentElement.setAttribute&&((n=S.doc.querySelector(n))?(this.rollBack=this._setAttribute(n,i,r),this.callback(this.hasTrulyRendered)):this._delay(function(){return t._updateAttribute(e)}))}},{key:"_observeAttribute",value:function(t,n,i){var r=this,o=0,a=0,s=setInterval(function(){if(o++,r.hasPageJumped||3<=a||1e3<=o)return clearInterval(s),void(3<=a&&r.isPreview);var e=S.doc.querySelector(t);e&&(null===i&&e.hasAttribute(n)||e.getAttribute(n)!==i)&&(r.rollBack=r._setAttribute(e,n,i),a++)},200)}},{key:"_delay",value:function(e){var t=1<arguments.length&&arguments[1]!==undefined?arguments[1]:200;this.hasPageJumped||setTimeout(function(){e()},t)}},{key:"mounted",value:function(){var t,n=this,e=this.inline||{},i=e.changeElementAction,r=e.changeElementAttribute,o=e.elementText,a=e.elementStyle,e=e.elementContent;i?this._applyAction(this.inline):a?this._updateStyle(this.inline):r?this._updateAttribute(this.inline):(t=(o||e||{}).mode,i=Object.keys(this.modeTags).find(function(e){return n.modeTags[e]===t}),e?this._updateContent(this.inline,i):o&&this._updateText(this.inline,i))}},{key:"unmounted",value:function(){"function"==typeof this.rollBack&&this.rollBack()}}]),r}();function ga(e){return/\S+@\S+\.\S+/.test(e)}function va(e){return e&&/^[0-9_-]+$/.test(e)}var ya,ma,wa,ba,_a,A,ka,Sa,Ea=function(e,t,n){for(var i in t)qe(e,i,t[i],n);return e},Ta=function(e,t,n,i){if(!(e instanceof t)||i!==undefined&&i in e)throw TypeError(n+": incorrect invocation!");return e},Ia=R(function(e){var d={},f={},e=e.exports=function(e,t,n,i,r){var o,a,s,c,r=r?function(){return e}:wi(e),u=Ge(n,i,t?2:1),l=0;if("function"!=typeof r)throw TypeError(e+" is not iterable!");if(vi(r)){for(o=xe(e.length);l<o;l++)if((c=t?u(k(a=e[l])[0],a[1]):u(e[l]))===d||c===f)return c}else for(s=r.call(e);!(a=s.next()).done;)if((c=fi(s,u,a.value,t))===d||c===f)return c};e.BREAK=d,e.RETURN=f}),xa=function(e,t){if(c(e)&&e._t===t)return e;throw TypeError("Incompatible receiver, "+t+" required!")},Ca=l.f,Aa=t.fastKey,Oa=a?"_s":"size",Na=function(e,t){var n,i=Aa(t);if("F"!==i)return e._i[i];for(n=e._f;n;n=n.n)if(n.k==t)return n},Da={getConstructor:function(e,r,n,i){var o=e(function(e,t){Ta(e,o,r,"_i"),e._t=r,e._i=Zt(null),e._f=undefined,e._l=undefined,e[Oa]=0,t!=undefined&&Ia(t,n,e[i],e)});return Ea(o.prototype,{clear:function(){for(var e=xa(this,r),t=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=undefined),delete t[n.i];e._f=e._l=undefined,e[Oa]=0},"delete":function(e){var t,n,i=xa(this,r),e=Na(i,e);return e&&(t=e.n,n=e.p,delete i._i[e.i],e.r=!0,n&&(n.n=t),t&&(t.p=n),i._f==e&&(i._f=t),i._l==e&&(i._l=n),i[Oa]--),!!e},forEach:function(e){xa(this,r);for(var t,n=Ge(e,1<arguments.length?arguments[1]:undefined,3);t=t?t.n:this._f;)for(n(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!Na(xa(this,r),e)}}),a&&Ca(o.prototype,"size",{get:function(){return xa(this,r)[Oa]}}),o},def:function(e,t,n){var i,r=Na(e,t);return r?r.v=n:(e._l=r={i:i=Aa(t,!0),k:t,v:n,p:t=e._l,n:undefined,r:!1},e._f||(e._f=r),t&&(t.n=r),e[Oa]++,"F"!==i&&(e._i[i]=r)),e},getEntry:Na,setStrong:function(e,n,t){Ni(e,n,function(e,t){this._t=xa(e,n),this._k=t,this._l=undefined},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?Pi(0,"keys"==t?n.k:"values"==t?n.v:[n.k,n.v]):(e._t=undefined,Pi(1))},t?"entries":"values",!t,!0),Lt(n)}},Pa=(ii=function(e){return function Set(){return e(this,0<arguments.length?arguments[0]:undefined)}},ri={add:function(e){return Da.def(xa(this,"Set"),e=0===e?0:e,e)}},oi=Da,_a=p[ya="Set"],ka=ma?"set":"add",Sa=(A=_a)&&A.prototype,m={},_=function(e){var n=Sa[e];qe(Sa,e,"delete"==e?function(e){return!(wa&&!c(e))&&n.call(this,0===e?0:e)}:"has"==e?function(e){return!(wa&&!c(e))&&n.call(this,0===e?0:e)}:"get"==e?function(e){return wa&&!c(e)?undefined:n.call(this,0===e?0:e)}:"add"==e?function(e){return n.call(this,0===e?0:e),this}:function(e,t){return n.call(this,0===e?0:e,t),this})},"function"==typeof A&&(wa||Sa.forEach&&!u(function(){(new A).entries().next()}))?(i=(ba=new A)[ka](wa?{}:-0,1)!=ba,B=u(function(){ba.has(1)}),Hn=v(function(e){new A(e)}),n=!wa&&u(function(){for(var e=new A,t=5;t--;)e[ka](t,t);return!e.has(-0)}),Hn||(((A=ii(function(e,t){Ta(e,A,ya);e=It(new _a,e,A);return t!=undefined&&Ia(t,ma,e[ka],e),e})).prototype=Sa).constructor=A),(B||n)&&(_("delete"),_("has"),ma&&_("get")),(n||i)&&_(ka),wa&&Sa.clear&&delete Sa.clear):(A=oi.getConstructor(ii,ya,ma,ka),Ea(A.prototype,ri),t.NEED=!0),Cn(A,ya),m[ya]=A,y(y.G+y.W+y.F*(A!=_a),m),wa||oi.setStrong(A,ya,ma),d("match")),La="includes",Ma=(y(y.P+y.F*function(e){var t=/./;try{"/./"[e](t)}catch(M){try{return t[Pa]=!1,!"/./"[e](t)}catch(n){}}return!0}(La),"String",{includes:function(e){return!!~function(e,t,n){if(ye(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(Se(e))}(this,e,La).indexOf(e,1<arguments.length?arguments[1]:undefined)}}),e(!0)),Ra=(y(y.P,"Array",{includes:function(e){return Ma(this,e,1<arguments.length?arguments[1]:undefined)}}),en("includes"),wt.f),Kn=function(s){return function(e){for(var t,n=_t(e),i=zt(n),r=i.length,o=0,a=[];o<r;)Ra.call(n,t=i[o++])&&a.push(s?[t,n[t]]:n[t]);return a}},ja=Kn(!1),$a=(y(y.S,"Object",{values:function(e){return ja(e)}}),Kn(!0)),Wa=(y(y.S,"Object",{entries:function(e){return $a(e)}}),R(function(e,t){var n;n=function(){var a=1e3,r="millisecond",d="second",f="minute",p="hour",h="day",g="week",v="month",s="quarter",y="year",m="date",w="Invalid Date",c=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,e={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},i=function(e,t,n){var i=String(e);return!i||i.length>=t?e:""+Array(t+1-i.length).join(n)+e},t={s:i,z:function(e){var e=-e.utcOffset(),t=Math.abs(e),n=Math.floor(t/60),t=t%60;return(e<=0?"+":"-")+i(n,2,"0")+":"+i(t,2,"0")},m:function a(e,t){if(e.date()<t.date())return-a(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(n,v),r=t-i<0,e=e.clone().add(n+(r?-1:1),v);return+(-(n+(t-i)/(r?i-e:e-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:v,y:y,w:g,d:h,D:m,h:p,m:f,s:d,ms:r,Q:s}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},o="en",u={},n=(u[o]=e,function(e){return e instanceof S}),l=function(e,t,n){var i;return e?("string"==typeof e?(u[e]&&(i=e),t&&(u[e]=t,i=e)):(t=e.name,u[t]=e,i=t),!n&&i&&(o=i),i||!n&&o):o},_=function(e,t){if(n(e))return e.clone();t="object"==typeof t?t:{};return t.date=e,t.args=arguments,new S(t)},k=t,S=(k.l=l,k.i=n,k.w=function(e,t){return _(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})},(e=T.prototype).parse=function(o){this.$d=function(){var e=o.date,t=o.utc;if(null===e)return new Date(NaN);if(k.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var n,i,r=e.match(c);if(r)return n=r[2]-1||0,i=(r[7]||"0").substring(0,3),t?new Date(Date.UTC(r[1],n,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)):new Date(r[1],n,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)}return new Date(e)}(),this.$x=o.x||{},this.init()},e.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},e.$utils=function(){return k},e.isValid=function(){return!(this.$d.toString()===w)},e.isSame=function(e,t){e=_(e);return this.startOf(t)<=e&&e<=this.endOf(t)},e.isAfter=function(e,t){return _(e)<this.startOf(t)},e.isBefore=function(e,t){return this.endOf(t)<_(e)},e.$g=function(e,t,n){return k.u(e)?this[t]:this.set(n,e)},e.unix=function(){return Math.floor(this.valueOf()/1e3)},e.valueOf=function(){return this.$d.getTime()},e.startOf=function(e,t){var n=this,i=!!k.u(t)||t,t=k.p(e),r=function(e,t){t=k.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return i?t:t.endOf(h)},o=function(e,t){return k.w(n.toDate()[e].apply(n.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},a=this.$W,s=this.$M,c=this.$D,u="set"+(this.$u?"UTC":"");switch(t){case y:return i?r(1,0):r(31,11);case v:return i?r(1,s):r(0,s+1);case g:var l=this.$locale().weekStart||0,l=(a<l?a+7:a)-l;return r(i?c-l:c+(6-l),s);case h:case m:return o(u+"Hours",0);case p:return o(u+"Minutes",1);case f:return o(u+"Seconds",2);case d:return o(u+"Milliseconds",3);default:return this.clone()}},e.endOf=function(e){return this.startOf(e,!1)},e.$set=function(e,t){var e=k.p(e),n="set"+(this.$u?"UTC":""),n=((i={}).day=n+"Date",i[m]=n+"Date",i[v]=n+"Month",i[y]=n+"FullYear",i[p]=n+"Hours",i[f]=n+"Minutes",i[d]=n+"Seconds",i[r]=n+"Milliseconds",i[e]),i=e===h?this.$D+(t-this.$W):t;return e===v||e===y?((t=this.clone().set(m,1)).$d[n](i),t.init(),this.$d=t.set(m,Math.min(this.$D,t.daysInMonth())).$d):n&&this.$d[n](i),this.init(),this},e.set=function(e,t){return this.clone().$set(e,t)},e.get=function(e){return this[k.p(e)]()},e.add=function(n,e){var i=this,e=(n=Number(n),k.p(e)),t=function(e){var t=_(i);return k.w(t.date(t.date()+Math.round(e*n)),i)};if(e===v)return this.set(v,this.$M+n);if(e===y)return this.set(y,this.$y+n);if(e===h)return t(1);if(e===g)return t(7);(t={})[f]=6e4,t[p]=36e5,t[d]=a;e=t[e]||1,t=this.$d.getTime()+n*e;return k.w(t,this)},e.subtract=function(e,t){return this.add(-1*e,t)},e.format=function(e){var r=this,t=this.$locale();if(!this.isValid())return t.invalidDate||w;var o=e||"YYYY-MM-DDTHH:mm:ssZ",n=k.z(this),i=this.$H,e=this.$m,a=this.$M,s=t.weekdays,c=t.months,u=function(e,t,n,i){return e&&(e[t]||e(r,o))||n[t].substr(0,i)},l=function(e){return k.s(i%12||12,e,"0")},d=t.meridiem||function(e,t,n){e=e<12?"AM":"PM";return n?e.toLowerCase():e},f={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:k.s(a+1,2,"0"),MMM:u(t.monthsShort,a,c,3),MMMM:u(c,a),D:this.$D,DD:k.s(this.$D,2,"0"),d:String(this.$W),dd:u(t.weekdaysMin,this.$W,s,2),ddd:u(t.weekdaysShort,this.$W,s,3),dddd:s[this.$W],H:String(i),HH:k.s(i,2,"0"),h:l(1),hh:l(2),a:d(i,e,!0),A:d(i,e,!1),m:String(e),mm:k.s(e,2,"0"),s:String(this.$s),ss:k.s(this.$s,2,"0"),SSS:k.s(this.$ms,3,"0"),Z:n};return o.replace(b,function(e,t){return t||f[e]||n.replace(":","")})},e.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},e.diff=function(e,t,n){var t=k.p(t),e=_(e),i=6e4*(e.utcOffset()-this.utcOffset()),r=this-e,e=k.m(this,e),o={};return o[y]=e/12,o[v]=e,o[s]=e/3,o[g]=(r-i)/6048e5,o.day=(r-i)/864e5,o[p]=r/36e5,o[f]=r/6e4,o[d]=r/a,e=o[t]||r,n?e:k.a(e)},e.daysInMonth=function(){return this.endOf(v).$D},e.$locale=function(){return u[this.$L]},e.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),e=l(e,t,!0);return e&&(n.$L=e),n},e.clone=function(){return k.w(this.$d,this)},e.toDate=function(){return new Date(this.valueOf())},e.toJSON=function(){return this.isValid()?this.toISOString():null},e.toISOString=function(){return this.$d.toISOString()},e.toString=function(){return this.$d.toUTCString()},T),E=S.prototype;function T(e){this.$L=l(e.locale,null,!0),this.parse(e)}return _.prototype=E,[["$ms",r],["$s",d],["$m",f],["$H",p],["$W",h],["$M",v],["$y",y],["$D",m]].forEach(function(t){E[t[1]]=function(e){return this.$g(e,t[0],t[1])}}),_.extend=function(e,t){return e.$i||(e(t,S,_),e.$i=!0),_},_.locale=l,_.isDayjs=n,_.unix=function(e){return _(1e3*e)},_.en=u[o],_.Ls=u,_.p={},_},e.exports=n()})),v=R(function(e,t){var o,a,i,n,r,s,c,u,l,d,f,p,h;e.exports=(i=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,s=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,c={years:n=31536e6,months:r=2592e6,days:864e5,hours:36e5,minutes:6e4,seconds:1e3,milliseconds:1,weeks:6048e5},u=function(e){return e instanceof h},l=function(e,t,n){return new h(e,n,t.$l)},d=function(e){return a.p(e)+"s"},f=function(e){return e<0?Math.ceil(e):Math.floor(e)},p=function(e,t){return e?e<0?{negative:!0,format:""+Math.abs(e)+t}:{negative:!1,format:""+e+t}:{negative:!1,format:""}},h=function(){function e(t,e,n){var i=this;if(this.$d={},this.$l=n,void 0===t&&(this.$ms=0,this.parseFromMilliseconds()),e)return l(t*c[d(e)],this);if("number"==typeof t)return this.$ms=t,this.parseFromMilliseconds(),this;if("object"==typeof t)return Object.keys(t).forEach(function(e){i.$d[d(e)]=t[e]}),this.calMilliseconds(),this;if("string"==typeof t){n=t.match(s);if(n)return e=n.slice(2).map(function(e){return null!=e?Number(e):0}),this.$d.years=e[0],this.$d.months=e[1],this.$d.weeks=e[2],this.$d.days=e[3],this.$d.hours=e[4],this.$d.minutes=e[5],this.$d.seconds=e[6],this.calMilliseconds(),this}return this}var t=e.prototype;return t.calMilliseconds=function(){var n=this;this.$ms=Object.keys(this.$d).reduce(function(e,t){return e+(n.$d[t]||0)*c[t]},0)},t.parseFromMilliseconds=function(){var e=this.$ms;this.$d.years=f(e/n),this.$d.months=f((e%=n)/r),this.$d.days=f((e%=r)/864e5),this.$d.hours=f((e%=864e5)/36e5),this.$d.minutes=f((e%=36e5)/6e4),this.$d.seconds=f((e%=6e4)/1e3),this.$d.milliseconds=e%=1e3},t.toISOString=function(){var e=p(this.$d.years,"Y"),t=p(this.$d.months,"M"),n=+this.$d.days||0,n=(this.$d.weeks&&(n+=7*this.$d.weeks),p(n,"D")),i=p(this.$d.hours,"H"),r=p(this.$d.minutes,"M"),o=this.$d.seconds||0,o=(this.$d.milliseconds&&(o+=this.$d.milliseconds/1e3),p(o,"S")),a=e.negative||t.negative||n.negative||i.negative||r.negative||o.negative,s=i.format||r.format||o.format?"T":"",a=(a?"-":"")+"P"+e.format+t.format+n.format+s+i.format+r.format+o.format;return"P"==a||"-P"==a?"P0D":a},t.toJSON=function(){return this.toISOString()},t.format=function(e){var e=e||"YYYY-MM-DDTHH:mm:ss",n={Y:this.$d.years,YY:a.s(this.$d.years,2,"0"),YYYY:a.s(this.$d.years,4,"0"),M:this.$d.months,MM:a.s(this.$d.months,2,"0"),D:this.$d.days,DD:a.s(this.$d.days,2,"0"),H:this.$d.hours,HH:a.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:a.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:a.s(this.$d.seconds,2,"0"),SSS:a.s(this.$d.milliseconds,3,"0")};return e.replace(i,function(e,t){return t||String(n[e])})},t.as=function(e){return this.$ms/c[d(e)]},t.get=function(e){var t=this.$ms,e=d(e);return"milliseconds"===e?t%=1e3:t="weeks"===e?f(t/c[e]):this.$d[e],0===t?0:t},t.add=function(e,t,n){t=t?e*c[d(t)]:(u(e)?e:l(e,this)).$ms;return l(this.$ms+t*(n?-1:1),this)},t.subtract=function(e,t){return this.add(e,t,!0)},t.locale=function(e){var t=this.clone();return t.$l=e,t},t.clone=function(){return l(this.$ms,this)},t.humanize=function(e){return o().add(this.$ms,"ms").locale(this.$l).fromNow(!e)},t.milliseconds=function(){return this.get("milliseconds")},t.asMilliseconds=function(){return this.as("milliseconds")},t.seconds=function(){return this.get("seconds")},t.asSeconds=function(){return this.as("seconds")},t.minutes=function(){return this.get("minutes")},t.asMinutes=function(){return this.as("minutes")},t.hours=function(){return this.get("hours")},t.asHours=function(){return this.as("hours")},t.days=function(){return this.get("days")},t.asDays=function(){return this.as("days")},t.weeks=function(){return this.get("weeks")},t.asWeeks=function(){return this.as("weeks")},t.months=function(){return this.get("months")},t.asMonths=function(){return this.as("months")},t.years=function(){return this.get("years")},t.asYears=function(){return this.as("years")},e}(),function(e,t,i){a=(o=i)().$utils(),i.duration=function(e,t){var n=i.locale();return l(e,{$l:n},t)},i.isDuration=u;var n=t.prototype.add,r=t.prototype.subtract;t.prototype.add=function(e,t){return u(e)&&(e=e.asMilliseconds()),n.bind(this)(e,t)},t.prototype.subtract=function(e,t){return u(e)&&(e=e.asMilliseconds()),r.bind(this)(e,t)}})}),Ua=(Wa.extend(v),["days","hours","minutes","seconds","milliseconds"]);function Fa(i){if(i){var t,r={mode:(t=i).dataset.CountDownMode||"CountDown",showUnit:t.dataset.CountDownShowUnit?kr(Ua.map(function(e){return[e,t.dataset.CountDownShowUnit.split("-").includes(e)]})):{days:!1,hours:!0,minutes:!0,seconds:!0,milliseconds:!1},isShowLabel:"false"!==t.dataset.CountDownIsShowLabel,showLabel:t.dataset.CountDownShowLabel?kr(t.dataset.CountDownShowLabel.split("-").map(function(e){return e.split(":")})):kr(Ua.map(function(e){return[e,e.charAt(0).toUpperCase()+e.slice(1)]})),behaviorAfter:t.dataset.CountDownBehaviorAfter||"keep",endDate:t.dataset.CountDownEndDate||Wa(Wa().format("YYYY-MM-DD")).add(1,"day").add(12,"hour").toString(),timeZone:"Project timezone",countDown:t.dataset.CountDownTime?Number(t.dataset.CountDownTime):0,countDownUnit:t.dataset.CountDownUnit||"minutes"},o="CountDown"===r.mode?i.dataset.CountDownStartTime?Wa.duration(Wa(i.dataset.CountDownStartTime).add(Number(r.countDown),r.countDownUnit).diff(Wa())):Wa.duration(Number(r.countDown),r.countDownUnit):Wa.duration(Wa(r.endDate).diff(Wa())),a="CountDown"===r.mode?i.dataset.CountDownStartTime?Wa.duration(Number(r.countDown),r.countDownUnit):o:i.dataset.CountDownStartTime?Wa.duration(Wa(r.endDate).diff(Wa(i.dataset.CountDownStartTime))):o,s=2,e=kr(Ua.filter(function(e){return r.showUnit[e]}).map(function(e,t){var n=o.as(e);return o=o.subtract(0|n,e),"milliseconds"===e&&(n=n/10|0),0===t&&(s=String(0|a.as(e)).length,(t=a.as(e))%1==0&&t===Math.pow(10,s-1)&&(s-=1),s<2&&(s=2)),[e,0|n]})),n=Object.values(e).every(function(e){return 0===e})||Object.values(e).some(function(e){return e<0});if(Object.values(e).some(function(e){return e<0}))for(var c in e)e[c]=0;n&&(i.dataset.CountDownEnd=!n||"CountDown"===r.mode&&0===r.countDown?"false":"true");n=i.querySelector(".pt-count-down-wrapper");n&&(i.dataset.CountDownFontSize&&""!==i.dataset.CountDownFontSize&&(i.style.fontSize=i.dataset.CountDownFontSize),i.dataset.CountDownFontFamily&&""!==i.dataset.CountDownFontFamily&&(i.style.fontFamily=i.dataset.CountDownFontFamily),i.dataset.CountDownFontWeight&&""!==i.dataset.CountDownFontWeight&&(i.style.fontWeight=i.dataset.CountDownFontWeight),n.style.cssText="\n        box-sizing: border-box;\n        display: flex;\n        justify-content: space-between;\n        width: 100%;\n        height:".concat("true"===i.dataset.CountDownIsShowLabel?"100%":"fit-content",";\n        user-select: none;\n    "),n.innerHTML=Object.entries(e).map(function(e,t){var e=ie(e,2),n=e[0],e=e[1];return'\n            <div contenteditable="false" class="pt-count-down-time" style="box-sizing: border-box;display: flex;flex-direction: column;align-items: center;min-width: fit-content;height: 100%;flex: '.concat(0!==t?1:s-1," 1 ").concat(0!==t?3.11:3.11+1.68*(s-2),'em;;">\n                <div contenteditable="false" class="pt-count-down-number-wrapper" style="box-sizing: border-box;display: flex;width: 100%;flex: 1 1;">\n                    ').concat(Array.from(Array.from({length:(0===t?s:2)-String(e).length},function(){return"0"}).join("")+e).map(function(e){return'\n                            <div contenteditable="false" style="height: 1.43em;flex:0 1 4px;display:inline-block;"></div>\n                            <div\n                                contenteditable="false"\n                                class="pt-count-down-number"\n                                style="\n                                    display:inline-block;position: relative;box-sizing: border-box;display: flex;justify-content: center;align-items: center;max-width: calc(1.43em - 8px);height: 1.43em;font-size: 1em;flex: 1 1000 calc(1.43em - 8px);\n                                    color:'.concat(i.dataset.CountDownNumColor||"#fff",';\n                                "\n                            >\n                                <div style="display:inline-block;position: absolute;width: calc(100% + 8px); height: 100%;left:-4px;top: 0;background:').concat(i.dataset.CountDownNumBgColor||"#091e42",";border-radius:").concat(i.dataset.CountDownNumBorderRadius||"4",'px;"></div>\n                                <div style="z-index: 1;display:inline-block;">').concat(e,'</div>\n                            </div>\n                            <div contenteditable="false" style="height: 1.43em;flex:0 1 4px;display:inline-block;"></div>\n                        ')}).join('<div contenteditable="false" style="height: 1.43em;flex:1 100 0.25em;display:inline-block;"></div>'),"\n                </div>\n                ").concat(r.isShowLabel?'<div contenteditable="false" class="pt-count-down-label" style="box-sizing: border-box;position: relative;margin-top: 0 !important;font-size: .4em !important;flex-wrap: nowrap;color: #091e42;flex: 0 0;color:'.concat(i.dataset.CountDownLabelColor||"",';">\n                        <div contenteditable="false" style="opacity:0;display:inline-block;">透</div>\n                        <div contenteditable="false" style="display:inline-block;position: absolute;left: 50%;top: 50%;transform: translate(-50%, -50%);white-space: nowrap;">').concat(r.showLabel[n],"</div>\n                    </div>"):"","\n            </div>\n        ")}).join('\n            <div\n                contenteditable="false"\n                class="pt-count-down-divide"\n                style="\n                    box-sizing: border-box;line-height: 1.43em;font-size: 1em !important;color: #091e42;margin-top: 0 !important;text-align: center;flex: 2.5 0.1 0.75em;\n                    color:'.concat(i.dataset.CountDownDivideColor||"",';\n                "\n            >\n                :\n            </div>\n        ')))}}var Va=function(){function e(){f(this,e),this.timer=null,this.onmessage=null}return s(e,[{key:"postMessage",value:function(e){this.timer&&clearInterval(this.timer),"stop"===e?this.timer=null:"function"==typeof this.onmessage&&(this.timer=setInterval(this.onmessage,1e3))}}]),e}();function Ba(){try{var e=new Blob(["(".concat(function(){var t=this,n=null;this.onmessage=function(e){e=e.data;n&&clearInterval(n),n="stop"===e?null:(t.postMessage(""),setInterval(function(){return t.postMessage("")},1e3))}}.toString(),")()")],{type:"application/javascript"});return new Worker(URL.createObjectURL(e))}catch(t){return new Va}}var Ha=function(){function n(e){var t=this;f(this,n),this.type=e,this.set=new Set,this.state="stop",this.add=this.add.bind(this),this["delete"]=this["delete"].bind(this),this.checkSizeToRunOrStop=this.checkSizeToRunOrStop.bind(this),this.run=this.run.bind(this),this.stop=this.stop.bind(this),this.update=this.update.bind(this),this.closePopup={},"seconds"===e?(this.worker=Ba(),this.worker.onmessage=function(){return t.update()}):this.worker=null}return s(n,[{key:"add",value:function(e){e&&(e.dataset.CountDownEnd="false",this.set.add(e),this.checkSizeToRunOrStop())}},{key:"delete",value:function(e){this.set["delete"](e),this.checkSizeToRunOrStop()}},{key:"checkSizeToRunOrStop",value:function(){"stop"===this.state?0<this.set.size&&this.run():0===this.set.size&&this.stop()}},{key:"run",value:function(){this.state="run","milliseconds"===this.type?this.worker=requestAnimationFrame(this.update):this.worker.postMessage("start")}},{key:"stop",value:function(){this.set.clear(),this.state="stop","milliseconds"===this.type?(cancelAnimationFrame(this.worker),this.worker=null):this.worker.postMessage("stop")}},{key:"update",value:function(){var t=this;this.set&&(this.set.forEach(function(e){e.parentNode&&"false"===e.dataset.CountDownEnd?Fa(e,t.type):("true"===e.dataset.CountDownEnd&&"close"===e.dataset.CountDownBehaviorAfter&&"function"==typeof t.closePopup[e.dataset.popupId]&&t.closePopup[e.dataset.popupId](),t["delete"](e))}),"milliseconds"===this.type&&"stop"!==this.state&&(this.worker=requestAnimationFrame(this.update)))}}]),n}(),qa=new(function(){function e(){f(this,e),this.addCountDown=this.addCountDown.bind(this),this.deleteCountDown=this.deleteCountDown.bind(this),this.clear=this.clear.bind(this),this.setClosePopup=this.setClosePopup.bind(this),this.updateSet={seconds:new Ha("seconds"),milliseconds:new Ha("milliseconds")}}return s(e,[{key:"setClosePopup",value:function(e,t){this.updateSet.seconds.closePopup[e]=t,this.updateSet.milliseconds.closePopup[e]=t}},{key:"addCountDown",value:function(e){e&&"insert.count_down"===e.dataset.menuAction&&(e.dataset.CountDownShowUnit.includes("milliseconds")?(this.updateSet.seconds["delete"](e),this.updateSet.milliseconds.add(e)):(this.updateSet.milliseconds["delete"](e),this.updateSet.seconds.add(e)))}},{key:"deleteCountDown",value:function(e){this.updateSet.seconds["delete"](e),this.updateSet.milliseconds["delete"](e)}},{key:"clear",value:function(){this.updateSet.seconds.stop(),this.updateSet.milliseconds.stop()}}]),e}());function Ga(e){!e||(e=Array.from(e.querySelectorAll('[data-menu-action="insert.count_down"]')))instanceof Array&&!e.length||e.forEach(function(e){qa.deleteCountDown(e)})}function za(e,t,n){var e="pt_countdown_".concat(e,"_").concat(t),t=eo(),i=n?vr(e):sr.getItem(e);return i||(i=new Date+"",n?gr(e,i):sr.setItem(e,i,1e3,"/",t)),i}var Ja="data-track-event-name",Ya="data-track-event-properties",Ka="data-silex-type",Xa="data-menu-action",Qa="insert.popup",Za="pt-temp-a";function es(){var a,n=0,s=function s(e){if(null==e)return!0;if(null==e?void 0:e.hasAttribute(Za))return!0;e=e.nodeName.toLowerCase();if("html"===e)return!0;var t=(new Date).getTime();return t-n<1e3&&"a"!==e||(n=t,!1)},c=function c(e){var t,n=Ir(e),i=Cr(n,Xa,Qa),r=Ar(n,i?Ka:""),o=r.eventName,r=r.properties,e={target:e};if(o&&(t=ta(Object.assign({},r||{},{eventName:decodeURIComponent(o)})),e.event={event:o,properties:r,te:t}),s(n))return!1;pa.emit("handleClick",e),i||o&&a({event:o,properties:r})};return{initPageTrackEvent:function(){Er(document,"click",c,!1)},initPopupFormSubmitBtnEvent:function(e){null!=e&&e.querySelectorAll("[".concat(ca,'="submit"]')).forEach(function(e){var t,n;e.getAttribute(Ja)||(t=(n=Ar(e)).eventName,n=n.properties,e.setAttribute(Ja,t),e.setAttribute(Ya,JSON.stringify(n||{})))})},sendTrackEvent:a=function a(e){var t=e.event,e=e.properties;t&&window.ptengine&&(t=decodeURIComponent(t),window.ptengine.track(t,e||{}))}}}function ts(e){var t;e.meta={level:"error"},t={product:"pt-ptx-sdk",url:window.location.href,env:"production",profileId:L.profileId,meta:{level:"info"}},nr({url:"https://exceptcollect.ptengine.com/post",method:"POST",data:Object.assign(t,e)})}function ns(e){if(e){var g=e.querySelectorAll('[data-ec-asset-type="video"]');if(0<g.length)for(var e=document.head.querySelector("script.ecVideoJs"),t=document.head.querySelector("link.ecVideoCss"),n=document.head.querySelector("script.ecYoutube"),v=(e||((e=document.createElement("script")).setAttribute("class","ecVideoJs"),e.src="https://ptxpublicres.ptengine.jp/scripts/video/ec-video.js",document.head.appendChild(e)),t||((e=document.createElement("link")).setAttribute("class","ecVideoCss"),e.href="https://ptxpublicres.ptengine.jp/styles/ec-video.css",e.rel="stylesheet",document.head.appendChild(e)),n||((t=document.createElement("script")).setAttribute("class","ecYoutube"),t.src="https://ptxpublicres.ptengine.jp/scripts/video/ec-youtube.js",document.head.appendChild(t)),function v(){var a=g[y],e=a.getAttribute("data-ec-asset")||"";if(!e)return{v:void 0};var s,c,u,t,n,i,r,o,l,d=JSON.parse(e),f=!0,e=(d.video&&d.video.hideControls&&(f=!1),d.videoUrl.videoType),p=a.querySelector("div.ecVideoBase"),h=a.querySelector("div.ecYoutube");"url"===e&&p&&""!==d.videoUrl.data&&(s=p.getAttribute("tip"),(c={controls:f,autoplay:d.video&&d.video.autoPlay||!1,loop:d.video&&d.video.loop||!1,poster:d.video&&d.video.poster||"",preload:"auto",fluid:!0,controlBar:{pictureInPictureToggle:!1,currentTimeDisplay:!0,timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!0,volumePanel:{inline:!1}},sources:[{src:d.videoUrl.data,type:"video/mp4"}]}).autoplay&&(c.muted=!0,c.poster=""),u=setInterval(function(){var e,t,n,i,r,o;window.videojs&&(clearInterval(u),(e=new window.videojs(p.querySelector(".ecVideoPlayer"),c)).on("error",function(){e.errorDisplay.contentEl_.innerHTML='<div style="background: rgb(9,30,66); width: 100%; height: 100%; position: relative; overflow: hidden;"><div style="width: 90%; padding: 0; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); display: flex; align-items: center; justify-content: center; font-size: 12px;"><img src="https://ptxpublicres.ptengine.jp/images/caution.svg" style="width: 2.8em; height: 2.8em; margin-right: 1em; color: rgb(255, 255, 255); opacity: 0.8;"/><p style="font-size: 12px; line-height: 20px; color: rgba(255, 255, 255, .8); margin: 0; text-align: left;">'.concat(s,"</p></div></div>")}),t=a.querySelector(".vjs-big-play-button"),n=a.querySelector(".vjs-loading-spinner"),i=a.querySelector(".vjs-poster"),r=a.querySelector(".vjs-tech"),o=a.querySelector(".video-js"),t&&n&&(t.style.transform="translate(-50%, -50%)",t.style.display="block",n.style.margin="-25px 0 0 -25px",t.style.margin="0",r.style.width="100%",r.style.height="100%",o.style.width="100%",o.style.height="100%",r.style.padding="0",o.style.padding="0",r.style.background="#000"),d.video&&d.video.poster&&i&&(i.style.backgroundSize="cover"),d.video&&d.video.autoPlay&&e.play(),e.on("play",function(){t.style.display="none"}))},300)),"youtube"===e&&p&&h&&""!==d.videoUrl.data&&(e=p.getAttribute("tip"),t=d.videoUrl.data,n=function(e){if(null===e)return!1;e=e.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/);return!(!e||11!=e[7].length)&&e[7]}(t),i=a.querySelector("div.ecYoutubeBase").style,r=parseInt(i.width),o=parseInt(i.height),function(e){if(null===e)return;var t=/^(?:https?:\/\/)?(?:m\.|www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;if(e.match(t))return e.match(t)[1];return}(t)&&n?l=setInterval(function(){window.YT&&window.YT.Player&&(clearInterval(l),new window.YT.Player(h,{height:o,width:r,playerVars:{controls:f?1:0,autoplay:d.video&&d.video.autoPlay?1:0,loop:d.video&&d.video.loop?1:0,enablejsapi:1},videoId:n,events:{onReady:function(e){e.target.setVolume(0),d.video&&d.video.autoPlay&&e.target.playVideo()},onStateChange:function(e){d.video&&d.video.loop&&0===e.data&&e.target.playVideo()},onError:function(e){}}}))},300):a.querySelector("div.ecYoutubeBase").innerHTML='<div style="background: rgb(9,30,66); width: 100%; height: 100%; position: relative; overflow: hidden;"><div style="width: 90%; padding: 0; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); display: flex; align-items: center; justify-content: center; font-size: 12px;"><img src="https://ptxpublicres.ptengine.jp/images/caution.svg" style="width: 2.8em; height: 2.8em; margin-right: 1em; color: rgb(255, 255, 255); opacity: 0.8;"/><p style="font-size: 12px; line-height: 20px; color: rgba(255, 255, 255, .8); margin: 0; text-align: left;">'.concat(e,"</p></div></div>"))}),y=0;y<g.length;y++){var i=v();if("object"===z(i))return i.v}}}var is="pt-experience";function rs(){var e=document.createElement(is);return customElements.get(is)||customElements.define(is,function(){r(n,ee(HTMLElement));var t=o(n);function n(){var e;return f(this,n),(e=t.call(this)).attachShadow({mode:"open"}),e}return s(n,[{key:"connectedCallback",value:function(){this.styles=document.createElement("style"),this.styles.innerHTML="\n              :host {\n                all: initial;\n              }\n            ",this.shadowRoot.appendChild(this.styles)}}]),n}()),S.doc.body.appendChild(e),e}function os(){return S.doc.querySelector(is)||rs()}function as(e){os().shadowRoot.appendChild(e)}function ss(e,t,n){var n=!(2<arguments.length&&n!==undefined)||n,i=t&&S.doc.querySelector("#link_"+t),i=(i&&S.doc.getElementsByTagName("head")[0].removeChild(i),S.doc.createElement("style"));i.type="text/css",i.id="link_"+t,i.appendChild(S.doc.createTextNode(e)),i.appendChild(S.doc.createTextNode(".data-focus:focus { outline: 5px auto -webkit-focus-ring-color !important}")),Dr()&&n?as(i):S.doc.getElementsByTagName("head")[0].appendChild(i)}function cs(e,t){var t=!(1<arguments.length&&t!==undefined)||t,n=S.doc.createElement("script"),e="\n        try {\n            (function(){".concat(e,"})();\n        } catch (error) {\n            console.warn(error);\n        }");if(n.innerHTML=e,!Dr()||!t)return S.doc.getElementsByTagName("head")[0].appendChild(n),void S.doc.getElementsByTagName("head")[0].removeChild(n);as(n),e=n,os().shadowRoot.removeChild(e)}var us=function(){function d(e,t,n,i,r,o,a,s){f(this,d);var c=n.widgets,u=n.codeMode,l=(this.engageId=e,this.popup=n,this.terminalType=t,this.widgets=c||[],this.codeMode=u||{},this.context=i,this.current=r,this.engageType="4.0"===r.engageVersion&&r.engageType,this.currentWidgetIndex=0,this.container=null,this.engageWrap=null,this.renderList=null,this.currentWidgetConfig=null,this.isPreview=o,this.isShadowVersion=a,this.callback=s,this.showMask=!1,this.stickyMode="float",this.hasClosedByManual=!1,this.validate=Lo(),this.config={CONTROL_GROUP_ID:"CONTROL_GROUP_ID",DATA_BLOCK:"data-engage-block",DATA_WIDGET_ID:"data-engage-widget-id",DATA_SHOW_ENGAGE:"data-show-engage",DATA_GOTO_WIDGET:"data-goto-widget",DATA_BUTTON_TYPE:"data-button-type",BUTTON_FORM_SUBMIT:"button-submit-success",DATA_ACTION_CLICK:"data-engage-action-click",DATA_ACTION_CLOSE:"data-engage-action-close",DATA_ACTION_CONFIG:"data-engage-action",DATA_NO_PACKAGE:"data-engage-no-package",DATA_URL_CLOSE_POPUP:"data-engage-url-close-popup",BUTTON_URL:"button-url",BUTTON_TEL:"button-tel",BUTTON_CLOSE:"button-close",BUTTON_GOTO_WIDGET:"button-goto-widget",ICON_CLOSE:"icon-close",POSITION:"position",CENTERPOSITION:"pos-center",LAYOUTMODE:"layoutMode",MASKLAYERPPREFIX:"pt_mask_",DOM_TYPE:"data-silex-type",SUBMIT:"submit",BUTTON_HERF:"data-engage-button-url",BUTTON_TARGET:"data-engage-url-target",QUERY_SEND_LOADING:"data-send-loading"},this._handleCountDownEnd=this._handleCountDownEnd.bind(this),this.trackEventStore=es(),this);pa.on("routerChange",function(){l._handleRouterChange()}),pa.on("handleClick",function(e){var t=Ir(e.target);l.engageWrap&&l.engageWrap.contains(t)&&l._applyAction(e)})}return s(d,[{key:"_handleRouterChange",value:function(){this._handleClear()}},{key:"_getRenderList",value:function(){return this.widgets.reduce(function(e,t){var t=t.widgetNodes,n=t.html,i=t.css,r=t.commonStyle,t=t.script;return e.push({html:n+(void 0===t?"":t),css:(void 0===r?"":r)+i}),e},[])}},{key:"_getWidget",value:function(e){return!(e<0||e>this.renderList.length-1)&&this.renderList[e]}},{key:"_getWidgetConfig",value:function(e){return!(e<0||e>this.widgets.length-1)&&this.widgets[e]}},{key:"_gotoPrev",value:function(){var e=this.currentWidgetIndex-1;0<=e&&(this.currentWidgetIndex=e,this.render())}},{key:"_gotoNext",value:function(e){var t=this.renderList.length-1,n=this.currentWidgetIndex+1;if(n<=t){if(this.currentWidgetIndex=n,e)try{zo(this.currentWidgetConfig.widgetSettings.position)}catch(M){}this.render()}}},{key:"_handleGotoWidgetClick",value:function(e){e=e.getAttribute(this.config.DATA_GOTO_WIDGET);"prev"===e?this._gotoPrev():"next"===e&&this._gotoNext(!0)}},{key:"_handleClear",value:function(){try{this.hasClosedByManual||(this._execWidgetEvent(this.engageWrap,"unmounted"),this.engageWrap&&this.container.removeChild(this.engageWrap),this.showMask&&this.currentWidgetConfig&&Go(this.currentWidgetConfig.widgetId)),this.currentWidgetConfig&&zo(this.currentWidgetConfig.widgetSettings.position),I.set(this.current.exp_id,null)}catch(M){}}},{key:"_handleCloseClick",value:function(e){this._execWidgetEvent(e,"unmounted")}},{key:"_execWidgetEvent",value:function(e,t,n){S.win.ptEngage=S.win.ptEngage||{};var e=e&&Bo(e),i=S.win.ptEngage[e]||[];0<i.length&&(i.map(function(e){e[t]&&"function"==typeof e[t]&&e[t](),n&&"function"==typeof n&&(e.callback=n)}),e&&"unmounted"===t&&delete S.win.ptEngage[e])}},{key:"updateState",value:function(e,t){Object.prototype.hasOwnProperty.call(this,e)&&(this[e]=t)}},{key:"triggerEvent",value:function(e,t){this._execWidgetEvent(this.engageWrap,e,t)}},{key:"_renderHtmlCssAndScript",value:function(){var e=this._getWidget(this.currentWidgetIndex);if(e){var t=e.html;if((e=Zo(e.css,"#engage_".concat(this.popup.popupId)))&&ss(e,this.popup.popupId+this.currentWidgetConfig.widgetId,this.isShadowVersion),t&&(this.engageWrap.innerHTML=t),this.engageWrap.style.display="none",function(t,e,n){if(e){var i,e=Array.from(e.querySelectorAll('[data-menu-action="insert.count_down"]'));if(!(e instanceof Array)||e.length)return i=!1,e.forEach(function(e){"CountDown"===e.dataset.CountDownMode&&(e.dataset.CountDownStartTime=za(t,e.dataset.silexId,n)),e.dataset.popupId=t,Fa(e),"true"===e.dataset.CountDownEnd&&"close"===e.dataset.CountDownBehaviorAfter&&(i=!0)}),i}}(this.popup.popupId,this.engageWrap,this.isPreview))return!0;ns(this.engageWrap),this.container&&this.container.appendChild(this.engageWrap),this.triggerEvent("unmounted"),Ko(this.engageWrap),this.engageWrap.style.display="block",this._initActionStyle(this.engageWrap),this.triggerEvent("mounted",function(e){e&&"function"==typeof e&&e(this.engageId)}),Fr(this.engageWrap,this.config)}}},{key:"_checkPath",value:function(e,t){if(!e||!t)return!1;if(Or(e))return this._checkPath(Nr(e),t);if(e.hasAttribute(t)){var n=JSON.parse(e.getAttribute(t));if(n&&n.enableClickAction)return e;if(e.parentNode&&"body"!==e.nodeName.toLowerCase())return this._checkPath(e.parentNode,t)}else if(e.parentNode&&"body"!==e.nodeName.toLowerCase())return this._checkPath(e.parentNode,t);return!1}},{key:"_initActionStyle",value:function(e){var t=e.querySelectorAll("div[".concat(this.config.DATA_BUTTON_TYPE,'="').concat(this.config.SUBMIT,'"]'));ua(e).forEach(function(e){e.el.style.cursor="pointer"}),t.forEach(function(e){e.style.cursor="pointer"})}},{key:"_applyAction",value:function(e){var t,n,i=this,r=e.target,u=e.event,l=this,e=Ir(r),o=ua(this.engageWrap),a=(t=e,!(-1<["input","select","option","radio","textarea","checkbox"].findIndex(function(e){return e===t.tagName.toLocaleLowerCase()}))),s=Cr(e,this.config.DOM_TYPE),c=l._checkPath(e,this.config.DATA_ACTION_CONFIG),o=o.find(function(e){return c===e.el}),d=((null==o||null==(d=o.config)||null==(d=d.clickActionConfig)?void 0:d.link)||{}).openNewTab,f="beacon",p=(null!=u&&u.event&&!(f="xhr")===d&&(f="beacon"),function p(e,t,n){var i=da(e),t=t||{},r=t.enableClickAction,o=t.clickActionType,t=t.clickActionConfig,t=(null==t?void 0:t.link)||{},a=t.linkURL,s=t.closePopup,c=!0;if(r){switch(o){case"link":(i||a&&s)&&(l._closePopup(!i&&u||{},l.engageWrap,!1,e),c=!i);break;case"closePopup":l._closePopup(!i&&u||{},l.engageWrap,!i,e),i||N(l.engageId+"--"+l.popup.popupId,"hasClosed"),c=!1;break;case"showMessage":l._gotoNext(!0),c=!1}i&&N(l.engageId+"--"+l.popup.popupId,"formSubmitted")}r&&!l.isPreview&&c&&(O(l.context,l.current,"click",e,u||{},n),N(l.engageId+"--"+l.popup.popupId,"hasClicked"))});s.hasAttribute(this.config.DATA_ACTION_CLOSE)||s.querySelector("a[".concat(this.config.DATA_BLOCK,"]"))||s.hasAttribute(this.config.DATA_BLOCK)&&"A"===s.tagName?this._handlePopupClick(u||{},r,s,l.engageWrap,l.context,function(e){var t=1<arguments.length&&arguments[1]!==undefined?arguments[1]:"hasClicked";N(l.engageId+"--"+e,t)}):s.getAttribute(this.config.DATA_BLOCK)===this.config.BUTTON_FORM_SUBMIT?(d=Cr(e,this.config.DATA_ACTION_CLICK))?this._handlePopupClick(u||{},r,d,l.engageWrap,l.context,function(e){var t=1<arguments.length&&arguments[1]!==undefined?arguments[1]:"hasClicked";N(l.engageId+"--"+e,t)}):this._handleFormSubmit(s,u||{},f,this.engageWrap,function(){i._handleGotoWidgetClick(s),N(i.engageId+"--"+i.popup.popupId,"formSubmitted")}):a&&o?(n=o.config,(d=da(e))?l._handleFormSubmit(d,u||{},f,l.engageWrap,function(){la(r,s,n,u||{},p)}):la(r,s,n,u||{},p)):u&&(delete u.te,this.trackEventStore.sendTrackEvent(u))}},{key:"_renderCodeMode",value:function(){var n=this;(this.popup.code||[]).forEach(function(e){var t;"css"===e.type?(t="#engage_".concat(n.popup.popupId),(t=Zo(e.code,t))&&ss(t,n.popup.popupId,n.isShadowVersion)):cs(e.code,n.isShadowVersion)})}},{key:"_closePopup",value:function(e,t,n,i,r){this.hasClosedByManual=!0,"inject"===this.currentWidgetConfig.widgetSettings.stickyMode&&this._updateRootPageStyles("restore"),Ga(this.engageWrap),Tr(t,"click",this.popupClickHandle),t&&this.container&&this.container.hasChildNodes()&&this.container.removeChild(t),this.showMask&&Go(this.currentWidgetConfig.widgetId);try{zo(this.currentWidgetConfig.widgetSettings.position)}catch(M){}n&&(t=i.textContent||i.tagName.toUpperCase()||"unknow target",n=i.getAttribute(this.config.DATA_NO_PACKAGE),this.isPreview||n||O(this.context,this.current,"close",t,e||{}),r&&"function"==typeof r&&r(this.popup.popupId,"hasClosed")),2===lr()&&setTimeout(Wr)}},{key:"_handlePopupClick",value:function(e,t,n,i,r,o){var a=this,s=n.getAttribute(this.config.DATA_BLOCK),c=n.getAttribute(this.config.DATA_BUTTON_TYPE),u=n.getAttribute(this.config.BUTTON_HERF),l=n.getAttribute(this.config.BUTTON_TARGET)?"_blank":"_self";if(n.hasAttribute(this.config.DATA_ACTION_CLICK)||n.hasAttribute(this.config.DATA_ACTION_CLOSE)||n.querySelector("a[".concat(this.config.DATA_BLOCK,"]"))||n.hasAttribute(this.config.DATA_BLOCK)&&"A"===n.tagName){t.preventDefault();var d,f="beacon",p=(null!=e&&e.event&&(f="xhr"),n.tagName.toUpperCase()),p=n.textContent||p||"unknow target";if(!(n.parentNode&&"image"===n.parentNode.getAttribute("data-engage-block")||n&&"image"===n.getAttribute("data-engage-block"))||(d=n.querySelector("img"))&&(p=d.getAttribute("alt")),s===this.config.BUTTON_CLOSE||s===this.config.ICON_CLOSE)this._closePopup(e||{},i,!0,n,o);else if(s&&s===this.config.BUTTON_GOTO_WIDGET){try{zo(this.currentWidgetConfig.widgetSettings.position),this.showMask&&Go(this.currentWidgetConfig.widgetId),this.isPreview||O(r,this.current,"click",p,e||{})}catch(t){}this._handleGotoWidgetClick(n)}else s&&s===this.config.BUTTON_FORM_SUBMIT?("_blank"===l&&(f="beacon"),this._handleFormSubmit(n,e||{},f,i,function(){a._handleGotoWidgetClick(n),N(a.engageId+"--"+a.popup.popupId,"formSubmitted")})):this.isPreview||O(r,this.current,"click",p,e||{});if(n.href&&!/^javascript:(void\(0\))?;?$/.test(n.href)&&(u=n.href),n.target&&"_blank"===n.target&&(l=n.target),u&&!/^javascript:(void\(0\))?;?$/.test(u))if("_blank"===l&&(f="beacon"),"submit"===c)this._handleFormSubmit(n,e||{},f,i,function(){if(N(a.engageId+"--"+a.popup.popupId,"formSubmitted"),"_blank"===l)try{S.win.open(u,"_blank")}catch(e){P()}else S.loc.href=u});else if("_blank"===l)try{S.win.open(u,"_blank")}catch(h){P()}else S.loc.href=u;s===this.config.BUTTON_URL&&(n.getAttribute(this.config.DATA_URL_CLOSE_POPUP)||n.getAttribute(this.config.DATA_ACTION_CLOSE))&&this._closePopup(e||{},i,!1),o&&"function"==typeof o&&o(this.popup.popupId)}}},{key:"_handleCountDownEnd",value:function(){try{Ga(this.engageWrap),this.engageWrap&&this.container&&this.container.removeChild(this.engageWrap),this.showMask&&Go(this.currentWidgetConfig.widgetId),this.isPreview||O(this.context,this.current,"close"),P(),N(this.engageId+"--"+this.popup.popupId,"hasClosed"),Tr(this.engageWrap,"click",this.popupClickHandle);try{zo(this.currentWidgetConfig.widgetSettings.position)}catch(M){}}catch(M){}}},{key:"_handleFormSubmit",value:function(n,i,o,e,a){var s=this;if(null==n||!n.hasAttribute(s.config.QUERY_SEND_LOADING)){for(var t,r,c,u=e.querySelectorAll('[data-menu-action="insert.field"]'),l=[],d=[],f=!1,p=!1,h=0;h<u.length;h++){var g=u[h].getAttribute("data-field-id"),v=u[h].querySelector(".control input, .control textarea, .control select"),y=v.value,m=u[h].getAttribute("data-ptx-componentid"),w=JSON.parse(v&&v.getAttribute("data-ptx-validators")),v=v&&v.getAttribute("data-ptx-property"),b=!1,_=u[h].querySelector(".error");if(_&&(_.classList=["error"],_.style.display="none"),w&&!w.allowDuplicate&&(p=!0),w&&w.required)if((t=y)&&""!==t)"email"!==m||ga(y)||(b=D("form_error_tips_email_invalid")),"phone"!==m||va(y)||(b=D("form_error_tips_phone_invalid"));else switch(m){case"name":b=D("form_error_tips_name_required");break;case"email":b=D("form_error_tips_email_required");break;case"phone":b=D("form_error_tips_phone_required");break;case"dropdownlist":b=D("form_error_tips_dropdown_required");break;default:b=D("form_error_tips_normal")}else y&&""!==y&&("email"!==m||ga(y)||(b=D("form_error_tips_email_invalid")),"phone"!==m||va(y)||(b=D("form_error_tips_phone_invalid")));b&&_&&(_.innerText=b,_.style.display="block",f=!0),l.push({fieldID:u[h].getAttribute("data-field-id"),fieldValue:y,fieldName:u[h].querySelector(".label").innerText,fieldType:m}),d.push({fieldID:g,fieldName:u[h].querySelector(".label").innerText,alowDuplicate:w.allowDuplicate,allowConnect:!!w.allowConnect,connectProperty:v||"",fieldValue:y,error:b,errorDom:_})}if(p){var k,S=(S=d.filter(function(e){return!e.alowDuplicate&&e.fieldValue&&""!==e.fieldValue}))&&S.map(function(e){return{fieldID:e.fieldID,fieldValue:e.fieldValue}}),E=this.context,T=this.current,I=this.popup.popupId,e=this.isPreview,x={url:"https://xbackend.ptengine.jp/formVerification",method:"POST","async":!1,contentType:"application/json",data:JSON.stringify({field:S,sid:L.profileId,engageID:this.engageId,engageVersion:this.current.exp_id,configVerion:"3.0",creativeID:this.popup.popupId}),callback:function(e){var r,t;setTimeout(function(){null!=n&&n.removeAttribute(s.config.QUERY_SEND_LOADING)}),(e=JSON.parse(e))&&"success"===e.status?(r=e.data,d.forEach(function(e,t){var n,i;r[e.fieldID]===undefined||e.error||!0!=!r[e.fieldID]||(n=e.fieldID,i=D("form_error_tips_duplicate"),-1<n.indexOf("name")&&(i=D("form_error_tips_name_duplicate")),-1<n.indexOf("email")&&(i=D("form_error_tips_email_duplicate")),-1<n.indexOf("phone")&&(i=D("form_error_tips_phone_duplicate")),e.error=i,e.errorDom.innerText=e.error,e.errorDom.style.display="block",f=!0)}),f||(T.variant={formContent:JSON.stringify(l),fieldIDList:JSON.stringify(d),creativeID:I},O(E,T,"submit",null,i||{},o),a&&"function"==typeof a&&a(),t={},d.forEach(function(e){e.connectProperty&&(t[e.connectProperty]=e.fieldValue)}),"{}"!==JSON.stringify(t)&&ptengine&&ptengine.identify&&ptengine.identify("",t,"engage"))):ts({module:"ptx-form-submit-api",message:"Form Submit field: ".concat(JSON.stringify(S),", Error info: ").concat(e)})}};e?(k=this._checkPreviewForm(I,S),d.forEach(function(e,t){k[e.fieldID]===undefined||e.error||!0!=!k[e.fieldID]||(e.error="error_duplicate",e.errorDom.classList=["error allow-duplicate"],f=!0)}),f||(e=l,null!=(c=vr(r=I))&&((C=(c=JSON.parse(c)).previewFormContent)?C.concat(e):C=e,c.previewFormContent=C,gr(r,JSON.stringify(c))),a&&"function"==typeof a&&a())):(null!=n&&n.setAttribute(s.config.QUERY_SEND_LOADING,"true"),nr(x))}else{if(f)return;var e=this.context,C=this.current,A=(C.variant={formContent:JSON.stringify(l),fieldIDList:JSON.stringify(d),creativeID:this.popup.popupId},{});d.forEach(function(e){e.connectProperty&&(A[e.connectProperty]=e.fieldValue)}),"{}"!==JSON.stringify(A)&&ptengine&&ptengine.identify&&ptengine.identify("",A,"engage"),this.isPreview&&N(this.engageId+"--"+this.popup.popupid,"previewFormContent",JSON.stringify(l)),this.isPreview||O(e,C,"submit",null,i||{},o)}p||(a&&"function"==typeof a&&a(),setTimeout(function(){null!=n&&n.removeAttribute(s.config.QUERY_SEND_LOADING)}))}}},{key:"_checkPreviewForm",value:function(e,t){var e=vr(e=e),i={};if(t.forEach(function(e){i[e.fieldID]=!0}),!e)return i;var r=JSON.parse(e).previewFormContent;return r&&t.forEach(function(e){var t=e.fieldID,n=e.fieldValue;i[e.fieldID]=!r.some(function(e){return e.fieldID===t&&e.fieldValue===n})}),i}},{key:"_checkPopupStopTrigger",value:function(e,t,n,i,r,o){for(var a=("POPUP"===this.engageType||"STICKY_BAR"===this.engageType?e.current:n).trigger.stop||[],s=0;s<a.length;s++){var c=a[s];if(t.setValue({value:c.value,current:n,context:e,container:i,engageWrap:r,renderObj:o}),t.setCondition(c.condition),t.setValidator(Do(c.type)),t.run(),!n.goNext)return!0}return!1}},{key:"_checkPopupFrequencyTrigger",value:function(e,t,n,i,r,o){return"session"===(e.current.trigger.frequency||{}).type&&(t.setValue({value:e.current.trigger.frequency.times,current:n,context:e,container:i,engageWrap:r,renderObj:o}),t.setValidator(Do("frequencySessionTimes")),t.run(),!n.goNext)}},{key:"_updateRootPageStyles",value:function(e,t){var n;"update"===e?(document.body.getAttribute("ptx_stickybar_origin_top_value")||(n="auto"===(n=window.getComputedStyle(document.body).getPropertyValue("top"))?0:Number(n.replace("px","")),document.body.setAttribute("ptx_stickybar_origin_top_value",n)),n=Number(document.body.getAttribute("ptx_stickybar_origin_top_value")),document.body.style.position="relative",document.body.style.top=t+n+"px"):"restore"===e&&(t=Number(document.body.getAttribute("ptx_stickybar_origin_top_value")),document.body.style.position="static",document.body.style.top=t+"px")}},{key:"render",value:function Ps(){var e,t,n=this._getWidgetConfig(this.currentWidgetIndex);(this.currentWidgetConfig=n)&&(e=n.widgetSettings&&n.widgetSettings.position)&&Ho(this.terminalType,e)&&(this._renderHtmlCssAndScript()?this._handleCountDownEnd():(this._renderCodeMode(),this.renderAfter(),this.engageWrap&&"false"!==this.engageWrap.getAttribute(this.config.DATA_SHOW_ENGAGE)?((t=this.engageWrap.querySelector('[data-engage-block="engage"]'))&&(n.widgetSettings&&!n.widgetSettings.showMask?(t.style.left="auto",t.style.right="auto",t.style.top="auto",t.style.bottom="auto"):n.widgetSettings.showMask&&(this.showMask=!0,t.style.position="fixed"),"pos-sticky-top"===n.widgetSettings.position&&"inject"===n.widgetSettings.stickyMode&&this._updateRootPageStyles("update",n.widgetSettings.height)),Yo(this.engageWrap),this.trackEventStore.initPopupFormSubmitBtnEvent(this.engageWrap)):-1!==(n=(t=I.get(this.config.POSITION)||[]).indexOf(e))&&(t.splice(n,1),I.set(this.config.POSITION,t))))}},{key:"renderAfter",value:function(){var t,e,n;t=this.popup.popupId,e=this.engageWrap,n=this.isPreview,!e||(e=Array.from(e.querySelectorAll('[data-menu-action="insert.count_down"]')))instanceof Array&&!e.length||e.forEach(function(e){("CountDown"!==e.dataset.CountDownMode||e.dataset.CountDownTime&&0<Number(e.dataset.CountDownTime))&&("CountDown"===e.dataset.CountDownMode&&(e.dataset.CountDownStartTime=za(t,e.dataset.silexId,n)),qa.addCountDown(e))}),qa.setClosePopup(this.popup.popupId,this._handleCountDownEnd),S.win.ptEngage=S.win.ptEngage||{},S.win.ptEngage&&(S.win.ptEngage[this.engageId]=this),this.callback&&"function"==typeof this.callback&&this.callback()}},{key:"mounted",value:function(e,t){var n=this;if(this.container=e,this.engageWrap=t,!this.popup.renderFinish||this.popup.repeat){var i=!this.current.heatmapVersion&&this._checkPopupStopTrigger({current:this.current},this.validate,this.popup,e,t,this),e=("POPUP"===this.engageType||"STICKY_BAR"===this.engageType)&&this._checkPopupFrequencyTrigger({current:this.current},this.validate,this.popup,e,t,this);if(!i&&!e){if(this.popup.popupId!==this.config.CONTROL_GROUP_ID)return this.submitCallback=function(e,t){n.showMask&&Go(n.currentWidgetConfig.widgetId),n.isPreview||O(e,t,"submit"),N(n.engageId+"--"+n.popup.popupId,"formSubmitted")},this.renderList=this._getRenderList(),this.render(),this;this.callback&&"function"==typeof this.callback&&this.callback()}}}},{key:"unmounted",value:function(){}}]),d}(),ls=function(){function r(e,t,n){f(this,r),this.type=e,this.code=t,this.callback=n,this.hasPageJumped=!1;var i=this;pa.on("routerChange",function(){i._handleRouterChange()})}return s(r,[{key:"_handleRouterChange",value:function(){this.hasPageJumped=!0}},{key:"_getDocHead",value:function Vo(){var e=S.doc.getElementsByTagName("head")[0];return e||(e=S.doc.createElement("head"),S.doc.body.parentNode.insertBefore(e,S.doc.body)),e}},{key:"_createStyleElement",value:function(e){var t=S.doc.createElement("style");return t.cssText!==undefined?t.cssText=e:t.innerHTML=e,t}},{key:"_createScriptElement",value:function(e){var t=null,n=null;try{t=new Function("element",e)}catch(i){n=i}return{jsJd:t,jsError:n}}},{key:"_attachElementToHead",value:function(e){this._getDocHead().appendChild(e)}},{key:"_addStyle",value:function(e){e=this._createStyleElement(e);this._attachElementToHead(e)}},{key:"_runScript",value:function(e){var t=this._getDocHead(),n=document.createElement("script"),e="\n        try {\n            (function(){".concat(e,"})();\n        } catch (error) {\n            console.warn(error);\n        }");n.innerHTML=e,t.appendChild(n),t.removeChild(n)}},{key:"mounted",value:function(){if(!this.hasPageJumped){switch(this.type){case"css":this._addStyle(this.code);break;case"javascript":Xo(this.code)}this.callback&&this.callback()}}}]),r}();function ds(e,t){function n(e,t){t=t||{bubbles:!1,cancelable:!1,detail:undefined};var n=S.doc.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}S.win.CustomEvent=S.win.CustomEvent||(n.prototype=S.win.Event.prototype,n);try{return new S.win.CustomEvent(e,t)}catch(i){return null}}function fs(e,t){try{var n=new ds(e,{bubbles:!1,cancelable:!1,detail:t||{}});n&&(S.win.dispatchEvent&&"function"==typeof S.win.dispatchEvent?S.win.dispatchEvent(n):S.win.fireEvent&&"function"==typeof S.win.fireEvent&&S.win.fireEvent(n))}catch(i){}}function ps(e){var t,n,i,r,o;null!=(t=window)&&null!=(t=t.ptengine)&&t.__antiFlicker&&(t=null==(t=window)||null==(t=t.ptengine)?void 0:t.__antiFlicker,n=t.hasInline,i=t.hasRedirect,!(r=t.end)||i&&"redirectControlGroup"!==e||(o=function o(){try{r&&(n?setTimeout(function(){r()},16):r())}catch(M){}},!n||"complete"===window.document.readyState?o():(T(window.document,"DOMContentLoaded",o),T(window.document,"readystatechange",o),T(window,"load",o))))}var hs=function(){function o(e,t,n,i){f(this,o),this.context=e,this.engage=t,this.terminalType=n,this.callback=i,this.currentVersion=null,this.currentTerminal=null,this.isPreview=t.isPreview,this.inlineIsRendered=!1,this.hasSendInlineView=!1,this.hasSendCodeView=!1,this.engageType="4.0"===t.engageVersion&&t.engageType,this.renderdEngage={popups:[]},this.isSendVersionEvent=!1,this.config={CONTROL_GROUP_ID:"CONTROL_GROUP_ID",CONTAINER_ID:"ptxEngage",currentRenderInstance:null},this.isPreview?this.renderPreview(t):this.mounted();var r=this;this.hasPageJumped=!1,pa.on("routerChange",function(){r.hasPageJumped=!0}),pa.on("bindDocKeydown",this._keydownListener),pa.on("bindDocKeyup",this._keyupListener),pa.on("bindDocClick",$r)}return s(o,[{key:"_keydownListener",value:function(e){var t=Ir(e);"Enter"==e.key&&(fs("Enter",t),t.click(),"button-close"==t.getAttribute("data-engage-block")&&jr("Escape")),"Tab"==e.key&&t.classList.remove("data-focus"),"ArrowDown"==e.key&&"SELECT"==t.tagName&&fs("Enter",t)}},{key:"_keyupListener",value:function(e){var t=Ir(e);"Tab"==e.key&&"PT-EXPERIENCE"===t.tagName?jr(e.key,"first"):"Escape"===e.key?jr(e.key):"Tab"===e.key&&(t.classList.add("data-focus"),"TEXTAREA"!==t.tagName&&"INPUT"!==t.tagName||fs("Enter",t))}},{key:"_sendVersionEvent",value:function(){var e,t,n,i,r,o,a;this.isSendVersionEvent||(this.isSendVersionEvent=!0,e=(t=this.engage).engageId,t.engageName,n=(t=this.currentVersion||{}).versionId,t.versionName,n&&(i="setAbtest",r={category:"ptx_heatmap",expName:"engageName",expId:e,verName:"versionName",verId:n},o=0,a=setInterval(function(){var e,t;o+=50,(window.analytics||1e3<o)&&(clearInterval(a),window._pt_sp_2&&(e=window.ptengine.__sid||localStorage.getItem("PTX_SID"),t=window.ptengine.__pteSid||localStorage.getItem("PTSID"),e&&t&&e===t&&window._pt_sp_2.push(i,Object.assign({},r,{disablePtx:!0}))))},50)))}},{key:"_sendEventBeforeRedirect",value:function(n,i,r){var o=0,a=setInterval(function(){var e,t;o+=50,(window.analytics||1e3<o)&&(clearInterval(a),window._pt_sp_2&&(e=window.ptengine.__sid||localStorage.getItem("PTX_SID"),t=window.ptengine.__pteSid||localStorage.getItem("PTSID"),e&&t&&e===t&&window._pt_sp_2.push(n,Object.assign({},i,{disablePtx:!0}))),setTimeout(function(){localStorage.setItem("PT_REDIRECT_TARGET_URL",r);var e=S.win,e=r.indexOf(e.location.hostname)<0,t=r;e&&(t=Kr(r)),S.loc.href=t},100))},50)}},{key:"_sendViewPackage",value:function(e){var t=this.engage,n=t.versions,i=t.engageId,r=t.currentVersionId,t=(this.currentVersion||(n||[]).find(function(e){return e.versionId===r})).versionId,n=Object.assign({},this.engage,{engagerId:i,exp_id:t,variant:{creativeType:e}});O(this.context,n,"view"),N(t)}},{key:"_getTerminalInfo",value:function(e,t){for(var n=null,i=0,r=e.length;i<r;i++)if(e[i].type===t){n=e[i];break}return n}},{key:"_createEngageWrap",value:function(e,t){var n=S.doc.getElementById(e);return n||((n=S.doc.createElement("div")).setAttribute("id",e),n.setAttribute("focusindex",t)),n}},{key:"_getEngageWrapperId",value:function(e){return"engage_"+e}},{key:"_getEngageContainerWrapper",value:function(e){var t=1<arguments.length&&arguments[1]!==undefined?arguments[1]:"",n=S.doc.getElementById(this.config.CONTAINER_ID+"_"+t);return n||((n=S.doc.createElement("div")).setAttribute("id",this.config.CONTAINER_ID+"_"+t),function(e,t){t=!(1<arguments.length&&t!==undefined)||t,Dr()&&t?as(e):S.doc.body.appendChild(e)}(n,e)),n}},{key:"_checkPopupTrigger",value:function(e,t,n,i,r,o,a){var s=this.engage,c=s.triggerFlag,s=s.heatmapVersion,u=!1,l=["start"];!c&&!this.isPreview||s||l.unshift("stop");for(var d=0;d<l.length;d++){for(var f=l[d],p=e[f]||[],h=0;h<p.length;h++){var g=p[h];if(n.setValue({value:g.value,current:i,context:t,container:r,engageWrap:o,renderObj:a}),n.setCondition(g.condition),n.setValidator(Do(g.type)),n.run(),"stop"===f&&!i.goNext){u=!0;break}}if(u)break}u||0!==(e.start||[]).length||a.mounted(r,o)}},{key:"_renderPopup",value:function(){var c,u,l=this,d=0<arguments.length&&arguments[0]!==undefined?arguments[0]:[],f=1<arguments.length?arguments[1]:undefined;this.hasPageJumped||(c=this.engage.engageId,u=this.currentVersion.versionId,d.forEach(function(e,t){var n,i,r=e.popupId,o=e.widgets,a=Lo(),o=null==o?void 0:o.some(function(e){return Boolean(null==e||null==(e=e.widgetNodes)?void 0:e.commonStyle)}),s=l._getEngageContainerWrapper(o,r),t=l._createEngageWrap(l._getEngageWrapperId(r),d.length-t+("popup"==f?0:10));(window.ActiveXObject||"ActiveXObject"in window)&&t&&t.querySelector('[data-menu-action="insert.count_down"]')||(n=Object.assign({},l.engage,{engagerId:c,exp_id:u,variant:{creativeId:r,creativeType:e.type}}),o=new us(c,l.terminalType,e,l.context,n,l.isPreview,o,function(){e.renderFinish&&!e.repeat||(e.renderFinish=!0,N(l.engage.engageId+"--"+r),l.isPreview||(l._sendVersionEvent(),e.popupId===l.config.CONTROL_GROUP_ID?l._sendViewPackage("controlGroup"):O(l.context,n,"view")))}),i=("POPUP"===l.engageType||"STICKY_BAR"===l.engageType?l.isPreview?n:l.context.current:e).trigger,l.renderdEngage.popups&&l.renderdEngage.popups.push({render:o,validate:a}),l._checkPopupTrigger(i,l.context,a,e,s,t,o))}))}},{key:"_renderInline",value:function(){var r,o=this;this.hasPageJumped||((r=(this.currentTerminal&&this.currentTerminal.inline||[]||[]).reduce(function(e,t){var n=t.changeElementAction;return(e=n?e.filter(function(e){var e=(null==e?void 0:e.changeElementAttribute)||{},t=e.selector,e=e.attribute;return(null==t?void 0:t.string)!==(null==n||null==(t=n.selector)?void 0:t.string)||"href"!==(null==e?void 0:e.string)}):e).push(t),e},[]))||[]).forEach(function(t,n){t.isTrulyRendered||new ha(t,o.isPreview,function i(e){t.renderFinish=!0,e&&(o.hasSendInlineView||(o._sendVersionEvent(),o._sendViewPackage("inline"),o.hasSendInlineView=!0),r[n].isTrulyRendered=!0)}).mounted()})}},{key:"_renderCode",value:function(){var r=this,e=0<arguments.length&&arguments[0]!==undefined?arguments[0]:[],o=1<arguments.length?arguments[1]:undefined;this.hasPageJumped||e.forEach(function(e){var t=e.code,n=e.type;if(t){var i=t;try{"javascript"===n&&o&&(i="var productSocialProof=".concat(JSON.stringify(o),"; ").concat(t))}catch(M){}new ls(n,i,function(){e.renderFinish=!0,r.hasSendCodeView||(r._sendVersionEvent(),r._sendViewPackage("code"),r.hasSendCodeView=!0)}).mounted()}})}},{key:"_renderCampaign",value:function(){var e,t,n,i,r;this.hasPageJumped||(e=(i=this.currentTerminal||{}).popup,t=i.stickybar,n=i.inline,i=i.code,r=(this.engage||{}).productSocialProof,e&&this._renderPopup(e,"popup"),t&&this._renderPopup(t,"stickybar"),i&&this._renderCode(i,r),n&&(this._renderInline(),T(S.doc,"DOMContentLoaded",this._renderInline),T(S.win,"load",this._renderInline)))}},{key:"_handleClearEngage",value:function As(){var e,t;this.renderdEngage&&(t=this.renderdEngage.popups,e=this.engage.engageId,0<(t=re(t)).length&&t.forEach(function(e){var t=e.render,e=e.validate;t._handleClear&&"function"==typeof t._handleClear&&t._handleClear(),e&&e.disable(),t.leaveHandler&&"function"==typeof t.leaveHandler&&(2==+(e=t.terminalType)&&pr(S.doc,"mousemove",t.leaveHandler),2!=+e&&pr(S.win,"popstate",t.leaveHandler))}),this.context.engager.off("clearEngage.".concat(e)))}},{key:"_bodyReady",value:function(){var e=this;null===S.doc.body?T(S.win,"DOMContentLoaded",function(){return e._renderCampaign()}):this._renderCampaign()}},{key:"_redirectPage",value:function(e){var t,n,i=-1!==S.win.location.href.indexOf("ptengine=");e&&!i&&(i=e.redirect)&&(e=i.condition,i.value,i=i.toValue,"=="===e&&i&&(this.isPreview?S.loc.href=i:(this.isSendVersionEvent=!0,t=(e=this.engage).engageId,e.engageName,n=(e=this.currentVersion||{}).versionId,e.versionName,n&&this._sendEventBeforeRedirect("setAbtest",{category:"ptx_heatmap",engageType:"redirect",expName:"engageName",expId:t,verName:"versionName",verId:n},i))))}},{key:"_urlMatch",value:function(e){return Zr(S.loc.href).page.toLocaleLowerCase()===e.toLocaleLowerCase()}},{key:"renderPreview",value:function(e){var e=e||{},t=e.version,e=e.terminal;-1!==S.doc.referrer.indexOf("preview_ptx_token")||t.controlGroup||this._redirectPage(e),this.currentVersion=t,this.currentTerminal=e,this._bodyReady(e),this.callback&&"function"==typeof this.callback&&this.callback()}},{key:"mounted",value:function(){var e=this,t=this.engage,n=t.versions,i=t.currentVersionId,r=t.engageId,t=t.matchedUrl;if(!t||this._urlMatch(t)){t=(n||[]).find(function(e){return e.versionId===i});if(this.currentVersion=t){n=t.terminals,t=t.controlGroup,n=(n||[])[0];if(t)return"POPUP"===this.engageType||"STICKY_BAR"===this.engageType?(this.currentTerminal={popup:[{popupId:this.config.CONTROL_GROUP_ID,popupHasError:!1,popupHasForm:!1,popupName:"CONTROL_GROUP",widgets:[]}]},void this._bodyReady()):("REDIRECT"===this.engageType&&ps("redirectControlGroup"),this._sendVersionEvent(),this._sendViewPackage("controlGroup"),void(this.callback&&"function"==typeof this.callback&&this.callback()));if(this._redirectPage(n),!n&&!S.win.PT_ENGAGE_IN_DEBUG)return this.unmounted(),void(this.callback&&"function"==typeof this.callback&&this.callback());this.currentTerminal=n,this._bodyReady()}this.context.engager.on("clearEngage.".concat(r),function(){e._handleClearEngage.apply(e)}),this.callback&&"function"==typeof this.callback&&this.callback()}}},{key:"unmounted",value:function(){}}]),o}(),gs="position",vs="pos-center",ys="ptxEngage",ms=2147483647,ws="button-close",bs="icon-close",_s=ur(),ks=1,Ss=function Ss(c,u,l){var d=u.current;T(c,"click",function(e){e=e||S.win.event;for(var n=e.target||e.srcElement,i=["data-engage-action-click","data-engage-action-close"],t=!1,r="";r=n.getAttribute("data-engage-block"),(t=function(){for(var e=0,t=i.length;e<t;e++)if(n.getAttribute(i[e]))return!0}())||(n=n.parentNode),!t&&n!=c;);if(t){e.preventDefault();var o,e=n.tagName.toUpperCase(),e=n.textContent||e||"unknow target";if(!n.parentNode||"image"!=n.parentNode.getAttribute("data-engage-block")||(o=n.querySelector("img"))&&(e=o.getAttribute("alt")),!r||r!=bs&&r!=ws){if(O(u,d,"click",e),n.href&&!/^javascript:(void\(0\))?;?$/.test(n.href))if("_blank"==n.target)try{S.win.open(n.href,"_blank")}catch(a){P(),mr("WindowOpenError",a)}else S.loc.href=n.href;l&&"function"==typeof l&&l(d.exp_id)}else{Os(c,"unmounted"),Ms().removeChild(c),d.shouldCreateMaskLayer&&Go(d.engagerId),O(u,d,"close",e),P(),l&&"function"==typeof l&&l(d.exp_id,"hasClosed");try{d.currentTerminal.codeMode||zo(d.currentTerminal.visualModel.widgetSettings.position),Jo("delete",d.engagerId),u.engager.off("clearEngage.".concat(d.engagerId))}catch(s){mr("RenderError",s)}}}})},Es=function Es(e,t){var n=2<arguments.length&&arguments[2]!==undefined&&arguments[2],i=e.current,r=i.currentTerminal,o=r&&r.visualModel&&r.visualModel.widgetSettings,n=n?r.codeSync:r.visualModel.widgetNodes,a=Rs(js(i.engagerId));if(a.innerHTML=Ls(n,i.engagerId),a.style.display="none",Ms().appendChild(a),Os(a,"unmounted"),Ko(a),Os(a,"mounted",function(e){e&&"function"==typeof e&&e(i.engagerId)}),a.style.display="block",!(a&&"false"!==a.getAttribute("data-show-engage")))return n=I.get(gs)||[],s=o&&o.position,void(-1!==(s=n.indexOf(s))&&(n.splice(s,1),I.set(gs,n)));r&&(o&&o.position==vs&&(qo(i.engagerId),e.current.shouldCreateMaskLayer=!0),Yo(a)),Ss(a,e,function(e){return N(e,1<arguments.length&&arguments[1]!==undefined?arguments[1]:"hasClicked")}),e.engager&&e.engager.on("clearEngage.".concat(currentEngageId),function(){As().apply(e,[a])}),ks=1;var s=a.querySelectorAll("img");Array.prototype.slice.call(s).forEach(function(e){T(e,"load",function(){e.style.opacity="1",e.style.visibility="visible"})}),t&&"function"==typeof t&&t()};function Ts(e){var t,n;if("string"==typeof e||"number"==typeof e)return-1!=e.indexOf("<")&&/<?\/[a-z]*>/.test(e)?((a=S.doc.createElement("div")).innerHTML=e,a):S.doc.createTextNode(e);1==ks&&"a"==e.tag?(t=S.doc.createElement("div"),(n=e.props).hasOwnProperty("href")&&delete n.href):(t=S.doc.createElement(e.tag),n=e.props),ks++;var i,r=t,o=n;for(i in o)r.setAttribute(i,o[i]);var a=e.children;return a&&a.map(Ts).forEach(t.appendChild.bind(t)),t}var Is=function Is(e){var t=1<arguments.length&&arguments[1]!==undefined?arguments[1]:function(){};return P(),t()},xs=function xs(e){var t=1<arguments.length&&arguments[1]!==undefined?arguments[1]:function(){};e.current;return P(),t()};function Cs(e){P();var t=e.context||e,e=(t.current=e.current,t.current),o=function o(n,i){var r=!(2<arguments.length&&arguments[2]!==undefined)||arguments[2];return function(){var e=i.currentVersionId,t=i.exp_id,e=e||t,t=i.engageId||i.engagerId;n.repeat||I.set(e,e),Jo("add",t),r&&(O(n,i,"view"),N(e))}},n=e.currentVersionId,i=e.exp_id;if(!I.get(n||i)){if(e.controlGroup)return P(),void xs(t,o(t,e));if(P(),"3.0"===e.engageVersion||"4.0"===e.engageVersion)new hs(t,e,_s,o(t,e,!1));else{n=e.terminal&&function(e,t){for(var n=0,i=t.length;n<i;n++)if(t[n].type==e)return t[n];return t[0]}(_s,e.terminal),i=e.defaultOptions||n;if(!n||(e.currentTerminal=n).status||S.win.PT_ENGAGE_IN_DEBUG)if(e.currentTerminal&&e.isOriginalVersion)Is(t,o(t,e));else try{var r,a,s,c,u,l,d,f,p,h=e.currentTerminal||{},g=h.visualModel,v=h.widgets;v&&Array.isArray(v)&&0<v.length?(r=Rs(js(e.engagerId)),a=Ms(),new ia(t,e,o(t,e)).mounted(a,r)):g&&g.widgetSettings?e.currentTerminal.codeMode?(s=e.currentTerminal.codeSync.html)&&/data-engage-block/i.test(s)?Es(t,o(t,e),!0):Ns(t,o(t,e)):Ho(0,g.widgetSettings.position)&&Es(t,o(t,e)):e.currentTerminal.codeMode?Ns(t,o(t,e)):Ho(0,i.position||i.commonSync.position)&&(u=o(c=t,e),l=c.current,p=l.currentTerminal.nodes,d=Rs(js(l.engagerId)),f=Ms(),p=Ts(p),d.appendChild(p),f.appendChild(d),(p=l.currentTerminal)&&(p.commonSync.position==vs&&(qo(l.engagerId),c.current.shouldCreateMaskLayer=!0),(f=d.querySelector(".js-engage-promotion-branding,.engage-promotion__friendLink,.engage-friendLink"))&&(p.commonSync.branding?(f.style.display="block",l=(f.href||"").replace(/(utm_source=)Customer-Site/,"$1"+S.loc.hostname),f.setAttribute("href",l)):f.style.display="none")),c.engager&&c.engager.on("clearEngage.".concat(currentEngageId),function(){As().apply(c,[d])}),Ds(d,c,function(e){return N(e,1<arguments.length&&arguments[1]!==undefined?arguments[1]:"hasClicked")}),ks=1,p=d.querySelectorAll("img"),Array.prototype.slice.call(p).forEach(function(e){T(e,"load",function(){e.style.opacity="1",e.style.visibility="visible"})}),u&&"function"==typeof u&&u())}catch(y){mr("RenderError",y)}else P(n.status)}}}function As(e){try{var t=this.current;Os(e,"unmounted"),e&&Ms().removeChild(e),t.shouldCreateMaskLayer&&Go(t.engagerId),P(),t.currentTerminal.codeMode||zo(t.currentTerminal.visualModel.widgetSettings.position),I.set(t.exp_id,null),this.engager.off("clearEngage.".concat(t.engagerId))}catch(n){mr("RenderError",n)}}function Os(e,t,n){S.win.ptEngage=S.win.ptEngage||{};var e=e&&Bo(e),i=S.win.ptEngage[e]||[];0<i.length&&(i.map(function(e){e[t]&&"function"==typeof e[t]&&e[t](),n&&"function"==typeof n&&(e.callback=n)}),e&&"unmounted"===t&&delete S.win.ptEngage[e])}function Ns(e,t){var n=e.current,i=Rs(js(n.engagerId)),r=Ms(),r=(i.innerHTML=Ls(n.currentTerminal.codeSync,n.engagerId),r.appendChild(i),Ko(i),!!i.querySelector("[data-pt-showmask]"));(e.current.shouldCreateMaskLayer=r)&&(qo(n.engagerId),(r=i.querySelector(".engage-promo__v-common"))?r.style.zIndex=ms:(n=i.querySelector("[data-pt-engage-id]"))&&(n.style.zIndex=ms)),Ds(i,e,function(e){return N(e,1<arguments.length&&arguments[1]!==undefined?arguments[1]:"hasClicked")}),e.engager&&e.engager.on("clearEngage.".concat(currentEngageId),function(){As().apply(e,[i])}),t&&"function"==typeof t&&t()}function Ds(d,f,p){var h=f.current;T(d,"click",function(e){e=e||S.win.event;for(var t,n=e.target||e.srcElement,i=["js-engage-interaction","js-engage-close","js-engage-promotion-close","js-engage-promotion-button","js-engage-promotion-image","js-engage-promotion-a"],r=!1,o=!1,a="",s=[];t=JSON.parse(n.getAttribute("data-pt-action")||"{}"),o="false"===(n.getAttribute("data-pt-status")||String(t.status)),a=n.getAttribute("data-pt-type")||String(t.type),s=n.className||n.classList.value,(r=function(){for(var e=0,t=i.length;e<t;e++)if(-1!==s.indexOf(i[e]))return!0}())||(n=n.parentNode),!r&&n!=d;);if(o)e.preventDefault();else if(r){e.preventDefault();var c,e=n.tagName.toUpperCase(),e=n.textContent||e||"unknow target";if(!n.parentNode||"image"!=n.parentNode.getAttribute("data-engage-block")||(c=n.querySelector("img"))&&(e=c.getAttribute("alt")),"3"===a||-1!=s.indexOf("js-engage-close")||-1!=s.indexOf("js-engage-promotion-close")){Ms().removeChild(d),h.shouldCreateMaskLayer&&Go(h.engagerId),O(f,h,"close",e),p&&"function"==typeof p&&p(h.exp_id,"hasClosed");try{Jo("delete",h.engagerId),f.engager.off("clearEngage.".concat(h.engagerId))}catch(u){}}else{if(O(f,h,"click",e),n.href&&!/^javascript:(void\(0\))?;?$/.test(n.href))if("_blank"==n.target)try{S.win.open(n.href,"_blank")}catch(l){P(),mr("WindowOpenError",l)}else S.loc.href=n.href;p&&"function"==typeof p&&p(h.exp_id)}}})}function Ps(e){P(),P(),P(),Cs(e)}function Ls(e,t){var e=e||{css:"",html:"",script:""},n=e.css,i=e.html,e=e.script;return Qo(n,t),i+e}function Ms(){var e=S.doc.getElementById(ys);return e||((e=S.doc.createElement("div")).setAttribute("id",ys),S.doc.body.appendChild(e)),e}function Rs(e){var t=S.doc.getElementById(e);return t||(t=S.doc.createElement("div")).setAttribute("id",e),t}function js(e){return"engage_"+e}var Hn=function(e){var t;(t=S.doc.getElementById(ys))&&S.doc.body.removeChild(t),e.on("next",function(e,t){P(),Ps(e)})},$s="__pt__engager__common__style",B=function(e){e.on("next",function(){var e;S.doc.getElementById($s)||((e=S.doc.createElement("link")).rel="stylesheet",e.type="text/css",e.id=$s,e.href=("https:"===S.loc.protocol?"https://":"http://")+"pteengagecss.ptengine.jp/styles/engager.css",S.doc.getElementsByTagName("head")[0].appendChild(e)),(e=S.doc.createElement("style")).type="text/css",e.appendChild(S.doc.createTextNode(".engage-promotion-wrap{display:none}")),S.doc.getElementsByTagName("head")[0].appendChild(e)})};function Ws(e,t,n){var i,r;n?(i=t.engager,r=t.setting,(r=Array.isArray(r)?r:(t.setting||{}).configs||[]).filter(function(e){return e.engageId==n}).length<=0?P():i.emit("".concat(e,".").concat(n))):P()}function Us(e,t){try{var n=new ds("ptEventReady",{bubbles:!1,cancelable:!1,detail:{}});n&&(S.win.Ptengine=(i=e,function(){if(0===arguments.length)P();else switch(arguments[0]){case"showEngagement":Ws("showEngagement",i,arguments[1]);break;case"toggleEngagement":Ws("toggleEngagement",i,arguments[1])}}),S.doc.dispatchEvent&&"function"==typeof S.doc.dispatchEvent?S.doc.dispatchEvent(n):S.doc.fireEvent&&"function"==typeof S.doc.fireEvent&&S.doc.fireEvent(n))}catch(r){}var i;t()}var Fs=function(){function t(e){f(this,t),this.timestamp=(new Date).getTime(),this.type=e}return s(t,[{key:"set",value:function(e,t){if(e&&"string"==typeof e)for(var n=e.split("."),i=this,r=0,o=n.length;r<o;r++){var a=n[r];i[a]||(i[a]={}),r===o-1&&(i[a]=t),i=i[a]}return this}},{key:"setRenderedExperienceVersion",value:function(){return this.set("context.experience.renderedVersions",function(e){e="".concat(Gi.sidLabel,"_").concat(e,":exp:versions");try{return(JSON.parse(localStorage.getItem(e))||[]).map(function(e){return e.id})}catch(t){return[]}}(wr())),this}},{key:"setPage",value:function(){var e=0<arguments.length&&arguments[0]!==undefined?arguments[0]:"page",t=1<arguments.length&&arguments[1]!==undefined?arguments[1]:{},n=L.vn,i=L.pvn,r=(new Date).getTime()-to;r<0&&(r=0),this.set("name",e).set("properties",t).set("vn",n).set("pvn",i).set("loadtime",r).set("context",Vs()).set("context.page",this.getDefaultPage()),this.setRenderedExperienceVersion()}},{key:"setEvent",value:function(e,t,n){"track"===this.type&&this.set("context",Vs()).set("context.page",this.getDefaultPage()),this.set("event",e),t&&this.set("properties",t),n&&this.set("te",n),this.setRenderedExperienceVersion()}},{key:"setUser",value:function(e,t,n){e&&this.set("accountId",e),t&&this.set("properties",t),n&&this.set("source",n),this.setRenderedExperienceVersion()}},{key:"setStatus",value:function(e,t){e&&this.set("accountId",e),t&&this.set("properties",t),this.setRenderedExperienceVersion()}},{key:"setCampaign",value:function(e){this.set("context",Vs()),e&&this.set("context.campaign",e)}},{key:"setEngage",value:function(e){var t=1<arguments.length&&arguments[1]!==undefined?arguments[1]:{},n=e.track;n&&(this.set("track",n),delete e.track),this.set("engage",e),t&&this.set("properties",t)}},{key:"getFields",value:function(){return this.set("packageId",rr()),S.win.PT_ENGAGE_IN_DEBUG&&(this.set("previewMode",!0),this.set("previewId",localStorage.getItem("ptx_previewId"))),Object.assign({},this,L)}},{key:"getDefaultPage",value:function(){var e=Zr(S.loc.href).page;return{hostname:S.loc.hostname,referrer:S.doc.referrer,refType:S.doc.referrer?1:0,title:S.doc.title,url:e}}}]),t}();function Vs(){return{timezone:function(){try{var e=(new Date).getTimezoneOffset();return e||0===e?"GMT"+(e<=0?"+":"")+e/60*-1:""}catch(t){return""}}(),language:S.na.language,screen:{width:function(){try{var e=S.win.screen.width;return!e||isNaN(parseInt(e,10))?0:parseInt(e,10)}catch(t){return 0}}(),height:function(){try{var e=S.win.screen.height;return!e||isNaN(parseInt(e,10))?0:parseInt(e,10)}catch(t){return 0}}()}}}var Bs="pt:on_engage_fired",Hs="pt:start_engage_render",qs=function(){r(t,fa);var e=o(t);function t(){return f(this,t),e.apply(this,arguments)}return s(t,[{key:"page",value:function(e,t,i){var r=this;if(oo()){var n=new Fs("page");n.setPage(e,t);try{var o=JSON.stringify(n.getFields());nr({url:this.collectUrl,method:"POST",data:o,callback:function(e){try{var t=JSON.parse(e);"success"===t.status&&(r.emit(Hs,t.content),i&&"function"==typeof i&&i())}catch(n){ts({module:"ptx-page-view-api",message:"Page View: ".concat(o,", Error info: ").concat(n)})}}})}catch(a){mr("PageViewModuleError",a)}}}}]),t}(),Gs=function(){r(t,fa);var e=o(t);function t(){return f(this,t),e.call(this)}return s(t,[{key:"identify",value:function(e,t,n){var i;oo()&&((i=new Fs("identify")).setUser(e,t,n),e=JSON.stringify(i.getFields()),ir({url:this.collectUrl,method:"POST",data:e}))}},{key:"status",value:function(e,t){var i=this,n=new Fs("status");oo()&&(n.setStatus(e,t),nr({url:this.collectUrl,method:"POST",data:JSON.stringify(n.getFields()),callback:function(e){try{var t=JSON.parse(e);"success"==t.status&&i.emit(Hs,t.content)}catch(n){}}}))}}]),t}(),zs=(new Date).getTime(),Js=0,Ys=function(){r(n,fa);var t=o(n);function n(){var e;return f(this,n),(e=t.call(this)).vistualEvents=[],e.uncommitedEvents=[],e.isTimeout=!1,e.init(),e}return s(n,[{key:"init",value:function(){var t=this;function i(){(new Date).getTime()-x.lastUpdateTime>x.SILENCEDURATION+x.HEARTBEATINTERVAL?(clearInterval(S.win.ptx_heartbeat_interval),this.isTimeout=!0,Qr()):this.emit("heartbeat")}function h(e,t){for(var n=!1;e==t?n=!0:e=e.parentNode,"body"!==e.nodeName.toLowerCase()&&!n;);return n}!function(){var p=this;S.win.addEventListener("click",function(e){var l=(e=e||S.win.event).target||e.srcElement,e=l.nodeName.toLowerCase(),t=(new Date).getTime();if(t-Js<x.CLICKINTERVAL&&"a"!==e)return!1;Js=t,ro("lastUpdateTime",(new Date).getTime());var d=null;if(l&&0<p.vistualEvents.length){var n,f=function f(e){var i=p.vistualEvents[e];try{var t,n=S.doc.querySelectorAll(decodeURIComponent(decodeURIComponent(i.csspath)));if(d===n[0])return"continue";for(t in d=n[0],n){var r=n[t];h(l,r)&&p.addEvent(i.eventName)}p.commit()}catch(u){var o,a,s,e="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js",c=function(){var e,t=S.win.jQuery(i.csspath);for(e in t){var n=t[e];h(l,n[0])&&p.addEvent(i.eventName)}};S.win.jQuery?c():(o=!1,a=S.doc.getElementsByTagName("head")[0],(s=S.doc.createElement("script")).src=e,a.appendChild(s),s.onload=s.onreadystatechange=function(){o||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(o=!0,c(),s.onload=s.onreadystatechange=null,a&&s.parentNode&&a.removeChild(s))})}};for(n in p.vistualEvents)f(n)}d||(p.emit("reactivePnOrHb"),d=null)},!0)}.call(this),function(){var e,n=this;this.on("reactivePnOrHb",function(){n.isTimeout?(n.isTimeout=!1,n.emit("reactivated"),S.win.ptx_heartbeat_interval=setInterval(function(){i.call(n)},x.HEARTBEATINTERVAL)):n.emit("heartbeat")}),this.on("heartbeat",function(){var e,t=new Fs("heartbeat");if(oo())return e=(new Date).getTime(),t.set("duration",e-zs),L.profileId?ir({url:n.collectUrl,method:"POST",data:JSON.stringify(t.getFields())}):void 0}),S.win.addEventListener("scroll",function(){e&&clearTimeout(e),e=setTimeout(function(){ro("lastUpdateTime",(new Date).getTime()),n.emit("reactivePnOrHb")},500)}),S.win.ptx_heartbeat_interval=S.win.setInterval(function(){i.call(n)},x.HEARTBEATINTERVAL)}.call(this),this.on("pt:on_vistualevent_fetch_done",function(e){t.vistualEvents=function(e){var t,n=[];for(t in e){var i=e[t].split(",");new RegExp(i[6].replace(/^\//,"").replace(/\/$/,"")).test(S.loc.href.replace(/\/$/,""))&&i[3]&&i&&"string"==typeof i[7]&&n.push({csspath:decodeURIComponent(i[7]),eventName:i[3]})}return n}(e)})}},{key:"trackEvent",value:function(e,t,n){var i,r=oo();try{"hasId:".concat(r,"; ").concat(!r&&"id: "+JSON.stringify(L))}catch(o){ts({module:"ptx-track-event-log",message:"Track Event Log, Error info: ".concat(o)})}if(r)return n=Object.assign({sendToPte:!0,transport:"xhr"},n||{}),r=new Fs("track"),i=n.teData,n.sendToPte&&!i&&(i=ta(Object.assign({},t||{},{eventName:e}))),e&&r.setEvent(e,t,i),"sendToPte:".concat(n.sendToPte,";teData:").concat(i,";hasPte:").concat(ea()),this.dispatch(JSON.stringify(r.getFields()),n.transport)}},{key:"commit",value:function(){var e=this.uncommitedEvents.length;if(0<e){var t=new Fs("track");if(oo())return 1===e?t.setEvent(this.uncommitedEvents[0].name):t.setEvent(this.uncommitedEvents),e=JSON.stringify(t.getFields()),this.uncommitedEvents=[],this.dispatch(e)}}},{key:"addEvent",value:function Er(e,t){return this.uncommitedEvents.push({name:e}),this}},{key:"dispatch",value:function(i){var r=this,e=1<arguments.length&&arguments[1]!==undefined?arguments[1]:"xhr",t={url:this.collectUrl,method:"POST",data:i,callback:function(e){try{var t=JSON.parse(e);"success"===t.status&&r.emit(Hs,t.content)}catch(n){ts({module:"ptx-track-event-api",message:"Track Event: ".concat(i,", Error info: ").concat(n)})}}};return("beacon"===e?ir:nr)(t)}}]),n}(),Ks=function(){r(t,fa);var e=o(t);function t(){return f(this,t),e.apply(this,arguments)}return s(t,[{key:"engage",value:function(e,t){var n,i,r,o=this,a=new Fs("engage");if(oo())return n=e.transport||"xhr",r=e.track||{},r.event?r.event=decodeURIComponent(r.event):n="beacon",a.setEngage(e,t),i=JSON.stringify(a.getFields()),r={url:this.collectUrl,method:"POST",data:i,callback:function(e){try{var t=JSON.parse(e);"success"===t.status&&o.emit(Hs,t.content)}catch(n){ts({module:"ptx-track-event-api",message:"Track Event: ".concat(i,", Error info: ").concat(n)})}}},("beacon"===n?ir:nr)(r)}}]),t}(),Xs=function(){r(i,fa);var n=o(i);function i(e){var t;return f(this,i),(t=n.call(this)).engager=e,t._page=new qs,t._user=new Gs,t._event=new Ys,t._engage=new Ks,t.pageviewFired=!1,t.eventList=[],t.init(),t}return s(i,[{key:"init",value:function(){var t=this;this._event.on(Hs,function(e){t.emit(Bs,e)}),this._page.on(Hs,function(e){t.emit(Bs,e)}),this._user.on(Hs,function(e){t.emit(Bs,e)}),this._engage.on(Hs,function(e){t.emit(Bs,e)}),this._event.on("reactivated",function(e){io("reactivated"),t.page()})}},{key:"updateState",value:function(e){if(this.pageviewFired=e)for(var t=this.eventList.length-1;0<=t;t--){var n=this.eventList[t];n&&this[n.type].apply(this,re(n.args)),this.eventList.splice(t)}}},{key:"track",value:function(e,t,n){this.pageviewFired?this._event.trackEvent(e,t,n):this.eventList.push({type:"track",args:[e,t,n]}),"pageviewFired:".concat(this.pageviewFired)}},{key:"page",value:function(e,t,n){this._page.page(e,t,n)}},{key:"identify",value:function(e,t,n){this.pageviewFired?this._user.identify(e,t,n):this.eventList.push({type:"identify",args:[e,t,n]})}},{key:"status",value:function(e,t){this._user.status(e,t)}},{key:"engage",value:function(e,t){this._engage.engage(e,t)}},{key:"showEngagement",value:function(e){this.engager.emit("showEngage.".concat(e))}},{key:"clearEngagement",value:function(e){this.engager.emit("clearEngage.".concat(e))}},{key:"createCrossDomainUrl",value:function(e){return e&&Kr(e)}}]),i}(),Qs=function Qs(i){var r=history[i];return function(){var e=r.apply(this,arguments);try{var t=new ds(i,{bubbles:!1,cancelable:!1,detail:{}});t.arguments=arguments,t&&(S.win.dispatchEvent&&"function"==typeof S.win.dispatchEvent?S.win.dispatchEvent(t):S.win.fireEvent&&"function"==typeof S.win.fireEvent&&S.win.fireEvent(t))}catch(n){}return e}};function Zs(e,t){return br(function(){var e=ec();"beforeunload"!==history.state&&"back"!==history.state&&t.preUrl!==e&&(pa.emit("routerChange"),I.clear(),t.preUrl=e,io("changePage"),S.win.ptengine&&S.win.ptengine.page())},500)}function ec(){return S.win.location.protocol+"//"+S.win.location.host+S.win.location.pathname+S.win.location.search}history.pushState=Qs("pushState"),history.replaceState=Qs("replaceState");var n=function(t){var a=new Xs(t),n=window[[Gi.dataLayer]]||[],s=function s(e){try{var t=e||{},n=t.event,i=t.name,r=t.property;n&&a[n]&&"function"==typeof a[n]&&a[n](i,r)}catch(o){}},i=!1,e=(a.updateState(!1),function e(){i=!0,a.page("","",function(){var e;a.updateState(!0),e={preUrl:ec()},"onpopstate"in S.win&&(pr(S.win,"popstate",Zs()),T(S.win,"popstate",Zs(0,e)),pr(S.win,"pushState",Zs()),T(S.win,"pushState",Zs(0,e)),pr(S.win,"replaceState",Zs()),T(S.win,"replaceState",Zs(0,e)));var t=(n||{}).hide;t&&t.end&&setTimeout(function(){try{t.end()}catch(M){}},0),ps("pageViewFired")}),n.forEach(function(e){s(e)})}),r=((window[Gi.funName]||[]).forEach(function(e){var t=e||[];switch(t[0]){case"page":a.page(t[1],t[2],function(){a.updateState(!0)}),i=!0;break;case"track":n.push({event:"track",name:t[1],property:t[2]});break;case"identify":n.push({event:"identify",name:t[1],property:t[2]});break;case"createCrossDomainUrl":Kr(t[2])}}),i&&mr("ExecuteException","page view init exception"),n.push=function(e){s(e)},e(),window[Gi.funName]||{}),o=r.__ver,c=r.__pteSid,u=r.__start,l=r.__antiFlicker,d=r.__ptenginex,f=r.__ptePeid,p=r.__crossDomainEnable,h=r.__crossDomainType,g=r.__ids,v=r.__crossDomainProcessCallback,y=r.__getPteEventData,m=r.__PTXEnabled,w=r.__PTEEnabled,b=r.__isNpPackage,r=r.autoDetection;window[Gi.funName]=a,[{key:"__ver",value:o},{key:"__pteSid",value:c},{key:"__start",value:u},{key:"__antiFlicker",value:l},{key:"__ptenginex",value:d},{key:"__ptePeid",value:f},{key:"__crossDomainEnable",value:p},{key:"__crossDomainType",value:h},{key:"__ids",value:g},{key:"__crossDomainProcessCallback",value:v},{key:"__getPteEventData",value:y},{key:"__PTXEnabled",value:m},{key:"__PTEEnabled",value:w},{key:"__isNpPackage",value:b},{key:"autoDetection",value:r}].forEach(function(e){e.value&&(window[Gi.funName][e.key]=e.value)}),window[Gi.funName].__sid=wr(),S.doc.addEventListener("keydown",function(e){pa.emit("bindDocKeydown",e)},!1),S.doc.addEventListener("keyup",function(e){pa.emit("bindDocKeyup",e)},!1),S.doc.addEventListener("click",function(e){pa.emit("bindDocClick",e)},!1),fs("ptEventReady"),t.on("send.engage",function(e){a.engage(e)}),a.on(Bs,function(e){t.emit("run.setting",e),function(e,t){t=1<arguments.length&&t!==undefined?t:[],e="".concat(Gi.sidLabel,"_").concat(e,":exp:versions");try{var n=JSON.parse(localStorage.getItem(e))||[];t.filter(function(e){return 1===e.enableABTest&&0<e.versions.length}).map(function(e){return e.versions[0].versionId}).forEach(function(t){var e=n.filter(function(e){return e.id===t});0<e.length?e.forEach(function(e){return e.ts=Date.now()}):n.push({id:t,ts:Date.now()})}),256<n.length&&(n=n.sort(function(e,t){return e.ts-t.ts}).slice(n.length-256)),localStorage.setItem(e,JSON.stringify(n))}catch(i){P()}}(wr(),e)})},i=S.win.location.href,_=-1!==i.indexOf("preview_ptx_token"),ii=-1!==i.indexOf("ptengine_engage_control_group"),ri=-1!==i.indexOf("ptengine_engage_editor_token"),t=-1!==i.indexOf("ptengine_editor_iframe"),m=-1!==S.doc.referrer.indexOf("preview_ptx_token"),oi=-1!==i.indexOf("ptengine_heatmap_token"),e=-1!==i.indexOf("ptengine_campaign_version_id"),Kn=1==(null==(en=S.na)?void 0:en.doNotTrack)&&!window.PT_IGNORE_DNT,en=null==(v=window)||null==(i=v.ptConfig)?void 0:i.isExcess;try{var tc,nc,ri=ri||"ptengine_campaign_editor"===(S.win.name||(null==(tc=S.win)||null==(nc=tc.parent)?void 0:nc.name))}catch(M){}!window.ptengine||window.ptengine.__ptenginex||ri||t||_||ii||m||oi||Kn||en&&!e||!so()||(window.ptengine.__ptenginex="1.0.0",v=new Vr,"complete"===document.readyState?Jr():T(window,"load",function(){return Jr()}),no(),localStorage.removeItem("ptx_engager_debug"),v.use(jo).use(Ro).use(Us),-1===window.location.href.indexOf("preview_token=")&&n(v),B(v),Hn(v),v.init(),(0,es().initPageTrackEvent)()),m&&ps("preview")}();
window["ptengine"] && window["ptengine"].autoDetection && window["ptengine"].autoDetection.start({"urlPatternList":[],"lpPattern":"^https:\\/\\/www\\.muji\\.com\\/jp\\/ja\\/(stories|feature)\\/"});!function(){"use strict";var f=function(){return(f=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};var s,p,l,t,a="data-pt-inject-block-name",m="data-pt-block-ingored";function r(t){var e;null!=(e=null==(e=null==(e=null===window||void 0===window?void 0:window.ptengine)?void 0:e.autoDetection)?void 0:e.innerObInstance)&&e.createObserve(t)}function c(t,e){var n;h(window.ptengine.lpoEngineStartOptions)&&null!=(n=null==(n=null===window||void 0===window?void 0:window.ptengine)?void 0:n.autoDetection)&&n.sendPackage(t,e)}function h(t){try{return t&&new RegExp(t).test(location.href)}catch(t){}}function d(t){var e;return null==(e=null==(e=null==(e=null===window||void 0===window?void 0:window.ptengine)?void 0:e.autoDetection)?void 0:e.innerObInstance)?void 0:e.getSelector(t)}function g(t){var e=document.documentElement,t=t.getBoundingClientRect();return{top:Math.round(t.top+(window.pageYOffset||e.scrollTop)-(e.clientTop||0)),left:t.left+(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0),height:Math.round(t.height),width:t.width}}function v(f,n){var s=document.body.scrollWidth,p=document.body.scrollHeight,h=document.documentElement.clientHeight,t=function t(e,n,i){var r=[];var o=Array.from(document.elementsFromPoint(e,n)).reverse();var u,a;var l=!1;var c=function(t){var e=o[t];if(["HTML","BODY"].includes(e.tagName))return"continue";if(!f(e))return"continue";if(l=l||e.hasAttribute("data-silex-type")){t=b(e);if(t)return r.push(t),"continue"}var t=e.getBoundingClientRect(),n=.9<=t.width/s&&t.height/p<=.75&&20<t.height;n&&(u&&a?u.contains(e)?a.height>.3*p&&(u.setAttribute(m,"1"),r.push(e)):a.top===t.top&&a.height===t.height&&a.width===t.width||0===r.filter(function(t){return!t.hasAttribute(m)&&t.contains(e)}).length&&r.push(e):r.push(e),u=e,a=t)};for(var d in o)c(d);r.forEach(function(t){return!i.includes(t)&&i.push(t)});n+=20;n<=h&&t(e,n,i);return i}(s/2,0,[]);return t.forEach(function(t){var e;t.hasAttribute(m)||!n||function t(e){if(!e)return null;if("BODY"===e.tagName||"HTML"===e.tagName)return null;e=e.parentElement;if(!e)return null;return e.hasAttribute(a)?e:t(e)}(t)||(e=t.getAttribute("id")||t.classList.item(0)||"unknown",n({name:e,target:t}))}),t}function b(t){return t?"container-element"===t.getAttribute("data-silex-type")?t:b(t.parentElement):null}function w(t){return!(!t||"BDDY"===t.tagName)&&("fixed"===getComputedStyle(t).position||w(t.parentElement))}function y(i,r,o){var u;return void 0===o&&(o=!1),function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];u&&clearTimeout(u),o?(t=!u,u=setTimeout(function(){i.apply(null,e),u=null},r),t&&i.apply(null,e)):u=setTimeout(function(){i.apply(null,e)},r)}}function E(t){return t?t.split(">").map(function(t){return t=t.replace(/:eq\((\d+)\)/gi,function(t,e){return":nth-of-type(".concat(parseInt(e)+1,")")}).replace(/input:input\[name=/gi,"input[name="),t=/(#[0-9]+)/.test(t)?'[id="'.concat(t.replace("#",""),'"]'):t}).join(">"):""}function e(e){var u=[];return function(r,o){var t=document.body;new MutationObserver(function(t,e){Array.from(t).forEach(function(t){var n,i,t=t.target;u.includes(t)||(u.push(t),t=t,n=r,i=o,new IntersectionObserver(function(t,e){n(Array.from(t).filter(function(t){return t.target&&t.isIntersecting}).map(function(t){return t.target})),i&&i(Array.from(t).filter(function(t){return t.target&&!t.isIntersecting}).map(function(t){return t.target}))},{root:null,rootMargin:"0px",threshold:0}).observe(t))})}).observe(t,{attributeFilter:function(t,e){for(var n=0,i=e.length,r=t.length;n<i;n++,r++)t[r]=e[n];return t}([],e),subtree:!0})}}function k(t,n){if(t===p.Ptengine)return(window._pt_sp_2||[]).filter(function(t){var t=t.split(","),e=t[0],t=new RegExp(t[6]);return"setTrackEvent"===e&&t.test(n)}).map(function(t){t=t.split(",");try{return Array.from(document.querySelectorAll(decodeURIComponent(t[7])))}catch(t){return[]}}).reduce(function(t,e){return t.concat(e)},[])}(t=s=s||{}).ALL="ALL",t.PC="PC",t.MOBILE="MOBILE",p=p||{},p[p.Ptengine=0]="Ptengine",(t=l=l||{})[t.Block=0]="Block",t[t.Element=1]="Element";var O,P,A={},o=[];function _(){var t,e,n=y(x,100),i=y(B,300);t=function(t,e){t.forEach(function(t){0<t.addedNodes.length&&(n(O),i(k(p.Ptengine,location.href),P))})},t=new MutationObserver(t),e=document.body,t.observe(e,{subtree:!0,childList:!0})}var C=function(t,e,n){var i="data-pt-inject-cta-name";(n=void 0===n?l.Element:n)===l.Block?i=a:e||(i="data-pt-inject-cta"),t.setAttribute(i,e)};function I(){return setInterval(function(){var t,e=[];for(t in A)e.push({path:t,ms:A[t].duration});e.length&&c("/duration",{elements:e})},3e3)}function L(t){var e=!0,i=null,n=y(x,30),r=y(B,450);function o(){var n,t=(null!=O&&O.blocks?(n=document.documentElement.clientHeight,Array.from(document.querySelectorAll("[".concat(a,"]"))).filter(function(t){var t=t.getBoundingClientRect(),e=t.top,t=t.height;return e<=0&&0<e+t||0<e&&e<n})):v(function(t){return t.hasAttribute(a)&&!t.hasAttribute(m)})).map(d).filter(function(t){return!!t}),e=t.join(",");i!==e&&0<t.length&&(c("/churn",{elements:t}),i=e)}document.addEventListener("scroll",function(){t.start(I),window.requestIdleCallback(function(){n(O),r(k(p.Ptengine,location.href),P)}),e&&(e=!1,o(),setTimeout(function(){e=!0,o()},1e3))})}function T(){var n={},u=[],i=y(function(){if(null!=u&&u.length){for(var t,e,n=[],i=0;i<u.length;i++){var r=u[i],o=w(r)?r.getBoundingClientRect():g(r);r.hasAttribute(m)||n.push({node:r,_type:"block",height:o.height,top:o.top,tag:r.tagName})}t=n,h(window.ptengine.lpoEngineStartOptions)&&null!=(e=null==(e=null==(e=null===window||void 0===window?void 0:window.ptengine)?void 0:e.autoDetection)?void 0:e.innerObInstance)&&e.sendImpressions(t,!0),u=[]}},1e3);e([a])(function(t){t.forEach(function(t){var e=d(t);A[e]?A[e]=f(f({},A[e]),{hidden:!1,start:(new Date).getTime()}):A[e]={duration:0,hidden:!1,start:(new Date).getTime()},n[e]||(t.hasAttribute(m)||u.push(t),n[e]=1,i())})},function(t){t.forEach(function(t){var e,t=d(t);A[t]&&(e=(new Date).getTime(),A[t]={duration:e-A[t].start,hidden:!0,start:e})})})}var n=null,S=1;function x(t){var u,a=[];return null!=t&&t.blocks?(u=[],t.blocks.forEach(function(t,e){var n=t.name,i=t.path,t=t.tags;if(i)try{var r,o=document.querySelector(i);o&&(C(o,n,l.Block),a.push(o),r=w(o)?o.getBoundingClientRect():g(o),u.push({name:n,path:d(o),index:e,height:r.height,top:r.top,tags:t}))}catch(t){}}),0<u.length&&(t=u.map(function(t){return t.path}).join(","),n!==t||S++<2)&&(c("/block",{blocks:u}),n=t)):a=v(function(t){return["NAV","HEADER","ARTICLE","SECTION","FOOTER","DIV","P"].includes(t.tagName)},function(t){var e=t.name,t=t.target;C(t,e,l.Block)}),a}var u=0;function B(n,t){var e,i=[];h(null==t?void 0:t.urlPattern)&&null!=t&&t.elements&&0<t.elements.length?null!=t&&t.elements.forEach(function(t){t=t.path;t&&document.querySelectorAll(t).forEach(function(t){n.includes(t)||(r(t),i.push(t),C(t,""),o.push(t))})}):(t=["a[href]",'form input[type="submit"]','form input[type="image"]','form input[type="button"]',"button","[onclick]","form"],(e=(t=document.querySelectorAll(t.join(","))).length)!==u&&(t.forEach(function(e){n.includes(e)||i.some(function(t){return t.contains(e)})||o.includes(e)||(r(e),C(e,""),o.push(e))}),u=e))}Object.defineProperty(j.prototype,"start",{enumerable:!1,configurable:!0,writable:!0,value:function(t,e){var n=this;((e=void 0===e?!1:e)||this.stopped)&&(this.id=t(),this.stopped=!1),this.timeoutController&&clearTimeout(this.timeoutController),this.timeoutController=setTimeout(function(){n.id&&clearInterval(n.id),n.stopped=!0},this.timeout)}});var i,D,M=j;function j(t){Object.defineProperty(this,"stopped",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeoutController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.stopped=!1,this.timeout=t}var R=window.ptengine.lpoEngineStartOptions;try{["ptengine=","preview_ptx_token","ptengine_engage_editor_token","ptengine_editor_iframe","ptengine_engage_control_group","ptengine_heatmap_token","preview_token","ptengine_heatmap_iframe","ptengine-event-explore=open","ptengine-event=open","ptengine_event_iframe"].some(function(t){return-1<location.href.indexOf(t)||"preview_ptx_token"===t&&-1<document.referrer.indexOf(t)})||R&&(i=R.lpPattern)&&new RegExp(i).test(location.href)&&(D=function(){T();function e(t){return t.deviceType===d||t.deviceType===s.ALL}var t,n,i,r,o,u=new M(1e4),a=R.urlPatternList,l=R.pageElements,c=R.pageBlocks,d=(t=navigator.userAgent,(i=!!(!(i=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)&&!/CrOS/.test(t)||/android|ipad|playbook|silk/i.test(t))&&navigator&&1<navigator.maxTouchPoints&&-1!==t.indexOf("Macintosh")&&-1!==t.indexOf("Safari"))||i)?s.MOBILE:s.PC);i=a&&0<a.length?(n=(t=a.filter(function(t){return h(t.urlPattern)})).map(function(t){return{urlPattern:t.urlPattern,blocks:t.blocks.filter(e).map(function(t){return f(f({},t),{path:E(decodeURIComponent(t.path))})})}})[0],t.map(function(t){return{urlPattern:t.urlPattern,elements:t.ctas.filter(e).map(function(t){return{path:E(decodeURIComponent(t.path))}})}})[0]):(n=null==c?void 0:c.filter(function(t){return h(t.urlPattern)})[0],null==l?void 0:l.filter(function(t){return h(t.urlPattern)})[0]),O=n,P=i,L(u),B(k(p.Ptengine,location.href),i),x(n),_(),setInterval(function(){window.requestIdleCallback(function(){for(var t in A){var t=A[t],e=(new Date).getTime();t.hidden||(t.duration=t.duration+(e-t.start)),t.start=e}})},300),u.start(I,!0),r=y(x,100),o=y(B,300),document.addEventListener("click",function(){r(O),o(k(p.Ptengine,location.href),P)},!0)},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){return D()}):D())}catch(t){}}();
