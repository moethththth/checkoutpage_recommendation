"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[55416],{48443:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(34147),o=a(95621),r=a(44302),n=a(2078);t.default=()=>{const{setError:e,resetError:t}=(0,r.useError)();return{actions:{onHandleResetStorePathError:a=>{const{errorAction:r}=a;if(r!==n.ERROR_ACTION_RESET_STORE)throw a;e(a,{onButtonAction:()=>{t(),(0,s.navTo)((0,o.urlTo)("?useCookie=0",{hostnameOnly:!0}))}})}}}}},17402:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=e=>t=>{const{initializedFields:a,errors:s}=t,o=Object.keys(s).length>0&&!a.some((e=>s[e]));return e(o),t}},81411:function(e,t,a){var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.view=void 0;const o=s(a(99975)).default;t.view=o},99975:function(e,t,a){var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(a(67294)),r=s(a(34234)),n=s(a(25853)),i=s(a(94646)),u=s(a(35063)),l=a(44302),d=s(a(18227)),c=a(46986),p=s(a(90937));a(6615);var v=e=>{let{mkSpots:t,address:a,shopCart:s,formConfig:v}=e;const{store:{countryCode:f,support:{rgpd:y={}}={}}={}}=(0,l.useAppConfig)(),{state:{newFormCurrentConfig:m,isNextButtonReady:C},actions:{saveGuestPersonalData:h}}=(0,p.default)({address:a,formConfig:v,countryCode:f,shopCart:s});return o.default.createElement(d.default,{mkSpots:t,className:"guest-personal-data-form-view",title:o.default.createElement(n.default,{bundle:"shop.shipping",name:"personal-data-title"})},o.default.createElement(u.default,{formOptions:{formConfig:m},initialValues:a,onSubmit:h,mkSpots:t},o.default.createElement(r.default,{onNextClick:()=>{},orderTotals:{configType:c.ORDER_TOTALS_SHIPPING,shopCart:s},isNextButtonReady:C})),y.isEnabled&&o.default.createElement(i.default,{className:"guest-personal-data-form-view__privacy-text",showPopup:!0,name:"rgpd.shipping-guest",sectionName:"guest-personal-data"}))};t.default=v},90937:function(e,t,a){var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(a(59713)),r=s(a(6479)),n=a(67294),i=a(44302),u=a(22282),l=a(13917),d=s(a(17402)),c=s(a(48443)),p=s(a(40495)),v=a(4145),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=C(t);if(a&&a.has(e))return a.get(e);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var n=o?Object.getOwnPropertyDescriptor(e,r):null;n&&(n.get||n.set)?Object.defineProperty(s,r,n):s[r]=e[r]}s.default=e,a&&a.set(e,s);return s}(a(76276)),y=s(a(84850));const m=["isCompany"];function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(C=function(e){return e?a:t})(e)}function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}t.default=e=>{let{address:t,formConfig:a,shopCart:s}=e;const[o,C]=(0,n.useState)(!1),h=(0,p.default)(u.saveGuestPersonalData),{actions:{checkPrivacy:b}}=(0,y.default)(),{state:{user:O},actions:{updateUserData:P}}=(0,i.useSession)(),{actions:{onHandleResetStorePathError:_}}=(0,c.default)(),D=e=>{let{isCompany:a}=e;return g(g(g({},(0,r.default)(e,m)),t?{id:t.id}:{}),{},{datatype:"address"})},j=a.middlewares;return{state:{newFormCurrentConfig:g(g({},a),{},{middlewares:Array.isArray(j)?[...j,(0,d.default)(C)]:j}),isNextButtonReady:o},actions:{saveGuestPersonalData:e=>{const t=D(e),a=(0,l.getPrivacyPolicyBundle)(t);b(t)&&((0,v.trigger)(v.types.CHECKOUT_CONTINUE,{client:t&&t.company?"company":"individual"}),h(s,t,a,{beforeRedirect:e=>{var t,a;f.default.getInstance().isGroupAllowed(f.GROUPS.ADVERTISING)&&null!=e&&null!==(t=e.body)&&void 0!==t&&null!==(a=t.userData)&&void 0!==a&&a.ue&&P({userData:g(g({},O),{},{ue:e.body.userData.ue})})}}).catch(_))}}}}},13917:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.addressFromForm=function(e,t){const a={datatype:"address",countryCode:t,firstName:e.name?e.name.value:null,lastName:e.surname?e.surname.value:null,city:e.city?e.city.value:null,municipality:e.municipality?e.municipality.value:null,neighborhood:e.neighborhood?e.neighborhood.value:null,zipCode:e.zipcode?e.zipcode.value:null,email:e.email?e.email.value:null,newsletterGuestCheck:e.newsletterGuestCheck?e.newsletterGuestCheck.value:null,smsConsent:e.smsConsent?e.smsConsent.value:null,phones:e.phone?[{subscriberNumber:e.phone.value?e.phone.value.phone:null,countryCode:e.phone.value?e.phone.value.prefix:null,phoneType:"mobile"}]:[]};a.addressLines=[e.address?e.address.value:null],e.address2&&e.address2.value&&a.addressLines.push(e.address2.value);e.country&&"object"==typeof e.country.value&&(a.country=e.country.value.name,a.countryCode=e.country.value.code);e.taxRegime&&"object"==typeof e.taxRegime.value&&(a.taxRegimeCode=e.taxRegime.value.code);e.taxCode&&"object"==typeof e.taxCode.value&&(a.taxCode=e.taxCode.value.name,a.taxCodeCode=e.taxCode.value.code);e.state&&("object"==typeof e.state.value?(a.stateCode=e.state.value.code,a.state=e.state.value.name):a.state=e.state.value);e.states&&(a.state=e.states.value.state,a.stateCode=e.states.value.stateCode,a.city=e.states.value.city,a.cityCode=e.states.value.cityCode,a.district=e.states.value.district,a.districtCode=e.states.value.districtCode);e.statesCities&&(a.state=e.statesCities.value.state,a.stateCode=e.statesCities.value.stateCode,a.city=e.statesCities.value.city,a.cityCode=e.statesCities.value.cityCode);e.citiesDistricts&&(a.state=e.citiesDistricts.value.state,a.stateCode=e.citiesDistricts.value.stateCode,a.city=e.citiesDistricts.value.city,a.cityCode=e.citiesDistricts.value.cityCode,a.district=e.citiesDistricts.value.district,a.districtCode=e.citiesDistricts.value.districtCode);e.cityAutocomplete&&(a.cityCode=e.cityAutocomplete.value.cityCode);e.isCompany&&e.isCompany.value&&(a.company={},a.company.name=e.companyName?e.companyName.value:null,a.company.vatin=e.companyNif?e.companyNif.value:null,a.company.registrationNumber=e.registrationNumber?e.registrationNumber.value:null,a.company.stateRegistration=e.companyStateRegistration?e.companyStateRegistration.value:null,a.company.certifiedElectronicMail=e.certifiedElectronicMail?e.certifiedElectronicMail.value:null,a.company.stateRegistration=e.stateRegistration?e.stateRegistration.value:null);e.documentType&&(a.documentTypeCode=e.documentType.value.documentTypeCode,a.nif=e.documentType.value.nif);e.nif&&(a.nif=e.nif?e.nif.value:null);e.zipcodeLookup&&(a.zipCode=e.zipcodeLookup.value);e.streetNumber&&(a.streetNumber=e.streetNumber?e.streetNumber.value:null);return a},t.getPrivacyPolicyBundle=function(e){if(e.privatePolicy)return{privatePolicy:e.privatePolicy.hasOwnProperty("value")?e.privatePolicy.value:e.privatePolicy||null}}},22282:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.addUserAddress=function(e,t){return(0,o.postJson)((0,s.urlTo)("shop/".concat(t,"/user/address/create/save")),{address:e})},t.evaluateUserAddress=function(e){return(0,o.postJson)((0,s.urlTo)("shop/user/address/".concat(e.id,"/evaluate")),{address:e})},t.saveGuestPersonalData=function(e,t,a,r){return(0,o.postJson)((0,s.urlTo)("shop/".concat(e.id,"/user/personal-data/save")),{order:e,address:t,privacyPolicyBundle:a},r)},t.saveLiteBillingAddress=function(e,t,a){return(0,o.postJson)((0,s.urlTo)("shop/".concat(t,"/user/billing-address/save")),{billingAddress:e},a)},t.saveShippingMethodSelection=function(e,t,a,r,n,i){return(0,o.postJson)((0,s.urlTo)("shop/".concat(r,"/shipping/method-selection/save")),{shippingMethod:e,shippingMethodDeliveries:t,shippingOptions:a,selectedAddressId:n},i)},t.saveUserAddressSelection=function(e,t,a){return(0,o.postJson)((0,s.urlTo)("shop/".concat(t,"/user/address-book/save")),{addressId:e},a)},t.updateAddress=function(e,t){return(0,o.postJson)((0,s.urlTo)("shop/".concat(t,"/user/address/").concat(e.id,"/update")),{address:e})},t.updateBillingAddress=function(e,t,a){return(0,o.postJson)((0,s.urlTo)("shop/".concat(t,"/billing/address/").concat(e.id,"/edit/save")),{billingAddress:e},a)},t.updateGuestUserShippingAddress=function(e,t,a){return(0,o.postJson)((0,s.urlTo)("shop/".concat(t,"/shipping/address/").concat(e.id,"/edit/save")),{shippingAddress:e},a)},t.updateSimulateDelivery=function(e,t,a){return(0,o.postJson)((0,s.urlTo)("shop/".concat(e,"/shipping-v2/method-selection")),{deliveriesSelection:t,virtualItems:a})},t.updateUserAddress=function(e,t,a){return(0,o.postJson)((0,s.urlTo)("shop/".concat(t,"/user/address/").concat(e.id,"/edit/save")),{address:e},a)};var s=a(95621),o=a(73570)},6615:function(e,t,a){a.r(t)}}]);