"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[38712],{36572:function(e,t,r){var a=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(59713));function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,n.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u=e=>o(o(o(o({},e),e.city?{}:{city:"-"}),e.phones?{phones:e.phones.map((e=>Object.assign(e,{phoneType:"mobile"})))}:{}),!e.documentTypeCode||e.nif&&""!==e.nif?{}:{documentTypeCode:null,nif:null});t.default=u},57716:function(e,t,r){var a=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(67294)),s=r(4145),o=r(36106),u=r(2078),l=a(r(25853)),d=r(19498);t.default=e=>{let{passMark:t,address:r,onSubmit:a,onEdit:i}=e,c=[];return t===u.ADDRESS_EVALUATION_NOT_VALID_WITH_SUGGESTIONS?c.push(n.default.createElement(d.FormSubmit,{key:"use-this-address",form:"address-evaluation-address-list"},n.default.createElement(l.default,{bundle:"shared.buttons",name:"addressEvaluation.use-this-address"}))):t===u.ADDRESS_EVALUATION_NOT_VALID&&c.push(n.default.createElement(o.Button,{variant:o.Button.Variants.SECONDARY,key:"use-this-address",onClick:()=>{(0,s.trigger)(s.types.ADDRESS_VALIDATION_USE_THIS_ADDRESS,{popupInteraction:u.analyticsAddressEvaluationMap[t]}),a(r,u.ADDRESS_USER_CHOICE_INVALID_MANUAL)}},n.default.createElement(l.default,{bundle:"shared.buttons",name:"addressEvaluation.use-this-address"})),n.default.createElement(o.Button,{key:"edit-address",onClick:()=>{(0,s.trigger)(s.types.ADDRESS_VALIDATION_EDIT_ADDRESS,{popupInteraction:u.analyticsAddressEvaluationMap[t]}),i()}},n.default.createElement(l.default,{bundle:"shared.buttons",name:"addressEvaluation.edit-address"}))),c}},72938:function(e,t,r){var a=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(67154)),s=a(r(59713)),o=a(r(6479)),u=a(r(67294)),l=r(4145),d=r(2078),i=r(44302),c=a(r(24151)),f=a(r(25853)),p=a(r(62014)),O=a(r(48929));r(78917);const E=["passMark","address","title","onEdit"];function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var A=e=>{let{passMark:t,address:r,title:a,onEdit:s}=e,_=(0,o.default)(e,E);const{store:{isMultiCountry:A}}=(0,i.useAppConfig)();return u.default.createElement(p.default,(0,n.default)({type:"radio",className:"address-evaluation-address-list-item",label:u.default.createElement("div",{className:"address-evaluation-address-list-item__content"},u.default.createElement("div",{className:"address-evaluation-address-list-item__content-title"},a),u.default.createElement(O.default,{address:S(S({},r),{},{firstName:null,middleName:null,lastName:null}),hideCountry:!A,showPhone:!1}),s&&u.default.createElement("div",{className:"address-evaluation-address-list-item__actions"},u.default.createElement(c.default,{className:"address-evaluation-address-list-item__edit",onClick:e=>{e.preventDefault(),(0,l.trigger)(l.types.ADDRESS_VALIDATION_EDIT_ADDRESS,{popupInteraction:d.analyticsAddressEvaluationMap[t]}),s()}},u.default.createElement(f.default,{bundle:"shared.buttons",name:"edit"}))))},_))};t.default=A},45265:function(e,t,r){var a=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(67154)),s=a(r(67294)),o=a(r(25853)),u=r(19498),l=a(r(72938)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var a={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=n?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(a,s,o):a[s]=e[s]}a.default=e,r&&r.set(e,a);return a}(r(28866));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}var c=e=>{let{passMark:t,suggestions:r,address:a,onSubmit:i,onEdit:c}=e;const{forms:{addressEvaluationAddressListForm:{inputPropsForRadio:f,handleSubmit:p}}}=(0,d.default)({suggestions:r,address:a,onSubmit:i});return s.default.createElement(u.Form,{id:"address-evaluation-address-list",autoComplete:"off",onSubmit:p},s.default.createElement(l.default,(0,n.default)({address:a,title:s.default.createElement(o.default,{bundle:"shared.forms",name:"evaluation.original"})},f("addressEvaluationItem",d.ADDRESS_EVALUATION_ORIGINAL),{passMark:t,onEdit:c})),r.map(((e,t)=>s.default.createElement(l.default,(0,n.default)({key:"".concat(d.ADDRESS_EVALUATION_SUGGESTION,"_").concat(t),address:e,title:s.default.createElement(o.default,{bundle:"shared.forms",name:"evaluation.".concat(r.length>1?"validated":"recommended")})},f("addressEvaluationItem","".concat(d.ADDRESS_EVALUATION_SUGGESTION,"_").concat(t)))))))};t.default=c},28866:function(e,t,r){var a=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ADDRESS_EVALUATION_SUGGESTION=t.ADDRESS_EVALUATION_ORIGINAL=void 0;var n=a(r(59713)),s=a(r(89648)),o=r(4145),u=r(2078);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,n.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const i="original";t.ADDRESS_EVALUATION_ORIGINAL=i;const c="suggestion";t.ADDRESS_EVALUATION_SUGGESTION=c;var f=e=>{let{suggestions:t,address:r,onSubmit:a}=e;return{forms:{addressEvaluationAddressListForm:(0,s.default)({onSubmit:e=>e.addressEvaluationItem===i?((0,o.trigger)(o.types.ADDRESS_VALIDATION_CLICK_ORIGINAL_ADDRESS,{popupInteraction:u.analyticsAddressEvaluationMap[u.ADDRESS_EVALUATION_NOT_VALID_WITH_SUGGESTIONS]}),a(r,u.ADDRESS_USER_CHOICE_INVALID_MANUAL)):e.addressEvaluationItem.indexOf("_")>0?((0,o.trigger)(o.types.ADDRESS_VALIDATION_CLICK_RECOMMENDED_ADDRESS,{popupInteraction:u.analyticsAddressEvaluationMap[u.ADDRESS_EVALUATION_NOT_VALID_WITH_SUGGESTIONS]}),a(d(d({},r),t[e.addressEvaluationItem.split("_")[1]]),u.ADDRESS_USER_CHOICE_INVALID_SUGGESTED)):void 0,initialValues:{addressEvaluationItem:"".concat(c,"_0")}})}}};t.default=f},10668:function(e,t,r){var a=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.AddressEvaluationPopup=void 0;var n=a(r(59713)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=E(t);if(r&&r.has(e))return r.get(e);var a={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=n?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(a,s,o):a[s]=e[s]}a.default=e,r&&r.set(e,a);return a}(r(67294)),o=r(4145),u=r(44302),l=r(36106),d=a(r(96514)),i=a(r(48929)),c=a(r(25853)),f=a(r(45265)),p=r(2078),O=a(r(57716));function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(E=function(e){return e?r:t})(e)}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,n.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const A=e=>{let{addressEvaluation:{passMark:t,suggestions:r,address:a,dispatch:n},onSubmit:E,onClose:_,onEdit:A}=e;const D=(0,O.default)({passMark:t,address:a,onSubmit:E,onEdit:A}),b=()=>{(0,o.trigger)(o.types.ADDRESS_VALIDATION_POP_UP_CLOSED,{popupInteraction:p.analyticsAddressEvaluationMap[t]}),_()},{store:{isMultiCountry:v}}=(0,u.useAppConfig)();(0,s.useEffect)((()=>{(0,o.trigger)(o.types.ADDRESS_VALIDATION_POP_UP_IMPRESSION,{popupType:p.analyticsAddressEvaluationMap[t]})}),[t]);const y=(0,l.useId)(),m=(0,l.useId)();return s.default.createElement(d.default,{open:!0,"aria-labelledby":y,"aria-describedby":m,onClose:b},s.default.createElement(d.default.Header,null,s.default.createElement("h1",{id:y},s.default.createElement(c.default,{bundle:"shared.forms",name:"evaluation.".concat(t.toLowerCase(),".title")})),s.default.createElement(d.default.CloseButton,{onClose:b})),s.default.createElement(d.default.Content,null,s.default.createElement("p",{id:m},s.default.createElement(c.default,{bundle:"shared.forms",name:"evaluation.".concat(t.toLowerCase(),".description")})),s.default.createElement("div",null,!r||0===r.length&&s.default.createElement(s.default.Fragment,null,s.default.createElement(i.default,{address:S(S({},a),{},{firstName:null,middleName:null,lastName:null,state:null}),hideCountry:!v,showPhone:!1})),(null==r?void 0:r.length)>0&&s.default.createElement(f.default,{suggestions:r,address:a,passMark:t,onSubmit:(e,r)=>{(0,o.trigger)(o.types.ADDRESS_VALIDATION_USE_THIS_ADDRESS,{popupInteraction:p.analyticsAddressEvaluationMap[t]}),E(e,r,n)},onEdit:A}))),s.default.createElement(d.default.Actions,null,D))};t.AddressEvaluationPopup=A;var D=A;t.default=D},49669:function(e,t,r){var a=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(59713)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var a={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=n?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(a,s,o):a[s]=e[s]}a.default=e,r&&r.set(e,a);return a}(r(67294)),o=r(44302),u=a(r(40495)),l=a(r(10668)),d=r(2078),i=r(38703);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,n.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t){return p(p({},e),{},{addressEvaluation:{userChoice:t}})}var E=e=>{let{onSubmit:t,onClose:r,onEdit:a,processAddress:n,evaluateAction:c=i.evaluateUserAddress}=e;const{setError:f,resetError:p}=(0,o.useError)(),E=(0,u.default)(c),[_,S]=(0,s.useState)();return{evaluateAddress:(e,r)=>{E(e).then((a=>{let{passMark:n,suggestions:s,addressId:o}=a;e.id!==o&&o&&(e.id=o);let u=e;n!==d.ADDRESS_EVALUATION_VALID&&n!==d.ADDRESS_EVALUATION_VALID_WITH_SUGGESTIONS||(u=O(e,d.ADDRESS_USER_CHOICE_VALID)),n!==d.ADDRESS_EVALUATION_NOT_VALID&&n!==d.ADDRESS_EVALUATION_NOT_VALID_WITH_SUGGESTIONS?(n===d.ADDRESS_EVALUATION_NOT_AVAILABLE&&(u=O(e,d.ADDRESS_USER_CHOICE_NO_RESPONSE)),t(u,r)):S({passMark:n,suggestions:s,address:e,dispatch:r})})).catch((a=>{var n;(p(),422===a.statusCode)?f({errorMsg:a.errorMsg||(null===(n=a.data)||void 0===n?void 0:n.description)}):t(O(e,d.ADDRESS_USER_CHOICE_NO_RESPONSE),r)}))},addressEvaluationPopup:(null==_?void 0:_.passMark)&&s.default.createElement(l.default,{addressEvaluation:_,onSubmit:(e,r,a)=>{let s=(null==n?void 0:n(e))||e;r&&(s=O(s,r)),t(s,a),S(null)},onClose:e=>{S(null),null==r||r(e)},onEdit:()=>{S(null),null==a||a()}})}};t.default=E},38703:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.createUserAddress=function(e){return(0,n.postJson)((0,a.urlTo)("user/address/save"),{address:e})},t.deleteUserAddress=function(e){return(0,n.postJson)((0,a.urlTo)("user/address/delete"),{addressId:e})},t.evaluateUserAddress=function(e){return(0,n.postJson)((0,a.urlTo)("user/address/evaluate"),{address:e})},t.updateUserAddress=function(e){return(0,n.postJson)((0,a.urlTo)("user/address/update"),{address:e})};var a=r(95621),n=r(73570)},78917:function(e,t,r){r.r(t)}}]);