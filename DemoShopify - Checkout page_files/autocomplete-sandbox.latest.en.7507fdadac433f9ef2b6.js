"use strict";(self.webpackChunkcheckout_web=self.webpackChunkcheckout_web||[]).push([["autocomplete-sandbox"],{Rf04:()=>{const e=Symbol.for("RemoteUi::Retain"),t=Symbol.for("RemoteUi::Release"),n=Symbol.for("RemoteUi::RetainedBy");class r{constructor(){this.memoryManaged=new Set}add(t){this.memoryManaged.add(t),t[n].add(this),t[e]()}release(){for(const e of this.memoryManaged)e[n].delete(this),e[t]();this.memoryManaged.clear()}}const o="_@f";function a(a){const s=new Map,i=new Map,c=new Map;return{encode:function e(t){if("object"==typeof t){if(null==t)return[t];if(t instanceof ArrayBuffer)return[t];const n=[];return Array.isArray(t)?[t.map((t=>{const[r,o=[]]=e(t);return n.push(...o),r})),n]:[Object.keys(t).reduce(((r,o)=>{const[a,s=[]]=e(t[o]);return n.push(...s),{...r,[o]:a}}),{}),n]}if("function"==typeof t){if(s.has(t)){const e=s.get(t);return[{[o]:e}]}const e=a.uuid();return s.set(t,e),i.set(e,t),[{[o]:e}]}return[t]},decode:d,async call(o,a){const s=new r,c=i.get(o);if(null==c)throw new Error("You attempted to call a function that was already released.");try{const r=(l=c,Boolean(l&&l[e]&&l[t])?[s,...c[n]]:[s]);return await c(...d(a,r))}finally{s.release()}var l},release(e){const t=i.get(e);t&&(i.delete(e),s.delete(t))},terminate(){s.clear(),i.clear(),c.clear()}};function d(r,s){if("object"==typeof r){if(null==r)return r;if(r instanceof ArrayBuffer)return r;if(Array.isArray(r))return r.map((e=>d(e,s)));if(o in r){const i=r[o];if(c.has(i))return c.get(i);let d=0,l=!1;const u=()=>{d-=1,0===d&&(l=!0,c.delete(i),a.release(i))},f=()=>{d+=1},p=new Set(s),y=(...e)=>{if(l)throw new Error("You attempted to call a function that was already released.");if(!c.has(i))throw new Error("You attempted to call a function that was already revoked.");return a.call(i,e)};Object.defineProperties(y,{[t]:{value:u,writable:!1},[e]:{value:f,writable:!1},[n]:{value:p,writable:!1}});for(const e of p)e.add(y);return c.set(i,y),y}return Object.keys(r).reduce(((e,t)=>({...e,[t]:d(r[t],s)})),{})}return r}}function s(){return`${i()}-${i()}-${i()}-${i()}`}function i(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)}let c;!function(e){e.Af="AF",e.Ax="AX",e.Al="AL",e.Dz="DZ",e.Ad="AD",e.Ao="AO",e.Ai="AI",e.Ag="AG",e.Ar="AR",e.Am="AM",e.Aw="AW",e.Ac="AC",e.Au="AU",e.At="AT",e.Az="AZ",e.Bs="BS",e.Bh="BH",e.Bd="BD",e.Bb="BB",e.By="BY",e.Be="BE",e.Bz="BZ",e.Bj="BJ",e.Bm="BM",e.Bt="BT",e.Bo="BO",e.Ba="BA",e.Bw="BW",e.Bv="BV",e.Br="BR",e.Io="IO",e.Bn="BN",e.Bg="BG",e.Bf="BF",e.Bi="BI",e.Kh="KH",e.Ca="CA",e.Cv="CV",e.Bq="BQ",e.Ky="KY",e.Cf="CF",e.Td="TD",e.Cl="CL",e.Cn="CN",e.Cx="CX",e.Cc="CC",e.Co="CO",e.Km="KM",e.Cg="CG",e.Cd="CD",e.Ck="CK",e.Cr="CR",e.Hr="HR",e.Cu="CU",e.Cw="CW",e.Cy="CY",e.Cz="CZ",e.Ci="CI",e.Dk="DK",e.Dj="DJ",e.Dm="DM",e.Do="DO",e.Ec="EC",e.Eg="EG",e.Sv="SV",e.Gq="GQ",e.Er="ER",e.Ee="EE",e.Sz="SZ",e.Et="ET",e.Fk="FK",e.Fo="FO",e.Fj="FJ",e.Fi="FI",e.Fr="FR",e.Gf="GF",e.Pf="PF",e.Tf="TF",e.Ga="GA",e.Gm="GM",e.Ge="GE",e.De="DE",e.Gh="GH",e.Gi="GI",e.Gr="GR",e.Gl="GL",e.Gd="GD",e.Gp="GP",e.Gt="GT",e.Gg="GG",e.Gn="GN",e.Gw="GW",e.Gy="GY",e.Ht="HT",e.Hm="HM",e.Va="VA",e.Hn="HN",e.Hk="HK",e.Hu="HU",e.Is="IS",e.In="IN",e.Id="ID",e.Ir="IR",e.Iq="IQ",e.Ie="IE",e.Im="IM",e.Il="IL",e.It="IT",e.Jm="JM",e.Jp="JP",e.Je="JE",e.Jo="JO",e.Kz="KZ",e.Ke="KE",e.Ki="KI",e.Kp="KP",e.Xk="XK",e.Kw="KW",e.Kg="KG",e.La="LA",e.Lv="LV",e.Lb="LB",e.Ls="LS",e.Lr="LR",e.Ly="LY",e.Li="LI",e.Lt="LT",e.Lu="LU",e.Mo="MO",e.Mg="MG",e.Mw="MW",e.My="MY",e.Mv="MV",e.Ml="ML",e.Mt="MT",e.Mq="MQ",e.Mr="MR",e.Mu="MU",e.Yt="YT",e.Mx="MX",e.Md="MD",e.Mc="MC",e.Mn="MN",e.Me="ME",e.Ms="MS",e.Ma="MA",e.Mz="MZ",e.Mm="MM",e.Na="NA",e.Nr="NR",e.Np="NP",e.Nl="NL",e.An="AN",e.Nc="NC",e.Nz="NZ",e.Ni="NI",e.Ne="NE",e.Ng="NG",e.Nu="NU",e.Nf="NF",e.Mk="MK",e.No="NO",e.Om="OM",e.Pk="PK",e.Ps="PS",e.Pa="PA",e.Pg="PG",e.Py="PY",e.Pe="PE",e.Ph="PH",e.Pn="PN",e.Pl="PL",e.Pt="PT",e.Qa="QA",e.Cm="CM",e.Re="RE",e.Ro="RO",e.Ru="RU",e.Rw="RW",e.Bl="BL",e.Sh="SH",e.Kn="KN",e.Lc="LC",e.Mf="MF",e.Pm="PM",e.Ws="WS",e.Sm="SM",e.St="ST",e.Sa="SA",e.Sn="SN",e.Rs="RS",e.Sc="SC",e.Sl="SL",e.Sg="SG",e.Sx="SX",e.Sk="SK",e.Si="SI",e.Sb="SB",e.So="SO",e.Za="ZA",e.Gs="GS",e.Kr="KR",e.Ss="SS",e.Es="ES",e.Lk="LK",e.Vc="VC",e.Sd="SD",e.Sr="SR",e.Sj="SJ",e.Se="SE",e.Ch="CH",e.Sy="SY",e.Tw="TW",e.Tj="TJ",e.Tz="TZ",e.Th="TH",e.Tl="TL",e.Tg="TG",e.Tk="TK",e.To="TO",e.Tt="TT",e.Ta="TA",e.Tn="TN",e.Tr="TR",e.Tm="TM",e.Tc="TC",e.Tv="TV",e.Ug="UG",e.Ua="UA",e.Ae="AE",e.Gb="GB",e.Us="US",e.Um="UM",e.Uy="UY",e.Uz="UZ",e.Vu="VU",e.Ve="VE",e.Vn="VN",e.Vg="VG",e.Wf="WF",e.Eh="EH",e.Ye="YE",e.Zm="ZM",e.Zw="ZW",e.Zz="ZZ"}(c||(c={})),c.Ca,c.Us;const d="elasticsearch",l="google",u=new Map([["ELASTICSEARCH_AUTOCOMPLETE",d],["GOOGLE_PLACE_AUTOCOMPLETE",l]]);class f extends Error{constructor(...e){super(...e),this.name="AutocompletePredictionError"}}const p="https://atlas.shopifysvc.com/graphql";(function(e,{uuid:t=s,createEncoder:n=a,callable:o}={}){let i=!1,c=e;const d=new Map,l=new Map,u=function(e,t){let n;if(null==t){if("function"!=typeof Proxy)throw new Error("You must pass an array of callable methods in environments without Proxies.");const t=new Map;n=new Proxy({},{get(n,r){if(t.has(r))return t.get(r);const o=e(r);return t.set(r,o),o}})}else{n={};for(const r of t)Object.defineProperty(n,r,{value:e(r),writable:!1,configurable:!0,enumerable:!0})}return n}(m,o),f=n({uuid:t,release(e){p(3,[e])},call(e,n,r){const o=t(),a=S(o,r),[s,i]=f.encode(n);return p(5,[o,e,s],i),a}});return c.addEventListener("message",y),{call:u,replace(e){const t=c;c=e,t.removeEventListener("message",y),e.addEventListener("message",y)},expose(e){for(const t of Object.keys(e)){const n=e[t];"function"==typeof n?d.set(t,n):d.delete(t)}},callable(...e){if(null!=o)for(const t of e)Object.defineProperty(u,t,{value:m(t),writable:!1,configurable:!0,enumerable:!0})},terminate(){p(2,void 0),g(),c.terminate&&c.terminate()}};function p(e,t,n){i||c.postMessage(t?[e,t]:[e],n)}async function y(e){const{data:t}=e;if(null!=t&&Array.isArray(t))switch(t[0]){case 2:g();break;case 0:{const e=new r,[o,a,s]=t[1],i=d.get(a);try{if(null==i)throw new Error(`No '${a}' method is exposed on this endpoint`);const[t,n]=f.encode(await i(...f.decode(s,[e])));p(1,[o,void 0,t],n)}catch(n){const{name:e,message:t,stack:r}=n;throw p(1,[o,{name:e,message:t,stack:r}]),n}finally{e.release()}break}case 1:{const[e]=t[1];l.get(e)(...t[1]),l.delete(e);break}case 3:{const[e]=t[1];f.release(e);break}case 6:{const[e]=t[1];l.get(e)(...t[1]),l.delete(e);break}case 5:{const[e,r,o]=t[1];try{const t=await f.call(r,o),[n,a]=f.encode(t);p(6,[e,void 0,n],a)}catch(n){const{name:t,message:r,stack:o}=n;throw p(6,[e,{name:t,message:r,stack:o}]),n}break}}}function m(e){return(...n)=>{if(i)return Promise.reject(new Error("You attempted to call a function on a terminated web worker."));if("string"!=typeof e&&"number"!=typeof e)return Promise.reject(new Error(`Canâ€™t call a symbol method on a remote endpoint: ${e.toString()}`));const r=t(),o=S(r),[a,s]=f.encode(n);return p(0,[r,e,a],s),o}}function S(e,t){return new Promise(((n,r)=>{l.set(e,((e,o,a)=>{if(null==o)n(a&&f.decode(a,t));else{const e=new Error;Object.assign(e,o),r(e)}}))}))}function g(){var e;i=!0,d.clear(),l.clear(),null===(e=f.terminate)||void 0===e||e.call(f),c.removeEventListener("message",y)}})({addEventListener:window.addEventListener.bind(window),removeEventListener:window.removeEventListener.bind(window),postMessage(e,t){window.parent.postMessage(e,"*",t)}}).expose({search:async(e,t,n)=>{const r={query:e,countryCode:t.countryCode,location:t.location,locale:t.locale,sessionToken:t.requestToken};[d,l].includes(String(n))&&(r.adapterOverride=n);const o=await fetch(p,{method:"POST",headers:{"Content-Type":"application/json","X-Shop-Id":t.shopId,"X-Client-Request-Id":t.sourceId},body:JSON.stringify({query:"\n  query predictions($query: String, $countryCode: AutocompleteSupportedCountry!, $locale: String!, $location: LocationInput, $sessionToken: String!, $adapterOverride: String) {\n    predictions(query: $query, countryCode: $countryCode, locale: $locale, location: $location, sessionToken: $sessionToken, adapterOverride: $adapterOverride) {\n      addressId\n      description\n      completionService\n      matchedSubstrings {\n        length\n        offset\n      }\n    }\n  }\n",variables:r})}),a=await o.json();if(!a.data)throw new f(`No data returned from autocomplete query ${JSON.stringify(a)}`);return a.data.predictions},fetchAddress:async(e,t)=>{const n={addressId:e,locale:t.locale,sessionToken:t.requestToken,adapterOverride:u.get(t.completionService)},r=await fetch(p,{method:"POST",headers:{"Content-Type":"application/json","X-Shop-Id":t.shopId,"X-Client-Request-Id":t.sourceId},body:JSON.stringify({query:"\n  query address($addressId: String!, $locale: String!, $sessionToken: String!, $adapterOverride: String) {\n    address(id: $addressId, locale: $locale, sessionToken: $sessionToken, adapterOverride: $adapterOverride) {\n      address1\n      address2\n      city\n      country\n      countryCode\n      province\n      provinceCode\n      zip\n      latitude\n      longitude\n    }\n  }\n",variables:n})}),{data:{address:o}}=await r.json(),{address1:a,address2:s,city:i,countryCode:c,provinceCode:d,zip:l,latitude:f,longitude:y}=o,m={latitude:f,longitude:y};return{postalCode:l,city:i,address1:a,address2:s,countryCode:c,zoneCode:d,coordinates:m.latitude&&m.longitude?m:void 0}},validation:async(e,t,n,r)=>{const o=await fetch(p,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Shop-Id":r?.shopId||"","X-Client-Request-Id":r?.sourceId||""},body:JSON.stringify({query:"query validation($address: AddressInput!, $locale: String!, $matchingStrategy: MatchingStrategy) {\n  validation(address: $address, locale: $locale, matchingStrategy: $matchingStrategy) {\n    validationScope\n    locale\n    fields {\n      name\n      value\n    }\n    concerns {\n      fieldNames\n      code\n      type\n      typeLevel\n      suggestionIds\n      message\n    }\n    id\n    suggestions {\n      id\n      address1\n      address2\n      city\n      zip\n      provinceCode\n      province\n      countryCode\n    }\n  }\n}",variables:{address:{address1:e.address1,address2:e.address2,city:e.city,countryCode:e.countryCode,provinceCode:e.zoneCode,zip:e.postalCode,phone:e.phone},locale:t,matchingStrategy:n}})}),{data:a,errors:s}=await o.json();return{data:a,errors:s}}})}},e=>{e(e.s="Rf04")}]);