"use strict";(self.webpackChunkcheckout_web=self.webpackChunkcheckout_web||[]).push([["app_components_AddressForm_AddressForm_tsx-app_components_Step_Step_tsx-app_utilities_receipt-224401"],{EOKD:(e,t,r)=>{r.d(t,{Um:()=>He,kS:()=>$e,kZ:()=>Je,bE:()=>We,g:()=>Ye});var a=r("+9dH"),n=(r("FNk8"),r("Cmfx")),s=r("TSYQ"),o=r.n(s),d=r("UMTP"),i=r("eoR2"),l=r("Z2/x"),c=r("YABI"),u=r("T+C8"),p=r("jxMX"),f=r("/GaP"),m=r("TGTV"),g=r("m9XA"),y=r("HuVc"),v=r("NyV5"),C=r("xwCw"),b=r("7dFW"),h=r("GPQ7"),_=r("WYdg"),E=r("uq5J"),k=r("7xYO"),w=r("K/fI");function I(e){return/[0-9\u0660-\u0669\u06f0-\u06f9\u0966-\u096f\uff10-\uff19]/.test(e)}var S=r("jWAf"),A=r("sDyq"),z=r("n3o9"),T=r("oLza"),O=r("s4As"),L=r("AXx4"),N=r("VuFA"),Z=r("760v"),x=r("0+2B"),D=r("YviK"),P=r("rruu"),q=r("rwyE"),M=r("heND"),B=r("gX2b");function V({fieldValidationResult:e,matchingStrategy:t,address:r,addressType:a,trackAddressValidation:n}){e.forEach(((e,s)=>{"validation-api"===e.source&&n(e.id,r,e.concern,t,e.suggestion,a,s)}))}var F=r("DMd1"),G=r("rUUW"),R=r("0+mv"),U=r("vsSS"),j=r("/Iwi");const $={Suggestion:"vv0g120"},H={WarningIconWrapper:"TkcBT"};function W({address:e,addressErrors:t,addressSuggestions:r,suggestion:a,field:s,addressType:o,validationId:l}){const c=(0,f.Dv)(e),u=(0,U.w)(j.AU),p=(0,U.w)(j.N8),m=u&&!p,g=Ye(s,e),y=(0,d.q)(),{resetAddressFieldSuggestions:v}=(0,x.Zu)(r,t),{resetAddressFieldErrors:C}=(0,x.kO)(t),b=function(){const e=(0,N.a)(),t=(0,L._v)(),r=(0,O.Lk)(),{id:a}=(0,z.L)(),s=(0,i.b)();return(0,n.useCallback)(((n,o,d,i,l)=>{if(e){const c=t?.value?.defaultAttributes?.uniqToken||"",u={schemaId:Z.gn.AddressValidationSuggestionAcceptance,payload:{shopId:parseInt((0,T.Bp)(a),10),checkoutToken:r.checkoutSessionIdentifier||"",uniqueToken:c,locale:s,country:n,validationId:o,suggestionId:d,acceptedField:i,context:"shipping"===l?"Shipping address":"Billing address"}};e.record(u)}}),[s,e,r.checkoutSessionIdentifier,a,t?.value?.defaultAttributes?.uniqToken])}();if(!m)return n.default.createElement(n.default.Fragment,null);const h=()=>{a?.address&&(b(c.countryCode||"",l,a.id,s,o),g({...c,...a?.address}),v(s),C(s))},_=(e=>{let t;return t="zoneCode"===e?`${a?.address.zone}`:`${a?.address[e]}`,n.default.createElement("button",{className:$.Suggestion,onClick:h},t)})(s),E=`${a?.message}. `,k=a?.type;return n.default.createElement(n.default.Fragment,null,"warning"===k?n.default.createElement(F.T,{columns:["auto","fill"],spacing:"small300"},n.default.createElement("div",{className:H.WarningIconWrapper},n.default.createElement(G.JO,{source:"info"})),n.default.createElement(R.x,null,y("field_errors.address_suggestion_did_you_mean_html",{html:_},"%{html}ではありませんか？"))):n.default.createElement(n.default.Fragment,null,E,y("field_errors.address_suggestion_did_you_mean_html",{html:_},"%{html}ではありませんか？")))}function Y(e,t,r,a,s,o,d,i,l){V({address:t,fieldValidationResult:e,trackAddressValidation:o,addressType:l,matchingStrategy:i}),e.forEach(((e,o)=>{if("validation-api"===e.source){if(d)if(e.suggestion){const{id:d,suggestion:i,type:c}=e,u=n.default.createElement(W,{validationId:d,address:t,addressErrors:r,addressSuggestions:a,suggestion:i,field:o,addressType:l});s.write(r[o],{value:u,type:c,textValue:"Invalid address"}),s.write(a[o],i)}else e.error&&("warning"===e.type?(s.write(r[o],{value:n.default.createElement(F.T,{columns:["auto","fill"],spacing:"small300"},n.default.createElement(G.JO,{source:"info"}),n.default.createElement(R.x,null,e.error)),type:"warning",textValue:"Invalid address"}),s.write(a[o],{type:"warning",message:e.error})):s.write(r[o],e.error))}else s.write(r[o],e.error)}))}var J=r("2mXy"),K=r("g89B");const Q=["US"];class X extends Error{constructor(...e){super(...e),this.name="AddressValidationError"}}function ee(e){switch(e){case"address1":return"address1";case"address2":return"address2";case"country_code":case"countryCode":case"country":return"countryCode";case"zip":return"postalCode";case"province":case"province_code":case"provinceCode":return"zoneCode";case"city":return"city";case"phone":return"phone";default:throw new X("Unknown Address Component")}}function te(e){return void 0===e?{}:{address1:e.address1??void 0,address2:e.address2??void 0,city:e.city??void 0,zoneCode:e.provinceCode??void 0,zone:e.province??void 0,postalCode:e.zip??void 0,countryCode:e.countryCode??void 0}}var re=r("D93j");function ae(e,t){switch(e){case"address_zip_invalid_for_country":return"shipping"===t?re.j.DeliveryInvalidPostalCodeForCountry:re.j.PaymentsInvalidPostalCodeForCountry;case"address_zip_blank":return"shipping"===t?re.j.DeliveryPostalCodeRequired:re.j.PaymentsPostalCodeRequired;case"address_zip_invalid_for_country_and_province":return"shipping"===t?re.j.DeliveryInvalidPostalCodeForZone:re.j.PaymentsInvalidPostalCodeForZone;case"address_zip_contains_emojis":return"shipping"===t?re.j.DeliveryPostalCodeContainsEmojis:re.j.PaymentsPostalCodeContainsEmojis}return"shipping"===t?"DELIVERY_POSTAL_CODE_BLANK":"PAYMENTS_POSTAL_CODE_BLANK"}class ne extends Error{constructor(e){super("AddressValidationServiceError"),this.name="AddressValidationServiceError",this.errors=void 0;const t=["Not allowed"];this.errors=e.map((e=>e.message)).filter((e=>!t.includes(e)))}}var se=r("Es9o");function oe(e,t){const{addressType:r,addressErrors:a,suggestions:s,countryCode:o,availableCountries:d,addressSettings:l}=t,c=(0,f.xP)(),u=(0,P.cp)(""),p=(0,q.I)(),m=["ES","GOOGLE"].includes(p),g=function(){const e=(0,N.a)(),t=(0,L._v)(),r=(0,O.Lk)(),{id:a}=(0,z.L)(),s=(0,i.b)(),o=(0,K.vQ)(),d=(0,f.xP)(),l=(0,n.useMemo)((()=>new Map),[]);return(0,n.useCallback)(((n,i,c,u,p,f,m)=>{const g=d.read(i).value,y=((...e)=>e.join(""))(JSON.stringify(g),JSON.stringify(p),f,m,c,u,n);if(e&&!l.has(y)){l.set(y,{address:i,suggestion:p,addressType:f,addressFieldKey:m,concern:c,matchingStrategy:u});const d=t?.value?.defaultAttributes?.uniqToken||"",v={schemaId:Z.gn.AddressValidation,payload:{checkoutToken:r.checkoutSessionIdentifier||"",shopId:parseInt((0,T.Bp)(a),10),uniqueToken:d,locale:s,address1:g.address1,address2:g.address2,city:g.city,zip:g.postalCode,zone:g.zoneCode,country:g.countryCode||"",validationId:n,address1Suggested:p?.address.address1,address2Suggested:p?.address.address2,citySuggested:p?.address.city,zipSuggested:p?.address.postalCode,zoneSuggested:p?.address.zoneCode,countrySuggested:p?.address.countryCode||"",errorFields:c.fieldNames||[],errorCodes:[c.code],errorType:c.type,matchingStrategy:u,suggestionsCount:c.suggestionIds.length||0,checkoutView:o?"Single page":"Multi page",context:"shipping"===f?"Shipping address":"Billing address"}};e.record(v)}}),[d,e,l,t?.value?.defaultAttributes?.uniqToken,r.checkoutSessionIdentifier,a,s,o])}(),{resetAddressSuggestions:y}=(0,x.Zu)(s,a),{resetAddressErrors:v}=(0,x.kO)(a),b=["ES","GOOGLE"].includes(p)?p:"ES",h="GOOGLE"===b?"ES":"GOOGLE",_=function({countryCode:e,countries:t,addressSettings:r}){const a=function(){const e=(0,i.b)(),t=(0,M.I)(),r=(0,n.useMemo)((()=>new Map),[]),{id:a}=(0,z.L)(),s=(0,O.Lk)(),{validation:o}=(0,se.c)();return(0,n.useCallback)((async({address1:n,address2:d,zoneCode:i,countryCode:l,postalCode:c,city:u,phone:p},f)=>{const m=((...e)=>e.join(""))(n,d,u,i,c,l,p,f);r.has(f)||r.set(f,new Map);const g=r.get(f);if(g.has(m))return g.get(m);try{const{data:t,errors:r}=await o({address1:n,address2:d,zoneCode:i,countryCode:l,postalCode:c,city:u,phone:p},e,f,{shopId:(0,T.Bp)(a),sourceId:s.sourceId||""});if(r)throw new ne(r);return g.clear(),g.set(m,t.validation),t.validation}catch(y){return y instanceof ne&&y.errors.length>0&&t.leaveBreadcrumb("AddressValidation service failed",{errors:y.errors}),{id:"",concerns:[],suggestions:[],locale:e,validationScope:[],fields:[]}}}),[r,o,e,a,s.sourceId,t])}(),s=(0,U.w)(j.AU),o=(0,U.w)(j.N8),d=s&&!o,l=(0,x.TC)(e,t,r),c=(0,K.vQ)();return(0,n.useCallback)((async({addressType:e,address:t,matchingStrategy:r,experimentGroup:n,validationTestGroup:s,action:o})=>{const i=new Map,u=l(t,e);if("submit"===o&&u.forEach(((e,t)=>{i.set(t,{error:e,type:"error",source:void 0,matchingStrategy:r})})),function({onePageCheckoutEnabled:e,addressValidationAPIEnabled:t,errors:r,addressType:a,countryCode:n}){return!e&&t&&0===r.size&&Q.includes(n||"")&&"shipping"===a}({onePageCheckoutEnabled:c,addressValidationAPIEnabled:d,errors:u,addressType:e,countryCode:t.countryCode})){const o=await a(t,r),d=new Map;o.suggestions.forEach((e=>d.set(e.id,e))),function(e){const t=new Map([["countryCode",0],["coordinates",2],["zoneCode",4],["postalCode",8],["address1",16],["address2",32],["city",64]]),r=(e,r)=>e|(t.get(ee(r))??0),a=e.reduce(((e,t)=>{if(null==t.fieldNames)return[];const a=t.fieldNames.reduce(r,0);return e[a]=((e,t)=>{if(!e&&t)return t;if(e&&!t)return e;if(e.type!==t.type)return"error"===e.type?e:t;switch(e.type){case"error":return e.typeLevel<t.typeLevel?e:t;case"warning":return e.typeLevel>t.typeLevel?e:t}})(e[a]??void 0,t),e}),{});return[...new Set(Object.values(a))]}(o.concerns).forEach((t=>{const a=ee(t.fieldNames[0]),l=t.suggestionIds.length>0?{address:te(d.get(t.suggestionIds[0])),message:t.message,code:t.code,type:t.type.toLowerCase(),id:t.suggestionIds[0]}:void 0;"address_missing_building_number"===t.code&&"BASIC"===n||(i.set(a,{id:o.id,error:t.message,suggestion:l,concernCode:"postalCode"===a?ae(t.code||"",e):t.code,type:t.type.toLowerCase(),concern:t,source:"validation-api",matchingStrategy:r}),s&&u.set(a,t.message))}))}return i}),[l,d,a,c])}({countryCode:o,countries:d,addressSettings:l}),E=(0,n.useCallback)((t=>_({address:c.read(e).value,addressType:r,matchingStrategy:b,experimentGroup:p,validationTestGroup:m,action:t})),[e,r,_,p,b,c,m]),k=(0,n.useCallback)((t=>_({address:c.read(e).value,addressType:r,matchingStrategy:h,experimentGroup:p,validationTestGroup:!1,action:t})),[e,r,_,p,h,c]),I=(0,M.I)(),[S]=(0,w.Ew)(),A=(0,n.useCallback)(((t,a)=>{V({address:e,matchingStrategy:a,fieldValidationResult:t,addressType:r,trackAddressValidation:g})}),[e,r,g]),F=(0,B.y1)((async t=>{if("progression"===c.read(u).value)return;const{revision:n}=c.read(e),o=await E();c.read(e).revision===n&&Y(o,e,a,s,c,g,m,b,r);try{const t=await k();c.read(e).revision===n&&A(t,h)}catch(d){}}),150);(0,f.bQ)(e,(e=>{c.write(u,""),F(e)})),(0,D.$u)((async({reason:t,parts:n})=>{if(c.write(u,t),"negotiation"===t)return{behavior:"allow"};if(S)return{behavior:"allow"};Object.entries(a).forEach((e=>{const t=Object.keys(a).includes(e[0])?c.read(a[e[0]]).value:"";let r;if("string"==typeof t&&(r=t),Object.keys(s).includes(e[0])&&(0,J.l$)(t)){const t=c.read(s[e[0]]).value;r="error"===t?.type?t?.message:""}if(r)return I.leaveBreadcrumb("Blocking address error",{errorMessage:r}),{behavior:"block",reason:C.VO.InvalidAddress}}));const o=await E("submit");if("shipping"===c.read(n.billingAddressOption).value&&"billing"===r)return v(),y(),{behavior:"allow"};const d=Array.from(o,(([,e])=>e.error)).filter((e=>e));k().then((e=>{[...e.values()].find((e=>"error"===e?.type))&&A(e,h)})).catch((()=>{}));const i=Array.from(o,(([,e])=>e)).filter((e=>"error"===e?.type)).length>0,l=Array.from(o,(([,e])=>e)).filter((e=>"validation-api"!==e?.source)).length>0;return m&&i||!m&&l?(I.leaveBreadcrumb("blocking errors",{errors:d}),{behavior:"block",reason:C.VO.InvalidAddress,perform:()=>{Y(o,e,a,s,c,g,m,b,r)}}):{behavior:"allow",perform:()=>{y(),m||i&&A(o,b)}}}))}var de=r("+FA0"),ie=r("2GIy"),le=r("lent");function ce({address:e,addressOptions:t,inPaymentContext:r=!1,disabled:a=!1}){const s=(0,f.Dv)(e),o=(0,d.q)(),i=function(e){const t=(0,f.xP)();return r=>{const{firstName:a,lastName:n,company:s,address1:o,address2:d,city:i,countryCode:l,postalCode:c,zoneCode:u,phone:p,coordinates:f}=e.fields;t.write(a,r.firstName),t.write(n,r.lastName),t.write(s,r.company),t.write(o,r.address1),t.write(d,r.address2),t.write(i,r.city),t.write(l,r.countryCode),t.write(c,r.postalCode),t.write(u,r.zoneCode),t.write(p,r.phone),t.write(f,r.coordinates)}}(e),l=t.find((e=>(0,y.LD)(s,e.address)))?.value,c=(0,n.useRef)(!1),u=(0,n.useMemo)((()=>[...t,{label:o("contact.new_address_label","新しい住所を使用する"),value:`${t.length}`,address:(0,le.f0)({countryCode:e.fields.countryCode.init,zoneCode:e.fields.zoneCode.init})}]),[t,o,e.fields.countryCode.init,e.fields.zoneCode.init]),p=u[u.length-1].value,[m,g]=(0,n.useState)(l&&!r?l:p);if(r&&!c.current){const e=u[parseInt(m,10)].address;i(e)}return(0,n.useEffect)((()=>{const e=t.find((e=>(0,y.LD)(s,e.address)))?.value;g(e||p)}),[s,t,p]),(0,n.useEffect)((()=>{c.current=!0}),[]),n.default.createElement(ie.P,{value:m,label:o("contact.stored_addresses_label","住所を保存しました"),options:u,onChange:e=>{const t=u[parseInt(e,10)].address;i(t),g(e)},disabled:a})}var ue=r("xlkJ");const pe={tabindex:"-1",label:"",ariaHidden:!0,ariaLabel:"no-label",type:"text"},fe=(0,n.memo)((function({address:e,addressType:t,availableCountries:r,country:s,onAutofillCaptured:o}){const d=(0,g.er)(),i=(0,f.xP)(),l=t=>({currentTarget:{value:r}})=>{i.write(e.fields[t],r),o?.()};return n.default.createElement(ue.G,{visibility:"hidden"},n.default.createElement("input",(0,a.Z)({},pe,{id:"autofill_firstName",name:"firstName",autoComplete:c(t,"given-name"),onChange:l("firstName")})),n.default.createElement("input",(0,a.Z)({},pe,{id:"autofill_lastName",name:"lastName",autoComplete:c(t,"family-name"),onChange:l("lastName")})),d.isVisible("company")&&n.default.createElement("input",(0,a.Z)({},pe,{id:"autofill_company",name:"company",autoComplete:c(t,"organization"),onChange:l("company")})),n.default.createElement("input",(0,a.Z)({},pe,{id:"autofill_address1",name:"address1",autoComplete:c(t,d.isVisible("address2")?"address-line1":"street-address"),onChange:l("address1")})),d.isVisible("address2")&&n.default.createElement("input",(0,a.Z)({},pe,{id:"autofill_address2",name:"address2",autoComplete:c(t,"address-line2"),onChange:l("address2")})),n.default.createElement("input",(0,a.Z)({},pe,{id:"autofill_city",name:"city",autoComplete:c(t,"address-level2"),onChange:l("city")})),n.default.createElement("input",(0,a.Z)({},pe,{id:"autofill_country",name:"country",autoComplete:c(t,"country"),onChange:({currentTarget:{value:t}})=>{const a=r.find((e=>e.value===t||e.label.toLowerCase()===t.toLowerCase()));a&&i.write(e.fields.countryCode,a.value)}})),n.default.createElement("input",(0,a.Z)({},pe,{id:"autofill_zone",name:"zone",autoComplete:c(t,"address-level1"),onChange:({currentTarget:{value:t}})=>{i.write(e.fields.zoneCode,t)}})),n.default.createElement("input",(0,a.Z)({},pe,{id:"autofill_address_level1",name:"address-level1",autoComplete:c(t,"address-level1"),onChange:({currentTarget:{value:t}})=>{i.write(e.fields.zoneCode,t)}})),n.default.createElement("input",(0,a.Z)({},pe,{id:"autofill_postalCode",name:"postalCode",autoComplete:c(t,"postal-code"),onChange:l("postalCode")})),d.isVisible("phone",s.code)&&n.default.createElement("input",(0,a.Z)({},pe,{id:"autofill_phone",name:"phone",autoComplete:c(t,"tel"),onChange:l("phone")})));function c(e,t){return e?`${e} ${t}`:t}})),me=(0,n.memo)((function({address:e,addressType:t,availableCountries:r,country:s,onAutofillCaptured:o}){const d=(0,g.er)(),i=(0,f.xP)(),l=t=>({currentTarget:{value:r}})=>{i.write(e.fields[t],r),o?.()};return n.default.createElement(ue.G,{visibility:"hidden"},d.isVisible("address2")&&n.default.createElement("input",(0,a.Z)({},pe,{id:"autofill_collapsed_address2",name:"address2",autoComplete:c(t,"address-line2"),onChange:l("address2")})),n.default.createElement("input",(0,a.Z)({},pe,{id:"autofill_collapsed_city",name:"city",autoComplete:c(t,"address-level2"),onChange:l("city")})),n.default.createElement("input",(0,a.Z)({},pe,{id:"autofill_collapsed_country",name:"country",autoComplete:c(t,"country"),onChange:({currentTarget:{value:t}})=>{const a=r.find((e=>e.value===t||e.label.toLowerCase()===t.toLowerCase()));a&&i.write(e.fields.countryCode,a.value)}})),n.default.createElement("input",(0,a.Z)({},pe,{id:"autofill_collapsed_zone",name:"zone",autoComplete:c(t,"address-level1"),onChange:({currentTarget:{value:t}})=>{i.write(e.fields.zoneCode,t)}})),n.default.createElement("input",(0,a.Z)({},pe,{id:"autofill_collapsed_address_level1",name:"address-level1",autoComplete:c(t,"address-level1"),onChange:({currentTarget:{value:t}})=>{i.write(e.fields.zoneCode,t)}})),n.default.createElement("input",(0,a.Z)({},pe,{id:"autofill_postal_collapsed_postalCode",name:"postalCode",autoComplete:c(t,"postal-code"),onChange:l("postalCode")})),d.isVisible("phone",s.code)&&n.default.createElement("input",(0,a.Z)({},pe,{id:"autofill__collapsed_phone",name:"phone",autoComplete:c(t,"tel"),onChange:l("phone")})));function c(e,t){return e?`${e} ${t}`:t}}));var ge=r("CYPs"),ye=r("3gdw"),ve=r("cZd2");function Ce({address:e,addressErrors:t,addressType:r,addressSettings:s,loading:o,editDisabled:i}){const l=(0,d.q)(),{firstNameRequired:c}=(0,ye.D)(),u=s.isRequired("firstName")||c(r),p=(0,n.useCallback)((e=>{if(u&&!(0,ve.Um)(e))return l("field_errors.address_first_name_blank","名を入力してください")}),[u,l]),f=(0,ve.a8)(e.fields.firstName,t.firstName,p);return n.default.createElement(ge.nv,(0,a.Z)({name:"firstName",label:u?l("contact.first_name_label","名"):l("contact.optional_first_name_label","名 (任意)"),required:u,autocomplete:{group:r,field:"given-name"},readonly:o||i},f))}function be({address:e,addressType:t,addressErrors:r,addressSettings:s,loading:o,editDisabled:i}){const l=(0,d.q)(),c=s.isRequired("lastName"),u=(0,n.useCallback)((e=>{if(c&&!(0,ve.Um)(e))return l("field_errors.address_last_name_blank","姓を入力してください")}),[c,l]),p=(0,ve.a8)(e.fields.lastName,r.lastName,u);return n.default.createElement(ge.nv,(0,a.Z)({name:"lastName",label:c?l("contact.last_name_label","姓"):l("contact.optional_last_name_label","姓 (任意)"),required:c,autocomplete:{group:t,field:"family-name"},readonly:o||i},p))}var he=r("2jWm"),_e=r("67S1");function Ee({addressType:e,address:t,addressErrors:r,addressSettings:s,loading:o,editDisabled:i}){const l=(0,d.q)(),c=(0,_e.I)(),u="inactive"!==(0,he.E)(),p=s.isRequired("company"),f=(0,n.useCallback)((e=>{if(p&&!(0,ve.Um)(e))return l("field_errors.address_company_blank","会社名を入力してください")}),[p,l]),m=(0,ve.a8)(t.fields.company,r.company,f),g=u&&void 0===m.value?{value:c?.shippingAddress?.company}:{};return n.default.createElement(ge.nv,(0,a.Z)({name:"company",label:p?l("contact.company_label","会社"):l("contact.optional_company_label","会社 (任意)"),required:p,autocomplete:{group:e,field:"organization"},readonly:o||i},m,g))}var ke=r("NzfB"),we=r("yAW0"),Ie=r("yZOd");function Se(){const e=(0,d.q)();return n.default.createElement(Ie.g,{blockAlignment:"center",spacing:"small200"},n.default.createElement(G.JO,{source:"info"}),n.default.createElement(R.x,null,e("contact.civic_number_warning","該当する場合は、番地も入力してください")))}const Ae={"Field-sizeSmall":"Vob8N","Input-AccessoryOffset":"R5Ptu"};function ze(e){const{country:t,address:r,addressRef:s,addressType:l,addressErrors:u,addressSettings:p,loading:m,editDisabled:g,missingBuildingNumberInAddress2:y,autocompleteDisabled:v,resetAddressSuggestions:C}=e,b=(0,d.q)(),[,h]=(0,f.KO)(r.fields.coordinates),_=(0,f.Dv)(r.fields.address1),E=(0,f.Dv)(r.fields.address2),[k,w]=(0,n.useState)(!I(_||"")),S=(0,f.xP)(),A=(0,N.a)(),x=(0,O.Lk)(),{id:D}=(0,z.L)(),P=(0,L._v)(),M=(0,i.b)(),B=(0,q.I)(),V=S.read(r).value,F=(0,n.useCallback)((e=>{if(!(0,ve.Um)(e))return b("field_errors.address_address1_blank","住所を入力してください")}),[b]),G=(0,ve.a8)(r.fields.address1,u.address1,F),R=e=>{e!==G.value&&(h(void 0),G.onChange(e),C?.(),I(e)||w(!0))},U=e=>{I(e)&&w(!1),G.onInput(e)},j=p.isVisible("address2")?"address-line1":"street-address",$=!v&&(0,ke.rx)(t,p),H={group:l,field:j};let W=!1;t.buildingNumberRequired&&(W=Boolean(k&&_),t.buildingNumberMayBeInAddress2&&(W=Boolean(k&&y&&(_||E))));const Y=(0,n.useRef)(W);Y.current!==W&&(W&&function(){if(P.value.defaultAttributes&&A){const e=P.value.defaultAttributes?.uniqToken||"",r={schemaId:Z.gn.BuildingNumberNudge,payload:{checkoutToken:x.checkoutSessionIdentifier||"",shopId:parseInt((0,T.Bp)(D),10),uniqueToken:e,address1:V.address1||"",address2:V.address2||"",city:V.city||"",zone:V.zoneCode||"",zip:V.postalCode||"",territory:t.code,promptType:"missing_street_number",locale:M,context:"shipping"===l?"Shipping address":"Billing address"}};A?.record(r)}}(),Y.current=W);const J=$?n.default.createElement(Te,(0,a.Z)({},e,G,{onChange:R,onInput:U,autocomplete:H})):n.default.createElement(ge.nv,(0,a.Z)({ref:s,name:"address1",label:b("contact.address1_label","住所"),required:!0,autocomplete:H,readonly:m||g},G,{onChange:R,onInput:U})),K=o()(Ae["Field-sizeSmall"],{[Ae["Input-AccessoryOffset"]]:$});return n.default.createElement("div",{className:K},n.default.createElement(c.E,{spacing:"small200"},J,W&&"BASIC"===B&&n.default.createElement(Se,null)))}function Te({value:e,error:t,onInput:r,onChange:a,onAddressAutoComplete:s,loading:o,editDisabled:i,address:l,autocomplete:c,addressType:u,onBlur:p,resetAddressSuggestions:m}){const g=(0,d.q)(),y=We(l,s,m),v=(0,f.Dv)(l.fields.countryCode);return n.default.createElement(we.w,{name:"address1",field:"address1",label:g("contact.address1_label","住所"),accessory:n.default.createElement(G.JO,{source:"magnify",appearance:"subdued"}),countryCode:v,onSelect:y,required:!0,autocomplete:c,readonly:o||i,value:e,error:t,onChange:a,onInput:r,addressType:u,onBlur:p})}var Oe;function Le({address:e,addressType:t,addressErrors:r,addressSettings:s,loading:o,editDisabled:i,setMissingBuildingNumberInAddress2:l,resetAddressSuggestions:c}){const p=(0,d.q)(),f=(0,K.un)(),m=(0,n.useRef)(null),g=s.isRequired("address2"),y=(0,n.useCallback)((e=>{if(g&&!(0,ve.Um)(e))return p("field_errors.address_address2_blank","建物名、部屋番号などを入力してください")}),[g,p]),v=(0,ve.a8)(e.fields.address2,r.address2,y),C=Boolean(v.value?.length),b=!f||g||C?Oe.Visible:Oe.Hidden,[h,_]=(0,n.useState)(b);return(0,n.useEffect)((()=>{h===Oe.Focused&&m.current?.focus()}),[h]),(0,n.useEffect)((()=>{h===Oe.Hidden&&C&&_(Oe.Visible)}),[h,C]),h===Oe.Hidden?n.default.createElement(ue.G,null,n.default.createElement(u.r,{textDecoration:"none",onPress:()=>{_(Oe.Focused)}},n.default.createElement(Ie.g,{spacing:"small400",blockAlignment:"center"},n.default.createElement(G.JO,{source:"plus",size:"extraSmall"}),p("shipping.address2_add_label","建物名、部屋番号などを追加")))):n.default.createElement(ge.nv,(0,a.Z)({name:"address2",label:g?p("contact.address2_label","建物名、部屋番号など"):p("contact.optional_address2_label","建物名、部屋番号など (任意)"),required:g,autocomplete:{group:t,field:"address-line2"},readonly:o||i},v,{ref:m,onChange:e=>{v.onChange(e),c?.(),I(e)||l?.(!0)},onInput:e=>{v.onInput(e),I(e)&&l?.(!1)}}))}!function(e){e.Focused="focused",e.Visible="visible",e.Hidden="hidden"}(Oe||(Oe={}));var Ne=r("lbUN");const Ze={"Field-sizeSmall":"ii1aN"},xe=new Map([[k.C.Ca,/^[A-Za-z]\d[A-Za-z]\s*\d[A-Za-z]\d$/],[k.C.Us,/^\d{5}(?:[-\s]?\d{4})?$/]]);function De(e){const{country:t,address:r,addressType:s,addressErrors:o,addressSettings:i,loading:l,editDisabled:c,resetAddressSuggestions:u}=e,p=(0,d.q)(),m=(0,n.useCallback)((e=>{if(!(0,ve.Um)(e))return p("field_errors.address_zip_blank","郵便番号を入力してください")}),[p]),g=(0,ve.a8)(r.fields.postalCode,o.postalCode,m),[y,v]=(0,n.useState)(g.value);(0,f.bQ)(r.fields.postalCode,(e=>{e!==y&&v(e)}));const[,C]=(0,f.KO)(r.fields.coordinates),b=t.autocompletionField===Ne.N.PostalCode&&i.autocompleteEnabled&&(0,ke.h0)(t.code),h=e=>{e!==g.value&&(C(void 0),g.onChange(e),u?.())},_=xe.get(t.code),E=b?n.default.createElement(qe,(0,a.Z)({},e,g,{onChange:h})):n.default.createElement(ge.nv,(0,a.Z)({name:"postalCode",label:t.labels.postalCode,required:!0,inputMode:Pe(t),autocomplete:{group:s,field:"postal-code"},letterCase:"uppercase",readonly:l||c},g,{onInput:function(e){const t=e.toLocaleUpperCase();g.onInput(t),v(t),_&&_.test(t)&&h(t)},onChange:h,controlledValue:y}));return n.default.createElement("div",{className:Ze["Field-sizeSmall"]},E)}function Pe(e){const{pureNumericPostalCode:t}=e;return t?"numeric":"text"}function qe({value:e,error:t,onInput:r,onChange:a,onAddressAutoComplete:s,loading:o,editDisabled:i,address:l,addressType:c,onBlur:u,resetAddressSuggestions:p}){const m=(0,d.q)(),g=We(l,s,p),y=(0,f.Dv)(l.fields.countryCode);return n.default.createElement(we.w,{name:"postalCode",field:"postalCode",label:m("contact.postal_code_label","郵便番号"),countryCode:y,onSelect:g,required:!0,autocomplete:{group:c,field:"postal-code"},readonly:o||i,value:e,error:t,onChange:a,onInput:r,addressType:c,onBlur:u})}function Me({address:e,addressType:t,addressErrors:r,loading:s,editDisabled:o,resetAddressSuggestions:i}){const l=(0,d.q)(),c=(0,n.useCallback)((e=>{if(!(0,ve.Um)(e))return l("field_errors.address_city_blank","市区町村を入力してください")}),[l]),u=(0,ve.a8)(e.fields.city,r.city,c),[,p]=(0,f.KO)(e.fields.coordinates);return n.default.createElement(ge.nv,(0,a.Z)({name:"city",label:l("contact.city_label","市区町村"),required:!0,autocomplete:{group:t,field:"address-level2"},readonly:s||o},u,{onChange:e=>{e!==u.value&&(p(void 0),u.onChange(e),i?.())}}))}function Be({country:e,address:t,addressType:r,addressErrors:s,loading:o,editDisabled:i,resetAddressSuggestions:l}){const c=(0,d.q)(),u=(0,n.useCallback)((e=>{if(!(0,ve.Um)(e))return c("field_errors.address_province_blank","都道府県を選択してください")}),[c]),p=(0,ve.a8)(t.fields.zoneCode,s.zoneCode,u),[,m]=(0,f.KO)(t.fields.coordinates),[,g]=(0,f.KO)(s.postalCode);return(0,n.useEffect)((()=>{const t=p?.value?.toLowerCase(),r=e.zones.find((e=>e.code===p?.value||e.name.toLowerCase()===t));r&&p.onChange(r.code)}),[e.zones,p]),n.default.createElement(ie.P,(0,a.Z)({name:"zone",label:e.labels.zone,placeholder:e.labels.zone,options:(y=e.zones,y.map((e=>({label:e.name,value:e.code})))),required:!0,autocomplete:{group:r,field:"address-level1"},readonly:o||i},p,{onChange:e=>{e!==p.value&&(m(void 0),g(void 0),l?.(),p.onChange(e))}}));var y}function Ve({address:e,addressType:t,addressErrors:r,availableCountries:s,loading:o,editDisabled:l,resetAddressSuggestions:c}){const u=(0,d.q)(),p=(0,ve.a8)(e.fields.countryCode,r.countryCode),m=(0,ve.a8)(e.fields.zoneCode,r.zoneCode),g=(0,K.un)(),[,y]=(0,f.KO)(e.fields.coordinates),[,v]=(0,f.KO)(r.postalCode),[,C]=(0,f.KO)(r.zoneCode),b=(0,N.a)(),h=(0,O.Lk)(),{id:_}=(0,z.L)(),E=(0,L._v)(),k=(0,i.b)(),w=(0,n.useCallback)(((e,r)=>{if(E.value.defaultAttributes&&b){const a=E.value.defaultAttributes?.uniqToken||"",n={schemaId:Z.gn.CountrySelection,payload:{checkoutToken:h.checkoutSessionIdentifier||"",shopId:parseInt((0,T.Bp)(_),10),uniqueToken:a,territoryCode:r,selectionMethod:e,context:"shipping"===t?"Shipping address":"Billing address",locale:k}};b?.record(n)}}),[E.value.defaultAttributes,b,t,k,h.checkoutSessionIdentifier,_]);return(0,n.useEffect)((()=>{w("auto-selected",p.value)}),[E.value.defaultAttributes?.uniqToken,b]),n.default.createElement(ie.P,(0,a.Z)({name:"countryCode",label:u("contact.country_label","国 / 地域"),options:s,required:!0,autocomplete:{group:t,field:"country"},readonly:o||l},p,{onChange:e=>{g||m.onChange(void 0),e!==p.value&&(p.onChange(e),c?.(),y(void 0),C(void 0),v(void 0),w("user-input",e))}}))}var Fe=r("kT9J"),Ge=r("NIvQ");function Re({country:e,addressType:t,addressErrors:r,addressSettings:s,addressFormSettings:o,address:i,loading:l,editDisabled:c}){const u=(0,d.q)(),p=s.isRequired("phone",e.code),f=(0,n.useCallback)((e=>{if(p&&!(0,ve.Um)(e))return u("contact.errors.blank.contact_info.phone","電話番号を入力してください")}),[p,u]),m=(0,ve.a8)(i.fields.phone,r.phone,f),g=(0,h.m)(),y=u(g?"siberia.contact.optional_phone_label":"contact.optional_phone_label","電話番号 (任意)"),v=u(g?"siberia.contact.phone_label":"contact.phone_label","電話番号"),C=!1!==o?.phoneTooltip&&n.default.createElement(Fe.an,{activator:n.default.createElement(G.JO,{source:"question",appearance:"subdued",accessibilityLabel:u("general.tooltip_accessibility_label","詳細")})},u("contact.phone_tooltip","ご注文について連絡をする必要があるときに使用します"));return n.default.createElement(Ge.$,(0,a.Z)({name:"phone",countryCode:e.code,label:p?v:y,hideCountries:!0,required:p,autocomplete:{group:t,field:"telephone"},readonly:l||c,accessory:C||void 0},m))}const Ue="I9W0A";class je extends Error{constructor(...e){super(...e),this.name="UnexpectedFieldError"}}const $e=(0,n.memo)((function({id:e,address:t,countries:r,addressSettings:s,addressType:k,addressErrors:D,additionalFieldGroups:P,children:M,expanded:B=!0,autocompleteDisabled:V=!1,collapsible:F=!1,settings:G,loading:R=!1,onAddressAutoComplete:U,onManualAddressEntryClick:j,onAutofillCaptured:$,inPaymentContext:H,showSavedAddressSelector:W=!0}){const Y=(0,d.q)(),{geolocation:J}=(0,p.Q)(),K=(0,g.er)(),[Q]=(0,w.Ew)(),X=(0,f.Dv)(t.fields.countryCode),ee=(0,n.useMemo)((()=>(0,y.Yu)()),[]),{resetAddressSuggestions:te}=(0,x.Zu)(ee,D),re=(0,f.xP)(),ae=(0,v.eS)(E.k.Delivery,C.sC.Destination)&&"shipping"===k,ne=(0,h.m)(),{details:se,loading:ie}=(0,_.J$)(X),le=(0,n.useMemo)((()=>s??K),[s,K]),ue=(0,n.useMemo)((()=>se??J.country),[se,J.country]),pe=(0,n.useMemo)((()=>!r||ae?[{value:ue.code,label:ue.name}]:r),[r,ue,ae]),ge=(0,b.Zo)(),ye=(0,n.useMemo)((()=>"CustomerProfile"===ge?.__typename?(("shipping"===k?ge?.shippingAddresses:ge?.billingAddresses)??[]).map((({address:e},t)=>({value:t.toString(),label:e.label,address:{...e}}))):[]),[ge,k]),ve=ye.length>0,Ce=(0,n.useMemo)((()=>{const e=ue;if(ne){const t=e.formatting.edit;e.formatting.edit=(0,y.l4)(t)}return(0,y.mt)(e,le)}),[ue,le,ne]),be=(0,n.useMemo)((()=>Ce.findIndex((e=>"{address1}"===e.id))+1),[Ce]),{groupsBeforeCountry:he,countryGroup:_e,groupsAfterCountry:Ee}=(0,n.useMemo)((()=>Je(Ce)),[Ce]);oe(t,{countryCode:X,availableCountries:pe,addressSettings:le,suggestions:ee,addressType:k,addressErrors:D}),function(e,t,r,a,s,o,d){const l=(0,f.xP)(),c=(0,f.Dv)(e.fields.countryCode),u=(0,n.useMemo)((()=>t.flatMap((({fields:e})=>e))),[t]);(0,n.useEffect)((()=>{for(const e of Object.keys(r))u.includes(e)||(l.write(r[e],void 0),Object.keys(a).includes(e)&&l.write(a[e],void 0))}),[l,r,a,u]);const p=(0,N.a)(),g=(0,O.Lk)(),{id:v}=(0,z.L)(),C=(0,L._v)(),{details:b}=(0,_.J$)(c),h=(0,i.b)(),E=(0,q.I)();const k=(0,n.useCallback)((e=>{if("error"!==e.type||null==d||s)return;const{violations:t}=e,a=(0,y.YO)(d,t);let n=!1;for(const[s,d]of a)l.write(r[s],d),o.isVisible(s,c)||(n=!0);n&&window.location.reload()}),[s,o,d,r,l,c]),w=(0,A.g)();(0,n.useEffect)((()=>{k(w)}),[w,k]),(0,m.lH)((t=>{(function(t){if("error"===t.type&&null!=d&&!s){const{violations:e}=t,a=(0,y.YO)(d,e);for(const[t,n]of a)l.write(r[t],n)}const a=[];for(const e of Object.keys(r))l.read(r[e]).value&&a.push(e);if("invalid"===t.type||"error"===t.type||"success"===t.type&&"progression"===t.negotiationStage){const r=l.read(e).value;let n;if("invalid"===t.type&&(n=t.reasons.toString()),C.value.defaultAttributes){const e=C.value.defaultAttributes?.uniqToken||"",t=b?.zones?.find((e=>e.code===r.zoneCode))?.name||r.zoneCode,s={schemaId:Z.gn.AddressSubmission,payload:{checkoutToken:g.checkoutSessionIdentifier||"",shopId:parseInt((0,T.Bp)(v),10),uniqueToken:e,territory:b?.name||"",context:"shipping"===d?"Shipping address":"Billing address",address1:r.address1||"",address2:r.address2||"",city:r.city||"",zone:t||"",zip:r.postalCode||"",errorCode:n||"",errorFields:a,locale:h,matchingStrategy:E}};p?.record(s)}}})(t),k(t)}))}(t,Ce,D,ee,Q,le,k);const[ke,we]=(0,n.useState)(!1);(0,n.useEffect)((function(){le.isVisible("phone",ue.code)||re.write(t.fields.phone,"")}),[ue,t.fields.phone,le,re]),(0,n.useEffect)((()=>{if(ie||R){const e=setTimeout((()=>we(!0)),400);return()=>clearTimeout(e)}we(ie)}),[R,ie]);const Ie=(0,f.Dv)(t.fields.address2),[Se,Ae]=(0,n.useState)(!I(Ie||"")),ze=(0,n.useRef)(null),Te={address:t,addressErrors:D,addressType:k,addressSettings:le,addressRef:ze,addressFormSettings:G,country:ue,availableCountries:pe,onAddressAutoComplete:U,missingBuildingNumberInAddress2:Se,setMissingBuildingNumberInAddress2:Ae,resetAddressSuggestions:te},Oe=(0,n.useCallback)((()=>{j?.(),setTimeout((()=>{ze.current?.focus()}))}),[j]);return n.default.createElement("div",{id:e},n.default.createElement(S.g,{active:ke},n.default.createElement(de.l,null,ge&&ve&&W?n.default.createElement(ce,{address:t,addressOptions:ye,inPaymentContext:H,disabled:ae}):null,F?n.default.createElement(n.default.Fragment,null,Ce.slice(0,be).map((e=>n.default.createElement(He,(0,a.Z)({key:e.id,group:e,additionalGroups:P},Te,{loading:ke,autocompleteDisabled:V,editDisabled:ae})))),!B&&n.default.createElement(me,{address:t,addressType:k,country:ue,availableCountries:pe,onAutofillCaptured:$}),n.default.createElement("div",{className:"_Yuii"},n.default.createElement("div",{className:Ue},n.default.createElement(l.u,{id:"collapsed-fields",open:B,renderChildrenWhenCollapsed:!0},n.default.createElement(de.l,null,Ce.slice(be).map((e=>n.default.createElement(He,(0,a.Z)({key:e.id,group:e,additionalGroups:P},Te,{loading:ke,editDisabled:ae})))),M))),n.default.createElement("div",{className:o()(Ue,{z4F0X:B})},n.default.createElement(c.E,{inlineAlignment:"start"},n.default.createElement(u.r,{"aria-controls":"collapsed-fields",onPress:Oe},Y("shipping.enter_address_manually_label","住所を手動で入力する")))))):n.default.createElement(n.default.Fragment,null,he.map((e=>n.default.createElement(He,(0,a.Z)({key:e.id,group:e,additionalGroups:P},Te,{loading:ke,editDisabled:ae})))),n.default.createElement(He,(0,a.Z)({key:"country",group:_e,additionalGroups:P},Te,{loading:ke,editDisabled:ae})),Ee.map((e=>n.default.createElement(He,(0,a.Z)({key:e.id,group:e,additionalGroups:P},Te,{loading:ke,editDisabled:ae})))),M)),n.default.createElement(fe,{address:t,addressType:k,country:ue,availableCountries:pe,onAutofillCaptured:$})))}));function He({addressRef:e,additionalGroups:t,autocompleteDisabled:r,group:s,...o}){const{loading:d}=o,i=t?.filter((({after:e})=>s.fields.includes(e)))??[];return n.default.createElement(n.default.Fragment,null,n.default.createElement(de.T,null,s.fields.map((t=>{switch(t){case"firstName":return n.default.createElement(Ce,o);case"lastName":return n.default.createElement(be,o);case"company":return n.default.createElement(Ee,o);case"address1":return n.default.createElement(ze,(0,a.Z)({},o,{addressRef:e,autocompleteDisabled:r}));case"address2":return n.default.createElement(Le,o);case"postalCode":return n.default.createElement(De,o);case"city":return n.default.createElement(Me,o);case"zoneCode":return n.default.createElement(Be,o);case"countryCode":return n.default.createElement(Ve,o);case"phone":return n.default.createElement(Re,o);default:throw new je(`Unexpected field: ${t}`)}}))),i.map((e=>n.default.createElement(de.T,{key:e.id},e.render({loading:d})))))}function We(e,t,r){const a=(0,f.xP)();return n=>{const{coordinates:s,address1:o,address2:d,city:i,zoneCode:l,countryCode:c,postalCode:u}=e.fields;a.write(s,n.coordinates),a.write(o,n.address1??""),a.write(d,(e=>n.address2??e)),a.write(i,n.city),a.write(l,n.zoneCode),a.write(c,(e=>Object.values(k.C).find((e=>e===n.countryCode?.toUpperCase()))??e)),a.write(u,n.postalCode),r?.(),t?.(n)}}function Ye(e,t){const r=(0,f.xP)();return a=>{const{address1:n,address2:s,city:o,zoneCode:d,postalCode:i}=t.fields,l=a[e]??"";switch(e){case"address1":r.write(n,l);break;case"address2":r.write(s,l);break;case"city":r.write(o,l);break;case"zoneCode":r.write(d,l);break;case"postalCode":r.write(i,l)}}}function Je(e){const t=e.findIndex((e=>e.fields.includes("countryCode")));return{groupsBeforeCountry:e.slice(0,t),countryGroup:e[t],groupsAfterCountry:e.slice(t+1)}}},yAW0:(e,t,r)=>{r.d(t,{w:()=>d});var a=r("Cmfx"),n=r("B8Vp"),s=r("CYPs"),o=r("G1hX");const d=(0,n.L)({load:async()=>(await(0,o.R)((()=>r.e("AutocompleteField").then(r.bind(r,"509U"))))).AutocompleteField,id:()=>"509U",renderLoading:e=>a.default.createElement(s.nv,e)})},"+FA0":(e,t,r)=>{r.d(t,{T:()=>l,l:()=>i});var a=r("Cmfx"),n=r("SVER"),s=r("YABI"),o=r("bF3E"),d=r("DMd1");function i({children:e}){const{formLayout:{spacing:t}}=(0,n.G)();return a.default.createElement(s.E,{spacing:t},e)}function l({children:e}){const{formLayout:{spacing:t="base"}}=(0,n.G)(),r=(0,o.Vt)({base:!0,small:!1})?s.E:d.T;return a.default.createElement(r,{spacing:t},e)}},jWAf:(e,t,r)=>{r.d(t,{g:()=>o});var a=r("Cmfx"),n=r("MB8d");const s={Wrapper:"pxSEU",Loading:"Kyqce"};function o({active:e=!1,size:t="base",children:r}){return a.default.createElement("div",{className:s.Wrapper,"aria-hidden":e?"true":"false"},e&&a.default.createElement("div",{className:s.Loading},a.default.createElement(n.$,{size:t})),r)}},Hvrn:(e,t,r)=>{r.d(t,{h8:()=>u,r5:()=>f,Pj:()=>p,qY:()=>m,ch:()=>g});var a=r("Cmfx"),n=r("TSYQ"),s=r.n(n),o=r("pl5I"),d=r("FoQ/"),i=r("GfCB"),l=r("UcTz");const c={Step:"VheJw",Content:"s_qAq",Header:"VUPKe",isGrouped:"USpd3",Actions:"oQEAZ","Actions-displayInline":"WD4IV"};function u({children:e}){return a.default.createElement("div",{className:c.Step},e)}function p({grouped:e,children:t}){const r=s()(c.Content,{[c.isGrouped]:e});return a.default.createElement("div",{className:r},t)}function f({children:e}){const t=(0,i.Lr)("Checkout::Actions::RenderBefore"),{actions:{display:r="inline"}}=(0,d.lz)(),n=s()(c.Actions,c[(0,o.O)("Actions-display",r)]);return a.default.createElement(a.default.Fragment,null,a.default.createElement(l._,{extensions:t,spacing:"base"}),a.default.createElement("div",{className:n},e))}function m({children:e}){return a.default.createElement("div",{className:c.PrimaryAction},e)}function g({children:e}){return a.default.createElement("div",{className:c.SecondaryAction},e)}},Es9o:(e,t,r)=>{r.d(t,{c:()=>p,e:()=>u});var a=r("lLKr"),n=r("Cmfx"),s=r("6hlG"),o=r("rJef"),d=r("k1CB"),i=r("IiIM");class l extends Error{constructor(...e){super(...e),this.name="MissingAutocompleteEndpointError"}}const c=(0,d.Q)("Autocomplete-IFrame");function u(){const e=(0,a.F)("autocomplete-sandbox"),t=(0,n.useRef)(),r=(0,i.M)(void 0,c);return(0,n.useLayoutEffect)((()=>{if(!e)throw new o.br("Unable to find autocomplete sandbox URL");const a=(0,s.lJ)({id:r,url:e,privileges:["allow-scripts","allow-same-origin"]});return t.current=(0,s.r2)(a,e),()=>{a.remove(),t.current?.terminate()}}),[e,r]),(0,n.useMemo)((()=>({search(...e){if(!t.current)throw new l("Called search without valid autocomplete endpoint");return t.current.call.search(...e)},fetchAddress(...e){if(!t.current)throw new l("Called fetchAddress without valid autocomplete endpoint");return t.current.call.fetchAddress(...e)}})),[])}function p(){const e=(0,a.F)("autocomplete-sandbox"),t=(0,n.useRef)();return(0,n.useLayoutEffect)((()=>{let r;try{if(!e)throw new o.br("Unable to find autocomplete sandbox URL");r=(0,s.lJ)({id:"validation",url:e,privileges:["allow-scripts","allow-same-origin"]}),r.addEventListener("load",(()=>{t.current=(0,s.r2)(r,e)}))}catch(a){if(a instanceof o.br)return()=>{}}return()=>{r.remove(),t.current?.terminate()}}),[e]),(0,n.useMemo)((()=>({validation(...e){if(!t.current)throw new l("Called validation without valid autocomplete endpoint");return t.current.call.validation(...e)}})),[])}},IiIM:(e,t,r)=>{r.d(t,{M:()=>n});var a=r("Cmfx");function n(e,t){const r=(0,a.useRef)(e);return r.current=e??r.current??t(),r.current}},MSrK:(e,t,r)=>{r.d(t,{$:()=>o});var a=r("UMTP"),n=r("6yLP");const s=new Map([[n.z.InsufficientFunds,"insufficient_funds"],[n.z.InvalidPaymentMethod,"cannot_verify"],[n.z.FundingError,"processing_error"],[n.z.CanceledPaypalBillingAgreement,"processing_error"],[n.z.TokenExpired,"processing_error"],[n.z.InvalidToken,"processing_error"],[n.z.UnilateralAuthError,"processing_error"],[n.z.ThirdPartyInternalError,"processing_error"],[n.z.AuthorizationError,"processing_error"],[n.z.InvalidCurrency,"processing_error"],[n.z.InvalidItemTotal,"processing_error"],[n.z.InvalidCurrency,"processing_error"],[n.z.UnprocessableTransaction,"processing_error"],[n.z.InvoiceAlreadyPaid,"processing_error"],[n.z.AuthenticationError,"cannot_verify"],[n.z.IncorrectNumber,"cannot_verify"],[n.z.IncorrectCvc,"cannot_verify"],[n.z.IncorrectZip,"cannot_verify"],[n.z.IncorrectAddress,"cannot_verify"],[n.z.IncorrectPin,"cannot_verify"],[n.z.AuthenticationError,"three_d_secure_failed"],[n.z.InvalidNumber,"invalid_number"],[n.z.InvalidExpiryDate,"invalid_expiry_date"],[n.z.InvalidCvc,"invalid_cvc"],[n.z.ExpiredCard,"expired_card"],[n.z.CardDeclined,"card_declined"],[n.z.CallIssuer,"call_issuer"],[n.z.PickUpCard,"pick_up_card"],[n.z.TestModeLiveCard,"test_mode_live_card"],[n.z.TransientError,"transient_error"],[n.z.InsufficientFunds,"insufficient_funds"],[n.z.InvalidShippingAddress,"invalid_shipping_address"],[n.z.MissingShippingAddress,"missing_shipping_address"],[n.z.InvalidPaymentMethod,"cannot_verify"],[n.z.PublicPaymentError,"generic_error"],[n.z.SuccessfulOffsiteWithGiftCardError,"successful_offsite_with_gift_card_error"]]);function o(e){const t=(0,a.q)();let r="generic_error";return e&&(r=s.get(e.code)||"generic_error"),t("payment_errors",{scope:r},{pick_up_card:"カードが拒否されました。もう一度お試しいただくか、別の決済方法を使用してください。",cannot_verify:"決済の詳細を確認できませんでした。カードの詳細を確認して、もう一度お試しください。",invalid_number:"有効なカード番号を入力してください",invalid_expiry_date:"カードの有効期限を入力してください",invalid_cvc:"有効なセキュリティコードを入力してください",expired_card:"カードの有効期限が切れています。別の決済方法を選択してください。",card_declined:"カードが拒否されました。もう一度お試しいただくか、別の決済方法を使用してください。",processing_error:"決済処理中に問題が発生しました。もう一度お試しいただくか、別の決済方法を使用してください。",call_issuer:"カードが拒否されました。別の決済方法を使用するか、詳細については銀行にお問い合わせください。",test_mode_live_card:"このストアでは、実際の注文や実際の決済を受け付けることができません。",transient_error:"決済処理中に問題が発生しました。このページを更新するか、インターネット接続を確認してください。",insufficient_funds:"不十分な資金のため、決済が拒否されました。もう一度お試しいただくか、別の決済方法を使用してください。",generic_error:"支払い処理中に問題が発生しました。もう一度お試しいただくか、別の決済方法を使用してください。",three_d_secure_failed:"決済を確認できませんでした。もう一度お試しいただくか、別の決済方法を使用してください。",missing_shipping_address:"配送先住所がないため、決済を処理できませんでした。配送先住所を追加して、もう一度お試しください。",invalid_shipping_address:"配送先住所が見つからないため、決済を処理できませんでした。配送先住所を確認して、もう一度お試しください。",successful_offsite_with_gift_card_error:"ギフトカード決済の処理中に問題が発生しました。もう一度お試しいただくか、別の決済方法を使用してください。",development_store_order_limit_reached:"この決済処理サービスでの開発ストア注文の上限に達しました。別の注文を行うには、テスト決済ゲートウェイサービスを使用する必要があります。%{development_store_order_testing_docs_link}について詳しくはこちらをご覧ください。",development_store_with_order_limit:"テスト注文を行うには、テスト決済ゲートウェイサービスを使用する必要があります。%{development_store_order_testing_docs_link}について詳しくはこちらをご覧ください。",development_store_order_testing_docs_link:"開発ストアでの注文のテスト"})}},"1kJN":(e,t,r)=>{r.d(t,{X:()=>g});var a=r("+9dH"),n=r("Cmfx"),s=r("TSYQ"),o=r.n(s),d=r("pl5I"),i=r("nMgf"),l=r("2blf"),c=r("xlkJ"),u=r("SVER"),p=r("y/x9"),f=r("I2Ce"),m=r("Y6Cp");function g({id:e,selectedItems:t,onChange:r,title:s,titleHidden:g,controlHidden:y=!1,allowMultiple:v=!1,children:C,loading:b}){const h=(0,n.useRef)(r);h.current=r;const _=(0,n.useMemo)((()=>({id:e,selectedItems:t,allowMultiple:v,controlHidden:y,get onChange(){return h.current}})),[v,e,t,y]),E=s&&(g?n.default.createElement(c.G,{visibility:"hidden"},n.default.createElement("legend",null,s)):n.default.createElement("legend",{className:m.Z.Title},n.default.createElement(i.X,{level:3,accessibilityRole:"presentation"},s))),{control:{background:k,border:w},optionList:{background:I,spacing:S="none",border:A,borderStyle:z="base"}}=(0,u.G)(),T=A||w||"full",O=I||k||"color3",{parent:L}=(0,p.R)(),N=(0,n.useMemo)((()=>"transparent"===O?L:O),[O,L]),Z=o()(m.Z.OptionList,m.Z[(0,d.O)("OptionList-background",O)],m.Z[(0,d.O)("OptionList-border",T)],m.Z[(0,d.O)("OptionList-borderStyle",z)],"none"===S&&m.Z.isContainer,b&&m.Z.isLoading),x=(0,n.useMemo)((()=>({parent:N})),[N]);return n.default.createElement(p.u.Provider,{value:x},n.default.createElement(f.z.Provider,{value:_},n.default.createElement("fieldset",{id:e},E,n.default.createElement(l.D,null,n.default.createElement("div",(0,a.Z)({className:Z},(()=>{const e={};return void 0!==b&&(e["aria-live"]="polite",e["aria-busy"]=b),e})()),C)))))}},jkNy:(e,t,r)=>{r.d(t,{Wx:()=>v,Hj:()=>C,LB:()=>b});var a=r("+9dH"),n=r("Cmfx"),s=r("TSYQ"),o=r.n(s),d=r("pl5I"),i=r("0+mv"),l=r("g4vq"),c=r("h5qW"),u=r("SVER"),p=r("wrD4"),f=r("Y6Cp"),m=r("8KmN");function g({accessibilityRole:e,...t}){const r=(0,m.U)(),a=null==r||"presentation"===e?"p":`h${r}`;return n.default.createElement(a,t)}var y=r("QHTI");function v({id:e,label:t,accessibilityLabel:r,details:s,children:m,disabled:v}){const{id:C,selectedItems:b,allowMultiple:h,controlHidden:_,onChange:E}=(0,p.V)(),k=h?c.Z:l.u,w=b.includes(e),{control:{background:I},optionList:{background:S,spacing:A="none",typographyStyle:z,backgroundHovered:T=!1,backgroundChecked:O="interactive"}}=(0,u.G)(),L=S||I,N=!h&&O&&"none"!==O,Z=o()(f.Z.Option,"none"!==A&&f.Z.isContainer,v&&f.Z.OptionDisabled,w&&f.Z.OptionChecked,w&&N&&"transparent"!==L&&f.Z[(0,d.O)("OptionChecked-background",O)],w&&N&&f.Z[(0,d.O)("OptionChecked-border",O)]),x=_?n.default.createElement(g,{className:o()(f.Z.OptionLabelHeading,z&&y.Z[z])},t):n.default.createElement(i.x,{emphasis:null==z?"bold":void 0,style:z},t),D=m?n.default.createElement("div",{className:f.Z.OptionLabelLayout},m):x;return _?n.default.createElement("div",{className:Z},n.default.createElement("div",{className:f.Z.OptionLabel},D),s):n.default.createElement("div",{className:Z},n.default.createElement("label",(0,a.Z)({htmlFor:`${C}-${e}`,className:o()(f.Z.OptionLabel,f.Z["OptionLabel-cursorPointer"],T&&f.Z["OptionLabel-backgroundHovered"]),"aria-label":r},s&&{"aria-controls":`${C}-${e}-collapsible`,"aria-expanded":w}),n.default.createElement("div",{className:f.Z.OptionControlLayout},n.default.createElement(k,{id:`${C}-${e}`,name:`${C}`,checked:w,disabled:v,onChange:()=>{E(h?w?b.filter((t=>t!==e)):[...b,e]:[e])}}),D)),s)}function C({children:e}){return n.default.createElement("div",{className:f.Z.PrimaryContent},e)}function b({children:e}){return n.default.createElement("div",{className:f.Z.SecondaryContent},e)}},jaZw:(e,t,r)=>{r.d(t,{w:()=>u});var a=r("Cmfx"),n=r("TSYQ"),s=r.n(n),o=r("pl5I"),d=r("wrD4"),i=r("Z2/x"),l=r("Y6Cp"),c=r("SVER");function u({controlledBy:e,renderChildrenWhenCollapsed:t=!1,children:r}){const{selectedItems:n,id:u}=(0,d.V)(),{optionList:{detailsBackground:p}}=(0,c.G)(),f=n.includes(e);return r?a.default.createElement(i.u,{open:f,id:`${u}-${e}-collapsible`,renderChildrenWhenCollapsed:t},a.default.createElement("div",{className:s()(l.Z.Details,p&&l.Z[(0,o.O)("Details-background",p)])},r)):null}},I2Ce:(e,t,r)=>{r.d(t,{z:()=>a});const a=(0,r("Cmfx").createContext)(null)},wrD4:(e,t,r)=>{r.d(t,{V:()=>o});var a=r("Cmfx"),n=r("MUNT"),s=r("I2Ce");function o(){const e=(0,a.useContext)(s.z);if(null===e)throw new n.j("<Option /> and <OptionDetails /> must be used inside of an <OptionList />");return e}},Y6Cp:(e,t,r)=>{r.d(t,{Z:()=>a});const a={Title:"GR30A",OptionList:"Wo4qW","OptionList-backgroundTransparent":"CsJaD","OptionList-backgroundColor1":"HMXBR","OptionList-backgroundColor2":"lfbzo","OptionList-backgroundColor3":"m5ItP",isContainer:"PuVf0",OptionLabel:"yL8c2",isLoading:"Xr2U3",OptionDisabled:"Z5rhi","OptionList-borderStyleBase":"NdTJE","OptionList-borderStyleDotted":"X7NB2","OptionList-borderFull":"NDMe9",Option:"B4zH6",Details:"b7U_P","OptionList-borderInner":"lwZ6l",OptionChecked:"Zb82w","OptionLabel-cursorPointer":"D1RJr","OptionLabel-backgroundHovered":"ij1rU",OptionLabelHeading:"zCeLR",OptionLabelLayout:"f5aCe",OptionControlLayout:"hEGyz","Details-backgroundTransparent":"lKe0j","Details-backgroundColor1":"lXug_","Details-backgroundColor2":"gBMpx","Details-backgroundColor3":"vVaOn","OptionChecked-backgroundInteractive":"HKtYc","OptionChecked-borderInteractive":"OpmPd"}}}]);