!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var r={Key:LOQATE_CODE,Geocode:!1,Options:{Certify:!1,Process:"Search",ServerOptions:{MaxResults:1,OutputScript:"Native"}},Addresses:[{Address1:"",Address2:" ",Country:"JPN",Locality:"",AdministrativeArea:""}]},i={shipping:{addressOne:"shippingAddressOne",province:"shippingState",city:"shippingAddressCity"},billing:{addressOne:"billingAddressOne",province:"billingState",city:"billingAddressCity"},account_ja_JP:{addressOne:"accountAddressAdress1",province:"accountAddressPrefecture",city:"accountAddressCity"}},o={errorContainer:null,stateContainer:null,cityContainer:null,addressContainer:null,init:function(){const e=document.querySelector(".js-loqate-zipcode.shippingZipCode"),t=document.querySelector(".js-loqate-zipcode.billingZipCode"),n=document.querySelector(".js-loqate-zipcode.accountZipCode");e&&e.addEventListener("change",this.triggerAPICall),t&&t.addEventListener("change",this.triggerAPICall),n?n.addEventListener("change",this.triggerAPICall):$(document).on("change",".js-loqate-zipcode.accountZipCode",this.triggerAPICall),$(document).on("click",".js-loqate-autofill",function(e){e.preventDefault();var t=e.currentTarget.getAttribute("data-form-type"),n=document.querySelector(".js-loqate-zipcode.".concat(t,"ZipCode"));o.cleanseAddress(t,n)})},triggerAPICall:function(e){e.stopImmediatePropagation();let t=e.currentTarget,n=t.getAttribute("data-form-type");o.cleanseAddress(n,t)},cleanseAddress:function(e,t){if(t.value.length>=7){o.clearValues(e);var n=r;n.Addresses[0].PostalCode=t.value,$.ajax({method:"POST",url:LOQATE_CLEANSE_API,contentType:"application/json",data:JSON.stringify(n)}).done(function(t){$.spinner().stop(),t[0].Matches[0]&&(o.mapAddressFields(t[0].Matches[0],e),$("body").trigger("".concat(e,":validateForm")))})}},mapAddressFields:function(e,t){if("E"===e.AQI){this.errorContainer="shipping"===t?document.querySelector("#defaultZipCode"):document.querySelector("#ZipCode"),"account_ja_JP"===t&&(this.errorContainer=$(".js-loqate-zipcode.accountZipCode").closest("div").children(".invalid-feedback").get(0)),o.clearValues(t);let e=LOQATE_ERROR_MESSAGE||"The corresponding address was not found!";this.errorContainer.style.display="block",this.errorContainer.textContent=e}else o.mapProvince(e,t),o.autoPopulateFields(e,t)},autoPopulateFields:function(e,t){const n=i[t];this.addressContainer=document.querySelector("."+n.addressOne),this.cityContainer=document.querySelector("."+n.city);let r="";e.Locality&&(r+=e.Locality),e.DependentLocality&&(r+=e.DependentLocality),e.Thoroughfare&&(r+=e.Thoroughfare),r&&(this.cityContainer.value=r,o.triggerEvents(this.cityContainer))},mapProvince:function(e,t){e.AdministrativeArea&&(this.stateContainer=document.getElementById(i[t].province),this.stateContainer||(this.stateContainer=document.querySelector("."+i[t].province)),this.stateContainer.value=e.AdministrativeArea,o.triggerEvents(this.stateContainer))},mapAddressOne:function(e,t){e.Locality&&e.Thoroughfare&&(document.getElementById(i[t].addressOne).value="".concat(e.Locality).concat(e.Thoroughfare))},mapAddressTwo:function(e,t){e.Address2&&(document.getElementById(i[t].addressTwo).value=e.Address2)},clearValues:function(e){$("#".concat(i.province$)).val(),$("#".concat(i.addressOne$)).val(),null!==this.addressContainer&&"account_ja_JP"===e&&(this.addressContainer.value=""),null!==this.cityContainer&&"shipping"===e&&(this.cityContainer.value=""),null!==this.stateContainer&&"shipping"===e&&(this.stateContainer.value="")},triggerEvents:function(e){$(e).trigger("blur")}};o.init()}]);